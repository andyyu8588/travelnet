{"version":3,"sources":["webpack:///src/app/services/chatsystem/friendlist.service.ts","webpack:///src/app/components/filter/filter.component.ts","webpack:///src/app/components/filter/filter.component.html","webpack:///src/app/components/tabs/mytrip/mytrip.component.ts","webpack:///src/app/components/tabs/mytrip/mytrip.component.html","webpack:///src/app/components/chatsystem/chatsystem.component.ts","webpack:///src/app/components/chatsystem/chatsystem.component.html","webpack:///src/app/components/profile/mime-type.validator.ts","webpack:///src/app/components/chatsystem/friendlist/friend/friend.component.ts","webpack:///src/app/components/chatsystem/friendlist/friend/friend.component.html","webpack:///src/app/components/header/header.component.ts","webpack:///src/app/components/header/header.component.html","webpack:///src/app/components/search-posts/search-posts.component.ts","webpack:///src/app/components/search-posts/search-posts.component.html","webpack:///src/app/components/add-tag/add-tag.component.ts","webpack:///src/app/components/add-tag/add-tag.component.html","webpack:///src/app/components/share/share.component.ts","webpack:///src/app/components/share/share.component.html","webpack:///src/app/components/profile/proprety/proprety.component.ts","webpack:///src/app/components/profile/proprety/proprety.component.html","webpack:///src/app/services/map/openstreetmap.service.ts","webpack:///src/app/components/registration-process/country-selector/country-selector.component.ts","webpack:///src/app/components/registration-process/country-selector/country-selector.component.html","webpack:///src/app/components/myaccount/myaccount.component.ts","webpack:///src/app/components/myaccount/myaccount.component.html","webpack:///src/app/models/geocodeResp.model.ts","webpack:///src/app/components/chatsystem/friendlist/friendlist.component.ts","webpack:///src/app/components/chatsystem/friendlist/friendlist.component.html","webpack:///src/environments/environment.ts","webpack:///src/app/components/venue/venue.component.ts","webpack:///src/app/components/venue/venue.component.html","webpack:///src/app/components/display-posts/display-posts.component.ts","webpack:///src/app/components/display-posts/display-posts.component.html","webpack:///src/app/components/profile/profile.component.ts","webpack:///src/app/components/profile/profile.component.html","webpack:///src/app/components/map/map.component.ts","webpack:///src/app/components/map/map.component.html","webpack:///src/app/pipes/array-to-pipe.pipe.ts","webpack:///src/app/models/coordinates.ts","webpack:///src/app/components/tabs/mytrip/add-venue-popover/add-venue-popover.component.ts","webpack:///src/app/components/tabs/mytrip/add-venue-popover/add-venue-popover.component.html","webpack:///src/app/services/map/map.service.ts","webpack:///src/app/services/session.service.ts","webpack:///src/app/components/tabs/searchresults/add-to-trip-popover/add-to-trip-popover.component.ts","webpack:///src/app/components/tabs/searchresults/add-to-trip-popover/add-to-trip-popover.component.html","webpack:///src/app/components/tabs/searchresults/userbutton/userbutton.component.ts","webpack:///src/app/components/tabs/searchresults/userbutton/userbutton.component.html","webpack:///src/environments/environment.dev.ts","webpack:///src/app/services/http.service.ts","webpack:///src/app/components/loginpage/loginpage.component.ts","webpack:///src/app/components/loginpage/loginpage.component.html","webpack:///src/app/components/edit-comment/edit-comment.component.ts","webpack:///src/app/components/edit-comment/edit-comment.component.html","webpack:///src/app/components/registration-process/registration-process.component.ts","webpack:///src/app/components/registration-process/registration-process.component.html","webpack:///src/app/components/userprofile/userprofile.component.ts","webpack:///src/app/components/userprofile/userprofile.component.html","webpack:///src/app/components/tabs/searchresults/VenueButton/VenueButton.component.ts","webpack:///src/app/components/tabs/searchresults/VenueButton/venueButton.component.html","webpack:///src/app/services/map/foursquare.service.ts","webpack:///src/app/services/chatsystem/socket.service.ts","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/app/pipes/null.pipe.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/services/comments.service.ts","webpack:///src/app/components/sidebar/scroll-to-top/scroll-to-top.component.ts","webpack:///src/app/components/sidebar/scroll-to-top/scroll-to-top.component.html","webpack:///src/app/models/trip.model.ts","webpack:///src/app/services/trip.service.ts","webpack:///src/app/app.module.ts","webpack:///src/app/components/tabs/searchresults/searchresults.component.ts","webpack:///src/app/components/tabs/searchresults/searchresults.component.html","webpack:///src/app/components/logout/logout.component.ts","webpack:///src/app/components/logout/logout.component.html","webpack:///src/app/models/Room_Widget.model.ts","webpack:///src/app/components/tabs/mytrip/tripmodal/tripmodal.component.ts","webpack:///src/app/components/tabs/mytrip/tripmodal/tripmodal.component.html","webpack:///src/app/components/add-post/mime-type.validator.ts","webpack:///src/environments/environment.prod.ts","webpack:///src/app/components/comment/comment.component.ts","webpack:///src/app/components/comment/comment.component.html","webpack:///src/app/pipes/list-object.pipe.ts","webpack:///src/app/components/comment-section/comment-section.component.ts","webpack:///src/app/components/comment-section/comment-section.component.html","webpack:///src/app/components/registration-process/registrationpage/registrationpage.component.ts","webpack:///src/app/components/registration-process/registrationpage/registrationpage.component.html","webpack:///src/app/services/search.service.ts","webpack:///src/app/components/search-bar/search-bar.component.ts","webpack:///src/app/components/search-bar/search-bar.component.html","webpack:///src/app/components/chatsystem/chatwidget/chatwidget.component.ts","webpack:///src/app/components/chatsystem/chatwidget/chatwidget.component.html","webpack:///src/app/components/tabs/home/home.component.ts","webpack:///src/app/components/tabs/home/home.component.html","webpack:///src/app/components/add-post/add-post.component.ts","webpack:///src/app/components/add-post/add-post.component.html","webpack:///src/app/components/city-search/city-search.component.ts","webpack:///src/app/components/city-search/city-search.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/services/add-post.service.ts","webpack:///src/app/components/sidebar/sidebar.component.ts","webpack:///src/app/components/sidebar/sidebar.component.html","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["FriendlistService","SocketService","roomarr","widgetarr","idarr","_chatroomList","chatroomList","asObservable","_openWidgets","openWidgets","_windowSize","window","innerWidth","windowSize","_roomModel","roomModel","array","push","sessionStorage","getItem","polishedarr","filter","a","b","indexOf","sort","emit","sender","req","data","next","err","console","log","res","forEach","element","unread","messages","length","lastIndex","seen","includes","roomName","roomId","_id","room","users","split","friend","i","splice","open","roomNames","roomIds","listen","subscribe","findIndex","e","action","id","username","width","CHATWIDGETWIDTH","FRIENDLISTWIDTH","MAXNUM","Math","floor","x","removedRoomId","shift","remove","providedIn","FilterComponent","SearchService","TripService","ActivatedRoute","panelOpenState","categoriesTree","categoriesSet","allComplete","count","treeControl","node","categories","_selectedNodes","selectedNodes","hasChild","_","categoriesSet_sub","categorySet","set","categoriesTree_sub","categoryTree","tree","queryParams","params","category","child","name","uncheckAll","checkAll","checked","modifyIdSet","updateCategoryTree","allChecked","initiateChildrenChecker","treeValues","has","add","sub","updateCategorySet","state","allChildrenChecked","atLeastOneChecked","unsubscribe","selector","templateUrl","styleUrls","TripAccordion","MytripComponent","MatDialog","SessionService","MapService","HttpService","isLoading","isErr","isSuccess","sharedTrip","sharingUrl","tableDataSource","displayedColumns","trips","date","d","Date","weekday","Array","getDay","obj","total","venues","price","schedule","getDayPrice","getDayVenues","tripIndex","shared","dist","lastCoord","venue","venueCoord","lng","lat","distanceTo","toFixed","dayIndex","source","tripId","get","then","trip","_tripSub","table","renderRows","sessionState_sub","sessionState","travelnetURL","modifyBackend","dialogRef","start","end","afterClosed","result","updateLocal","scheduleIndex","venueIndex","venueName","venuePrice","venueCity","venueAddress","event","previousIndex","currentIndex","setTimeout","confirm","index","map","getSource","removeLayer","removeSource","coord","day","showMarker","content","geometry","coordinates","addSource","type","properties","addLayer","layout","paint","moveLayer","venueOnDestroy","addMarker","removeMarker","ChatsystemComponent","user","session","openChatWidgets_sub","openChatWidgets","getNotifications","selectChatwidget","mimeType","control","value","file","fileReader","FileReader","frObs","create","observer","addEventListener","arr","Uint8Array","subarray","header","isValid","toString","invalidMimeType","complete","readAsArrayBuffer","FriendComponent","friendlistService","sessionService","sessionRoomName","getRoomName","toggleChatWidget","resizeWindow","HeaderComponent","link","SearchPostsComponent","router","form","input","validators","invalid","navigate","onSearchPost","AddTagComponent","http","tag","onAddTag","put","response","onSubmit","ShareComponent","shareForm","copied","urlLinkControl","patchValue","UrlLink","onCopyClick","PropretyComponent","httpService","proprety","changeForm","newPropretyValue","propretyValue","required","email","oldPassword","minLength","slice","changing","requestedChange","newProprety","valid","patch","location","reload","OpenstreetmapService","bbox","openstreetmap","searchNodes","headers","city","nominatim","search","format","reverse","zoom","lon","CountrySelectorComponent","Http","citySearchAppearance","citySearchPlaceholder","allPlaces","code","continent","places","removable","clickLocation_sub","clickLocation","progressUpdate","target","mapbox","geocoding","concat","access_token","token","types","language","features","placeName","place_name","chip","citySearchComponent","removeMiddle","getKey","short_code","toUpperCase","query","optionClick_sub","clickedOption","countryName","substring","Promise","resolve","reject","Object","keys","find","key","place","placesArr","localStorage","MyaccountComponent","picture","files","updateValueAndValidity","reader","onload","imagePreview","readAsDataURL","imageData","FormData","append","post","onImagePicked","geocodeResponseModel","montrealCoord","FriendlistComponent","friends","sessionSub","isLoggedIn","friendsSub","getList","CreateChatroom","environment","production","foursquare","clientId","clientSecret","v","venuesSearch","venuesExplore","venueDetails","userAuth","getCategories","searchRealNode","travelnet","getUserInfo","getProfile","searchUsers","travelnetCommentURL","travelnetPostURL","VenueComponent","ogUrl","url","rating","ratingColor","displayContent","windowHeight","innerHeight","trip_sub","openTabSub","searchTab","openTab","replace","formatDetails","option","formattedAddress","join","canonicalUrl","icon","prefix","suffix","val","currentSearch","DisplayPostsComponent","postsService","route","posts","likeShow","searchPosts","postsSub","getPostUpdateListener","getRelevantPosts","author","follows","following","tags","postId","deletePost","likePost","timeoutHandler","clearInterval","setInterval","showLikes","comment","ProfileComponent","socketService","Router","image","asyncValidators","User","password","firstname","lastname","birthdate","gender","propreties","values","removeItem","formData","reset","ngOnDestroy","MapComponent","buildMap","ArrayToPipePipe","fill","CustomCoordinates","order","AddVenuePopoverComponent","allTrips","defaultCategory","venueCategories","isLoaded","foursquareCategory_sub","cats","trips_sub","mapCenter_sub","fakeCenter","searchUrlCoord","searchVenueForm","maxLength","customVenueForm","address","selectedOption_sub","CitySearchComponent","selectedOption","myControl","SearchBarComponent","searchBarForm","close","onSubmitCustom","featureGEOJSONModel","title","citySearchPresent","_fakeCenter","_fakeCenterCity","fakeCenterCity","_clickLocation","Places","sidebarWidth_sub","sidebarWidth","w","container","style","center","failIfMajorPerformanceCaveat","pitchWithRotate","dragRotate","on","getCenter","getFakeCenter","lngLat","venueLocation","setLngLat","addTo","lngOffset","flyTo","speed","curve","essential","sidebar","centerPoints","unproject","realCenter","reverseSearch","setData","getLayer","all","_sessionState","_sidebarWidth","AddToTripPopoverComponent","onSubmitEvent","MatSelectionList","selectedOptions","selected","UserbuttonComponent","searchservice","selfUsername","searchResult","pathID","followed","followers","unfollowed","serverURL","serverRoute","authorization","loginComponent","modalService","modal","openModal","LoginComponent","login_err","hide","loginForm","credentials","setItem","dismissAll","loginClicked","providers","EditCommentComponent","CommentsService","displayEdits","commentData","reply","setValue","edited","edit","toLocaleString","editComment","closeDialog","RegistrationProcessComponent","_formBuilder","editable","_progressUpdate","isSaving","isDone","firstFormGroup","group","firstCtrl","secondFormGroup","secondCtrl","step1","stepControl","registration","registrationForm","stepper","selectedIndex","stepper_sub","selectionChange","steps","selector1","onSumbit","selector2","responses","alert","savePreferences","UserprofileComponent","searchUser","substr","userSearch","VenueButtonComponent","triparr","FoursquareService","latLng","near","client_id","client_secret","getCurrentDate","ll","dt","month","getMonth","getFullYear","uri","socket","eventName","ack","once","removeListener","disconnect","webpackContext","webpackContextResolve","__webpack_require__","o","Error","webpackContextKeys","module","exports","NullPipe","parent","returnNull","transform","AppComponent","clear","openChatWidgetsSub","sessionStateSub","PostService","postsUpdated","newComment","responseData","likes","replies","postIndex","p","comments","updatePosts","pipe","transformedComments","commentId","replyContent","commentIndex","c","editContent","replyIndex","r","replyId","updatePost","likeContent","deleteContent","newPosts","ScrollToTopComponent","duration","interval","move","el","scrollTop","acc","curr","position","scrollToTop","tripModel","isPrivate","final","tripName","dateRange","diff","toDate","searchedVenue","_trips","AppModule","declarations","imports","bootstrap","SearchresultsComponent","loading","filter_sub","filterNumber","number","returnTab_sub","tab","_categoriesSet_sub","LogoutComponent","sessionSate_sub","RoomWidget","TripmodalComponent","minDate","nameErr","modalForm","checkName","bind","message","onCancel","CommentComponent","commentsService","dialog","replyField","showReplies","newReply","likeComment","deleteComment","commentInfo","likeTreeComment","replyBoolean","ListObjectPipe","CommentSectionComponent","addComment","onAddComment","RegistrationComponent","hide1","currentTime","toISOString","checkPasswordValidity","passwords","confirmPassword","checkPasswordsMatch","birthDate","forbiddenUsernames","checkbox","errors","dirty","forbiddenUsername","maxlength","minlength","pass","birth","now","difference","isOld","HttpClient","foursquareService","_searchTab","_filterNumber","_categoryTree","_categorySet","categoriesCollection","Set","updateCategories","searchVenues","toStringReorder","getDetails","foursquareSearchVenues","searchType","resetSearchContent","totalResults","groups","items","initiateTree","newData","submission","isChild","filterOptions","defaultFilter","fakeCenter_sub","clickedOption_sub","_clickedOptionLocal","country","enterSearch","mainSearch","changeFilter","parseInt","ChatwidgetComponent","renderer","typeArea","roomSub","ul","createElement","innerHTML","appendChild","div","nativeElement","preventDefault","sendMessage","getRoomWidget","HomeComponent","AddPostComponent","enteredTitle","enteredContent","mode","visible","selectable","addOnBlur","separatorKeysCodes","checkedOnce","paramMap","getPost","postData","imagePath","onAddLocation","newPost","addPost","trim","locationAdded","_autoSuggested","autoSuggested","_clickedOption","display_name","searched","valueChanges","clearTimeout","timeout","openstreetmap_sub","citySearch","searchResults","getFakeCenterCity","fakeCenterCity_sub","placeholder","string","keep","nothing","clearOnSearch","routes","path","component","children","redirectTo","pathMatch","AppRoutingModule","forRoot","AddPostService","formattedComment","formattedReply","transformedPosts","UserPref","Title","updatedPosts","oldPostIndex","updatedPostIndex","SidebarComponent","Styles","top","left","height","overflow","padding","showFiller","tabs","windowSub","windowWidth","drawer","_width","MIN_DIMENSIONS_PX","maxWidth","rectangle","updateSidebarWidth","onResizeEnd","bootstrapModule","error","webpackEmptyAsyncContext"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { RoomWidget } from '../../models/Room_Widget.model'\r\nimport { SocketService } from './socket.service'\r\nimport { Injectable, OnDestroy } from '@angular/core'\r\nimport { BehaviorSubject, Observable } from 'rxjs'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class FriendlistService {\r\n\r\n  // lists of variables (eg: chatrooms, open chatWidgets)\r\n  private roomarr: RoomWidget[] = [] // all chatrooms of user\r\n  private widgetarr: any = [] // open chatWidgets roomName(s)\r\n  private idarr: any = [] // open chatWidget roomId(s)\r\n\r\n\r\n  // creating observable\r\n  private _chatroomList: BehaviorSubject<RoomWidget[]> = new BehaviorSubject(this.roomarr)\r\n  public chatroomList: Observable<RoomWidget[]> = this._chatroomList.asObservable()\r\n\r\n  private _openWidgets: BehaviorSubject<object> = new BehaviorSubject([])\r\n  public openWidgets: Observable<object> = this._openWidgets.asObservable()\r\n\r\n  private _windowSize: BehaviorSubject<number> = new BehaviorSubject(window.innerWidth)\r\n  public windowSize: Observable<number> = this._windowSize.asObservable()\r\n\r\n  private _roomModel: BehaviorSubject<RoomWidget> = new BehaviorSubject(new RoomWidget('asd', 'asd', false))\r\n  public roomModel: Observable<RoomWidget> = this._roomModel.asObservable()\r\n\r\n  constructor(private SocketService: SocketService) {\r\n\r\n  }\r\n\r\n  // gets list of chatrooms with corresponding properties than user's query\r\n  getList(array: string[]): any{\r\n    array.push(sessionStorage.getItem('username'))\r\n    const polishedarr = (array.filter((a, b) => array.indexOf(a) === (b))).sort()\r\n    // sends array of users in alphabeltical order\r\n    this.SocketService.emit('searchChatroom', {sender: sessionStorage.getItem('username'), req: polishedarr}, (data) => {\r\n      this.roomarr = []\r\n      this._chatroomList.next(this.roomarr)\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      }\r\n      else if (data.res) {\r\n        (data.res).forEach(element => {\r\n\r\n          let unread: boolean\r\n          if (element.messages.length) { // check if chat is empty and if last message is unread\r\n            const lastIndex = element.messages.length - 1\r\n            if (element.messages[lastIndex].seen.includes(sessionStorage.getItem('username'))) {\r\n              unread = false\r\n            } else {\r\n              unread = true\r\n            }\r\n          } else {\r\n            unread = false\r\n          }\r\n\r\n          this.roomarr.push({\r\n            roomName: element.roomName,\r\n            roomId: element._id,\r\n            unread\r\n          })\r\n        })\r\n        this._chatroomList.next(this.roomarr)\r\n      }\r\n    })\r\n  }\r\n\r\n  // looks for room model given a roomid\r\n  getRoomWidget(roomId: string) {\r\n    this.roomarr.forEach((room) => {\r\n      if (room.roomId == roomId) {\r\n        this._roomModel.next(room)\r\n      }\r\n    })\r\n  }\r\n\r\n  // looks for users existence and creates chatroom\r\n  CreateChatroom(users: string): any {\r\n    const array: string[] = users.split(' ')\r\n    let polishedarr = (array.filter((a, b) => array.indexOf(a) === (b))).sort()\r\n    this.SocketService.emit('searchUser', polishedarr, (data) => {\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      } else if (data.res) {\r\n        polishedarr.push(sessionStorage.getItem('username'))\r\n        this.SocketService.emit('createChatroom', polishedarr.sort())\r\n      }\r\n      polishedarr = []\r\n    })\r\n  }\r\n\r\n  // selecting a Chatroom from Friendlist component\r\n  toggleChatWidget(friend: RoomWidget) {\r\n    if (this.idarr.includes(friend.roomId)) {\r\n      const i = this.idarr.indexOf(friend.roomId)\r\n      this.widgetarr.splice(i, 1)\r\n      this.idarr.splice(i, 1)\r\n      friend.open = false\r\n    } else {\r\n      this.widgetarr.push(friend.roomName)\r\n      this.idarr.push(friend.roomId)\r\n      friend.open = true\r\n    }\r\n    this._openWidgets.next({\r\n      roomNames: this.widgetarr,\r\n      roomIds: this.idarr\r\n    })\r\n  }\r\n\r\n  // listen for unread messages from backend\r\n  getNotifications() {\r\n    this.SocketService.listen('notification').subscribe((data: any) => {\r\n      if (data.res) {\r\n        const i = this.roomarr.findIndex((e) => e.roomId === data.res.roomId)\r\n        if (data.res.action == 'message') {\r\n          if (i != -1) {\r\n            console.log('i defined ' + i)\r\n            if (data.res.sender == sessionStorage.getItem('username')) {\r\n              this.roomarr[i].unread = false\r\n            } else {\r\n              this.roomarr[i].unread = true\r\n            }\r\n            this._chatroomList.next(this.roomarr)\r\n          } else {\r\n            console.log('i undefined')\r\n          }\r\n        } else if (data.res.action == 'seen') {\r\n          data.res.seen.forEach(element => {\r\n            if (element.includes(sessionStorage.getItem('username'))) {\r\n              this.roomarr[i].unread = false\r\n              this._chatroomList.next(this.roomarr)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  // user interacted with chatwidget\r\n  // mark as read in angular\r\n  selectChatwidget(roomId: string) {\r\n    this.SocketService.emit('initChatroom', {id: roomId, username: sessionStorage.getItem('username') }, (data) => {\r\n      if (data) {\r\n        const i = this.roomarr.findIndex((e) => e.roomId === roomId)\r\n        this.roomarr[i].unread = false\r\n        this._chatroomList.next(this.roomarr)\r\n      }\r\n    })\r\n  }\r\n\r\n  resizeWindow(width: number) {\r\n    const CHATWIDGETWIDTH = 220\r\n    const FRIENDLISTWIDTH: number = 220 + (width * .2) // take in account sidebar of 20%\r\n    const MAXNUM: number = Math.floor((width - FRIENDLISTWIDTH) / CHATWIDGETWIDTH) // take into account friendlist component\r\n    if (this.widgetarr.length > MAXNUM) {\r\n      for (let x = this.widgetarr.length; x > MAXNUM; x--) {\r\n        const removedRoomId = this.idarr[0]\r\n        this.roomarr.forEach((room) => {\r\n          if (room.roomId == removedRoomId) {\r\n            room.open = false\r\n          }\r\n        })\r\n        this.widgetarr.shift()\r\n        this.idarr.shift()\r\n      }\r\n    }\r\n    this._windowSize.next(width)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.SocketService.remove('notification')\r\n  }\r\n}\r\n","import { SearchParams } from './../../models/searchParams'\r\nimport { ActivatedRoute } from '@angular/router'\r\nimport { TripService } from './../../services/trip.service'\r\nimport { BehaviorSubject, Observable } from 'rxjs'\r\nimport { Component, OnInit, OnDestroy, AfterViewInit } from '@angular/core'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { NestedTreeControl } from '@angular/cdk/tree'\r\nimport { CategoryNode} from 'src/app/models/CategoryNode.model'\r\nimport { Subscription } from 'rxjs'\r\n\r\n@Component({\r\n  selector: 'app-filter',\r\n  templateUrl: './filter.component.html',\r\n  styleUrls: ['./filter.component.scss']\r\n})\r\nexport class FilterComponent implements OnInit, OnDestroy {\r\n  completed: boolean\r\n  name: string\r\n  panelOpenState = false\r\n\r\n  categoriesTree: CategoryNode[] = null\r\n  categoriesSet: any = null\r\n  private categoriesTree_sub: Subscription\r\n  private categoriesSet_sub: Subscription\r\n\r\n  allComplete: Array<boolean> = null\r\n  count = 0\r\n\r\n  treeControl = new NestedTreeControl<CategoryNode>(node => node.categories)\r\n\r\n  private _selectedNodes: BehaviorSubject<string> = new BehaviorSubject(null)\r\n  selectedNodes: Observable<string> = this._selectedNodes.asObservable()\r\n\r\n  constructor(\r\n    private SearchService: SearchService,\r\n    private TripService: TripService,\r\n    private ActivatedRoute: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.categoriesSet_sub = this.SearchService.categorySet.subscribe((set: Set<any>) => this.categoriesSet = set)\r\n\r\n    this.categoriesTree_sub = this.SearchService.categoryTree.subscribe((tree: CategoryNode[]) => {\r\n      if (tree) {\r\n        this.categoriesTree = tree\r\n\r\n        // sets category filter from url params\r\n        this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n          if (params.category) {\r\n            if (params.category === 'All') {\r\n              null\r\n            } else {\r\n              this.categoriesTree.forEach((child: CategoryNode) => {\r\n                if (child.name != params.category) {\r\n                  this.uncheckAll(child.categories)\r\n                } else {\r\n                  this.checkAll(child.categories)\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /** Checks if datasource for material tree has any child groups */\r\n  hasChild = (_: number, node: CategoryNode) => !!node.categories && node.categories.length > 0\r\n\r\n  /**toggle checkmark for leafs */\r\n  clickedActive(element: CategoryNode) {\r\n    element.checked = !element.checked\r\n    this.modifyIdSet(element)\r\n    this.SearchService.updateCategoryTree(this.categoriesTree)\r\n  }\r\n\r\n  /**toggle checkmark for nodes && node itself */\r\n  setAll(category: CategoryNode) {\r\n    const allChecked = this.initiateChildrenChecker(category.categories)\r\n    if (!allChecked) {\r\n      this.SearchService.treeValues.categorySet.has(category.id) ? null : this.SearchService.treeValues.categorySet.add(category.id)\r\n      this.checkAll(category.categories)\r\n    }\r\n    else if (allChecked) {\r\n      this.SearchService.treeValues.categorySet.has(category.id) ? this.SearchService.treeValues.categorySet.delete(category.id) : null\r\n      this.uncheckAll(category.categories)\r\n    }\r\n    this.SearchService.updateCategoryTree(this.categoriesTree)\r\n  }\r\n\r\n  /** checks all children of a node && node itself */\r\n  checkAll(categories: CategoryNode[]) {\r\n    categories.forEach((sub: CategoryNode) => {\r\n      sub.checked = true\r\n      this.SearchService.treeValues.categorySet.has(sub.id) ? null : this.SearchService.treeValues.categorySet.add(sub.id)\r\n\r\n      this.SearchService.updateCategorySet(this.categoriesSet)\r\n      // this.modifyIdSet(sub)\r\n\r\n      if (sub.categories && sub.categories.length > 0) {\r\n        this.checkAll(sub.categories)\r\n      }\r\n    })\r\n  }\r\n\r\n  /** unchecks all children of a node */\r\n  uncheckAll(categories: CategoryNode[]) {\r\n    categories.forEach((sub: CategoryNode) => {\r\n      sub.checked = false\r\n      this.SearchService.treeValues.categorySet.has(sub.id) ? this.SearchService.treeValues.categorySet.delete(sub.id) : null\r\n\r\n      // this.modifyIdSet(sub)\r\n      if (sub.categories && sub.categories.length > 0){\r\n        this.uncheckAll(sub.categories)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**initiates allChildrenChecked() */\r\n  initiateChildrenChecker(categories: CategoryNode[]): boolean{\r\n    let state = true\r\n    state = this.allChildrenChecked(categories, state)\r\n    return state\r\n  }\r\n\r\n  /** returns false if at least one child is unchecked*/\r\n  allChildrenChecked(categories: CategoryNode[], state: boolean): boolean {\r\n    categories.forEach((child: CategoryNode) => {\r\n      if (!state) {\r\n        return state\r\n      }\r\n      else if (state && child.categories && child.categories.length > 0) {\r\n        state = this.allChildrenChecked(child.categories, state)\r\n      }\r\n      else if (!child.checked) {\r\n        state = false\r\n        return state\r\n      }\r\n    })\r\n    return state\r\n  }\r\n\r\n  /**initiates atLeastOneChecked() */\r\n  initiateAtLeastOneChecked(categories: CategoryNode[]): boolean {\r\n    let state = false\r\n    state = this.atLeastOneChecked(categories, state)\r\n    return state\r\n  }\r\n\r\n  /** returns true if at least one child is checked*/\r\n  atLeastOneChecked(categories: CategoryNode[], state: boolean): boolean {\r\n    categories.forEach((child: CategoryNode) => {\r\n      if (state) {\r\n        return state\r\n      }\r\n      else if (!state && child.categories && child.categories.length > 0) {\r\n        state = this.atLeastOneChecked(child.categories, state)\r\n      }\r\n      else if (child.checked) {\r\n        state = true\r\n        return state\r\n      }\r\n    })\r\n    return state\r\n  }\r\n\r\n  /**accepts leaf node, and either removes it or adds it to the array */\r\n  modifyIdSet(node: CategoryNode) {\r\n    if (node.checked && !(this.categoriesSet).has(node.id) && node.categories.length === 0) {\r\n      this.categoriesSet.add(node.id)\r\n    } else if (!node.checked && this.categoriesSet.has(node.id) && node.categories.length === 0) {\r\n      this.categoriesSet.delete(node.id)\r\n    }\r\n    this.SearchService.updateCategorySet(this.categoriesSet)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.categoriesTree_sub.unsubscribe()\r\n    this.categoriesSet_sub.unsubscribe()\r\n  }\r\n}\r\n","<mat-tree [dataSource]=\"categoriesTree\" [treeControl]=\"treeControl\"  class=\"example-tree\" style=\"padding-left: 1em;\">\r\n  <!-- This is the tree node template for leaf nodes -->\r\n  <mat-tree-node *matTreeNodeDef=\"let node\" matTreeNodeToggle>\r\n    <li class=\"mat-tree-node\">\r\n      <!-- use a disabled button to provide padding for tree leaf -->\r\n      <button mat-icon-button disabled></button>\r\n      <mat-checkbox\r\n      [checked]=\"node.checked\"\r\n      (change)=\"clickedActive(node)\">\r\n        {{node.name}}\r\n      </mat-checkbox>\r\n    </li>\r\n  </mat-tree-node>\r\n  <!-- This is the tree node template for expandable nodes -->\r\n  <mat-nested-tree-node *matTreeNodeDef=\"let node; when: hasChild\">\r\n    <li>\r\n      <div class=\"mat-tree-node\">\r\n        <button mat-icon-button matTreeNodeToggle\r\n                [attr.aria-label]=\"'toggle ' + node.name\">\r\n          <mat-icon class=\"mat-icon-rtl-mirror\">\r\n            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_left'}}\r\n          </mat-icon>\r\n        </button>\r\n        <mat-checkbox class=\"example-margin\"\r\n          [checked]=\"initiateChildrenChecker(node.categories)\"\r\n          [indeterminate]=\"!initiateChildrenChecker(node.categories) && initiateAtLeastOneChecked(node.categories)\"\r\n          (change)=\"setAll(node)\">\r\n            {{node.name}}\r\n        </mat-checkbox>\r\n      </div>\r\n      <ul [class.example-tree-invisible]=\"!treeControl.isExpanded(node)\">\r\n        <ng-container matTreeNodeOutlet></ng-container>\r\n      </ul>\r\n    </li>\r\n  </mat-nested-tree-node>\r\n</mat-tree>\r\n","import { environment } from './../../../../environments/environment.dev'\r\nimport { HttpService } from 'src/app/services/http.service'\r\nimport { ActivatedRoute } from '@angular/router'\r\nimport { CustomCoordinates } from 'src/app/models/coordinates'\r\nimport { LngLatLike, LngLat } from 'mapbox-gl'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\nimport { MatSort } from '@angular/material/sort'\r\nimport { AddVenuePopoverComponent } from './add-venue-popover/add-venue-popover.component'\r\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core'\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { tripModel } from '../../../models/trip.model'\r\nimport { Subscription } from 'rxjs'\r\nimport { TripService } from './../../../services/trip.service'\r\nimport { TripmodalComponent } from 'src/app/components/tabs/mytrip/tripmodal/tripmodal.component'\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog'\r\nimport * as moment from 'moment'\r\nimport { MatAccordion } from '@angular/material/expansion'\r\nimport { MatTable, MatTableDataSource, MatTableModule } from '@angular/material/table'\r\nimport {CdkDragDrop, moveItemInArray, transferArrayItem} from '@angular/cdk/drag-drop'\r\nimport * as Mapboxgl from 'mapbox-gl'\r\nimport { last, sample } from 'rxjs/operators'\r\n\r\n@Component({\r\n  selector: 'app-mytrip',\r\n  templateUrl: './mytrip.component.html',\r\n  styleUrls: ['./mytrip.component.scss']\r\n})\r\nexport class MytripComponent implements OnInit, OnDestroy {\r\n  private sessionState_sub: Subscription\r\n  sessionState: boolean\r\n  isLoading = false\r\n  isErr = false\r\n  isSuccess = false\r\n  sharedTrip: tripModel = null\r\n  sharingUrl: URL | string = null\r\n\r\n  // trip accordeon\r\n  @ViewChild(MatAccordion) TripAccordion: MatAccordion\r\n  // onTripAccClose() {\r\n  //   this.TripAccordion.closeAll()\r\n  // }\r\n  // onTripAccOpen() {\r\n  //   this.TripAccordion.openAll()\r\n  // }\r\n\r\n  // dataSource for mat table\r\n  @ViewChild(MatTable) table: MatTable<any>\r\n  @ViewChild(MatSort) sort: MatSort\r\n  tableDataSource: MatTableDataSource<tripModel> = new MatTableDataSource([])\r\n\r\n  // data for add trip\r\n  name: string\r\n  start: any\r\n  end: any\r\n\r\n  // data for add venue\r\n  venueName: string\r\n  venuePrice: number\r\n  venueCity: string\r\n  venueAddress: string\r\n\r\n  displayedColumns = ['category', 'venueName', 'venueCity', 'venueAddress', 'price', 'url', 'index']\r\n\r\n  dialogRef: MatDialogRef<any>\r\n\r\n  // all trips of user\r\n  private _tripSub: Subscription\r\n  trips: tripModel[] = []\r\n\r\n  // display day of date\r\n  displayDay(date: Date): string {\r\n    const d = new Date(date)\r\n    const weekday: string[] = new Array(7)\r\n    weekday[0] = 'Sun'\r\n    weekday[1] = 'Mon'\r\n    weekday[2] = 'Tue'\r\n    weekday[3] = 'Wed'\r\n    weekday[4] = 'Thu'\r\n    weekday[5] = 'Fri'\r\n    weekday[6] = 'Sat'\r\n    const i = d.getDay()\r\n    return weekday[i]\r\n  }\r\n\r\n  // get price for a day w/ schedule obj\r\n  getDayPrice(obj: {[key: string]: any}): number {\r\n    let total = 0\r\n    if (obj) {\r\n      const venues: any[] = obj.venues ? obj.venues : []\r\n      for (let x = 0; x < venues.length; x++) {\r\n        venues[x].price ? total += venues[x].price : total += 0\r\n      }\r\n    }\r\n    return total\r\n  }\r\n\r\n  // use trip object to get price for all days\r\n  getTotalPrice(obj: tripModel): number {\r\n    let total = 0\r\n    if (obj.schedule) {\r\n      obj.schedule.forEach((element) => {\r\n        total += this.getDayPrice(element)\r\n      })\r\n    }\r\n    return total\r\n  }\r\n\r\n  // get venues for a day w/ schedule obj\r\n  getDayVenues(obj: {[key: string]: any}): number {\r\n    if (obj) {\r\n      const venues: any[] = obj.venues ? obj.venues : []\r\n      return venues.length\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  // use trip object to get venues for all days\r\n  getTotalVenues(obj: tripModel): number {\r\n    let total = 0\r\n    if (obj.schedule) {\r\n      obj.schedule.forEach((element) => {\r\n        total += this.getDayVenues(element)\r\n      })\r\n    }\r\n    return total\r\n  }\r\n\r\n  getTripDistance(tripIndex: number|null, shared?: boolean): string {\r\n    let dist = 0\r\n    let lastCoord: LngLat = null\r\n    const obj = shared ? this.sharedTrip : this.trips[tripIndex]\r\n    for (let x = 0; x < obj.schedule.length; x++) {\r\n      obj.schedule[x].venues.forEach((venue) => {\r\n        if (venue.venueCoord) {\r\n          if (lastCoord === null) {\r\n            lastCoord = new LngLat(venue.venueCoord.lng, venue.venueCoord.lat)\r\n          }\r\n          dist += lastCoord.distanceTo(venue.venueCoord)\r\n          lastCoord = new LngLat(venue.venueCoord.lng, venue.venueCoord.lat)\r\n        }\r\n      })\r\n    }\r\n    return (dist / 1000).toFixed(2)\r\n  }\r\n\r\n  getDataSource(tripIndex: number, dayIndex: number, shared?: boolean): MatTableDataSource<any> {\r\n    const source = new MatTableDataSource<any>([])\r\n    const obj = shared ? this.sharedTrip : this.trips[tripIndex]\r\n    if (obj.schedule) {\r\n      source.data = obj.schedule[dayIndex].venues\r\n      source.sort = this.sort\r\n      return source\r\n    } else {\r\n      return source\r\n    }\r\n  }\r\n\r\n  constructor(private MatDialog: MatDialog,\r\n              private TripService: TripService,\r\n              private SessionService: SessionService,\r\n              private MapService: MapService,\r\n              private ActivatedRoute: ActivatedRoute,\r\n              private HttpService: HttpService) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // if from link\r\n    this.ActivatedRoute.queryParams.subscribe((params) => {\r\n      if (params.tripId) {\r\n        console.log(params)\r\n        this.HttpService.get('/trips', {\r\n          tripId: params.tripId\r\n        })\r\n        .then((res: {trip: tripModel}) => {\r\n          this.sharedTrip = res.trip\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n        .finally(() => {\r\n\r\n        })\r\n      }\r\n    })\r\n\r\n    this.isLoading = true\r\n    this._tripSub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.trips = trips\r\n      this.isLoading = false\r\n      if (this.table) {\r\n        this.table.renderRows()\r\n      }\r\n    })\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe((state: boolean) => {\r\n      this.sessionState = state\r\n    })\r\n  }\r\n\r\n  changeSharingLink(id: string) {\r\n    this.sharingUrl = environment.travelnetURL + '/mytrip?' + 'tripId=' + id\r\n  }\r\n\r\n  /** copy shared trip to own trip */\r\n  copyTrip() {\r\n    this.trips.push(this.sharedTrip)\r\n    this.isLoading = true\r\n    this.TripService.modifyBackend(this.trips)\r\n    .then(() => {\r\n      this.isSuccess = true\r\n    })\r\n    .finally(() => {\r\n      this.isLoading = false\r\n    })\r\n  }\r\n\r\n  /** modal for adding a trip */\r\n  openAddTripModal() {\r\n    this.dialogRef = this.MatDialog.open(TripmodalComponent, {\r\n      width: '800px',\r\n      data: {\r\n        name: this.name,\r\n        start: this.start,\r\n        end: this.end\r\n      }\r\n    })\r\n\r\n    this.dialogRef.afterClosed().subscribe((result: tripModel) => {\r\n      if (result) {\r\n        this.trips.push(result)\r\n        this.TripService.updateLocal(this.trips)\r\n      }\r\n    })\r\n  }\r\n\r\n  /** modal for adding venue */\r\n  openAddVenueModal(tripIndex: number, scheduleIndex: number, venueIndex: number|null) {\r\n    this.dialogRef = this.MatDialog.open(AddVenuePopoverComponent, {\r\n      width: '800px',\r\n      data: {\r\n        tripIndex,\r\n        scheduleIndex,\r\n        venueIndex,\r\n        name: this.venueName,\r\n        venuePrice: this.venuePrice,\r\n        venueCity: this.venueCity,\r\n        venueAddress: this.venueAddress\r\n      }\r\n    })\r\n\r\n    this.dialogRef.afterClosed().subscribe((result: any) => {\r\n      // if (result) {\r\n      //   this.trips.push(result)\r\n      //   this.TripService.update(this.trips)\r\n      // }\r\n    })\r\n  }\r\n\r\n  /** when row are reordered */\r\n  onListDrop(event: CdkDragDrop<string[]>, tripIndex: number, dayIndex: number) {\r\n    moveItemInArray(this.trips[tripIndex].schedule[dayIndex].venues, event.previousIndex, event.currentIndex)\r\n    this.isLoading = true\r\n    this.TripService.modifyBackend(this.trips)\r\n    .then((res) => {\r\n      this.table.renderRows()\r\n      this.isSuccess = true\r\n    })\r\n    .catch(() => {\r\n      this.isErr = true\r\n    })\r\n    .finally(() => {\r\n      this.isLoading = false\r\n      setTimeout(() => {\r\n        this.isSuccess = false\r\n        this.isErr = false\r\n      }, 1000)\r\n    })\r\n  }\r\n\r\n  /** delete one venue  */\r\n  onDeleteVenue(tripIndex: number, dayIndex: number, venueIndex: number) {\r\n    if (confirm(`are you sure you want to delete this venue?`)) {\r\n      console.log( this.trips[tripIndex].schedule[dayIndex].venues[venueIndex])\r\n      this.trips[tripIndex].schedule[dayIndex].venues.splice(venueIndex, 1)\r\n      this.TripService.modifyBackend(this.trips)\r\n      .finally(() => {\r\n        if (this.table) {\r\n          this.table.renderRows()\r\n        }\r\n      })\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  /** delete entire trip */\r\n  onDeleteTrip(name: string, index: number) {\r\n    if (confirm(`are you sure you want to delete ${name}?`)) {\r\n      this.trips.splice(index, 1)\r\n      this.TripService.modifyBackend(this.trips)\r\n      .finally(() => {\r\n        if (this.table) {\r\n          this.table.renderRows()\r\n        }\r\n      })\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  /** show itinerary of trip on map */\r\n  showItinerary(tripIndex: number, shared?: boolean) {\r\n    // already showing itinerary\r\n    if (this.MapService.map.getSource('route')) {\r\n      this.MapService.map.removeLayer('route')\r\n      this.MapService.map.removeSource('route')\r\n      this.MapService.map.removeLayer('points')\r\n      this.MapService.map.removeSource('points')\r\n    }\r\n    const obj = shared ? this.sharedTrip : this.trips[tripIndex]\r\n    // push venues in array\r\n    const coord: Array<number[]> = []\r\n    for (const day of obj.schedule) {\r\n      day.venues.forEach((venue) => {\r\n        if (venue.venueCoord) {\r\n          coord.push([venue.venueCoord.lng, venue.venueCoord.lat])\r\n\r\n          // show point\r\n          this.MapService.showMarker(1, {\r\n            name: venue.name as string,\r\n            content: {\r\n              geometry: {\r\n                coordinates: [venue.venueCoord.lng, venue.venueCoord.lat]\r\n              }\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    // display as route\r\n    this.MapService.map.addSource('route', {\r\n      type: 'geojson',\r\n      data: {\r\n        type: 'Feature',\r\n        properties: {},\r\n        geometry: {\r\n          type: 'LineString',\r\n          coordinates: coord\r\n        }\r\n      }\r\n    })\r\n    this.MapService.map.addLayer({\r\n      id: 'route',\r\n      type: 'line',\r\n      source: 'route',\r\n      layout: {\r\n      'line-join': 'round',\r\n      'line-cap': 'round'\r\n      },\r\n      paint: {\r\n      'line-color': '#3bb2d0',\r\n      'line-width': 8\r\n      }\r\n    })\r\n    this.MapService.map.moveLayer('points')\r\n  }\r\n\r\n\r\n  /** display location of venue on map */\r\n  showLocation(tripIndex: number, dayIndex: number, venueIndex: number, shared?: boolean) {\r\n    const obj = shared ? this.sharedTrip : this.trips[tripIndex]\r\n    this.MapService.venueOnDestroy()\r\n    const coord: CustomCoordinates = obj.schedule[dayIndex].venues[venueIndex].venueCoord ? new CustomCoordinates(obj.schedule[dayIndex].venues[venueIndex].venueCoord.lng, obj.schedule[dayIndex].venues[venueIndex].venueCoord.lat) : null\r\n    if (coord) {\r\n      this.MapService.addMarker(coord)\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.MapService.venueOnDestroy()\r\n    this._tripSub.unsubscribe()\r\n    this.sessionState_sub.unsubscribe()\r\n    this.MapService.removeMarker('', null, true)\r\n    if (this.MapService.map.getSource('route')) {\r\n      this.MapService.map.removeLayer('route')\r\n      this.MapService.map.removeSource('route')\r\n      this.MapService.map.removeLayer('points')\r\n      this.MapService.map.removeSource('points')\r\n    }\r\n  }\r\n}\r\n","<div style=\"position: relative;\" *ngIf='sessionState'>\r\n    <div class=\"container\" style=\"background-color: rgba(255, 200, 200, 1); padding: 1em;\">\r\n        <div class=\"row justify-content-center\">\r\n            <button mat-mini-fab class=\"col-auto align-self-center\" matTooltip='create a new trip' (click)='openAddTripModal()'>\r\n                <mat-icon>add</mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <br>\r\n    <div class=\"\" style=\"max-height: 100%\">\r\n\r\n        <div class=\"\" *ngIf='isLoading && !trips'>\r\n            <mat-spinner diameter='20'></mat-spinner>\r\n        </div>\r\n        <mat-accordion class=\"container-fluid\" style=\"min-height: 750px;\"  >\r\n            <!-- for shared links -->\r\n            <mat-expansion-panel #shared *ngIf='sharedTrip' [expanded]='sharedTrip'>\r\n                <mat-expansion-panel-header>\r\n                    <mat-panel-title class=\"align-self-center\">\r\n                        <span>\r\n                            {{sharedTrip.tripName}}\r\n                            <button mat-button matTooltip='shared trip' (click)='shared.toggle()'>\r\n                                <mat-icon class=\"text-success\" >link</mat-icon>\r\n                            </button>\r\n                        </span>\r\n                    </mat-panel-title>\r\n                    <mat-panel-description class=\"align-self-center\" >{{sharedTrip.dateRange.start|date}} &mdash; {{sharedTrip.dateRange.end|date}}&nbsp;<mat-divider [vertical]=\"true\"></mat-divider>&nbsp;{{ sharedTrip.dateRange.length }} days</mat-panel-description>\r\n                    <span (click)=\"shared.toggle()\" style=\"margin-right: 1em;\">  \r\n                        <button mat-button (click)='changeSharingLink(sharedTrip._id)' color='primary' matTooltip='share this trp' [ngbPopover]='popContent' [autoClose]=\"'outside'\" container=\"body\">    \r\n                            <mat-icon>share</mat-icon>\r\n                        </button>\r\n                        <button mat-button (click)='showItinerary(null, true)' color='accent' matTooltip='show itinerary on map' >    \r\n                            <mat-icon>map</mat-icon>\r\n                        </button>\r\n                        <button mat-button (click)='copyTrip()' matTooltip='copy this trip'>\r\n                            <mat-icon class='text-success'>add</mat-icon>\r\n                        </button>\r\n                    </span>\r\n                </mat-expansion-panel-header>\r\n\r\n                <mat-card>\r\n                    <mat-card-content class=\"\">\r\n                        <div class=\"example-action-buttons\">\r\n                            <button mat-button (click)=\"TripAccordion.openAll()\">Expand All</button>\r\n                            <button mat-button (click)=\"TripAccordion.closeAll()\">Collapse All</button>\r\n                        </div>\r\n                        <mat-accordion #acc multi>\r\n                            <mat-expansion-panel *ngFor='let schedule of sharedTrip.schedule; let j = index'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>\r\n                                        day {{ j + 1 }}\r\n                                    </mat-panel-title>\r\n                                    <mat-panel-description>\r\n                                        {{ displayDay(schedule.day) }} | {{ schedule.day | date }} &nbsp; &mdash; &nbsp; Locations: {{getDayVenues(schedule)}} &nbsp; &mdash; &nbsp; Price: {{getDayPrice(schedule)}}$\r\n                                    </mat-panel-description>\r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"container-fluid\">\r\n                                    <mat-table [dataSource]='getDataSource(0, j, true)' style=\"width: 100%;\" matSort>\r\n                                         <!-- category -->\r\n                                         <ng-container matColumnDef=\"category\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <button mat-mini-fab color='primary' style=\"box-shadow: none;\" *ngIf='element.category' matTooltip='{{element.category.name}}'>\r\n                                                    <img src=\"{{element.category.url}}\" alt=\"\" style=\"margin-top: -0.3em;\">\r\n                                                </button>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueName -->\r\n                                        <ng-container matColumnDef=\"venueName\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Venue Name </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">{{element.name}}</mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueCity -->\r\n                                        <ng-container matColumnDef=\"venueCity\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> City </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"> {{element.venueCity}} </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venueAddress -->\r\n                                        <ng-container matColumnDef=\"venueAddress\" style=\"display: inline-block\">\r\n                                            <mat-header-cell *matHeaderCellDef> Address </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"><p style=\"display: inline-block; width: 100%;\">{{element.venueAddress}} </p> </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venuePrice -->\r\n                                        <ng-container matColumnDef=\"price\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Price </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\" >\r\n                                                <span class=\"text-center\" style=\"width: 100%;\" *ngIf='element.price == 0'>{{element.price}}$</span> \r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- website -->\r\n                                        <ng-container matColumnDef=\"url\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Website </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <a href=\"{{element.url}}\" target=\"_blank\" *ngIf='element.url' matTooltip='{{element.url}}'>\r\n                                                    <button mat-button>\r\n                                                        <mat-icon>open_in_new</mat-icon>\r\n                                                    </button>\r\n                                                </a>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- edit & drag -->\r\n                                        <ng-container matColumnDef=\"index\" stickyEnd>\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let index = index\">\r\n                                                <p class=\"text-right\" style=\"width: 100%;\">\r\n                                                    <button mat-button matTooltip='show location on map' (click)='showLocation(null, j, index, true)'>\r\n                                                        <mat-icon>map</mat-icon>\r\n                                                    </button>\r\n                                                </p>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <mat-header-row *matHeaderRowDef=\"displayedColumns\"></mat-header-row>\r\n                                        <mat-row *matRowDef=\"let row; columns: displayedColumns;\" cdkDrag></mat-row>\r\n                                    </mat-table>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                            <br>\r\n                            <!-- trip stats -->\r\n                            <mat-expansion-panel expanded='true'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>Trip Overview</mat-panel-title>\r\n                                    <mat-panel-description>All your stats are here</mat-panel-description>   \r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"row container-fluid\">\r\n                                    <mat-chip-list>\r\n                                        <mat-chip color=\"primary\" selected>Distance Traveled: {{getTripDistance(null, true)}} km</mat-chip>\r\n                                        <mat-chip color=\"warn\" selected>Places Visited: {{getTotalVenues(sharedTrip)}}</mat-chip>\r\n                                        <mat-chip color=\"accent\" selected>Price: {{getTotalPrice(sharedTrip)}}$</mat-chip>\r\n                                    </mat-chip-list>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                        </mat-accordion>\r\n                    </mat-card-content>\r\n                </mat-card>\r\n            </mat-expansion-panel>\r\n            \r\n            <br>\r\n            <!-- no trips -->\r\n            <div *ngIf='!trips && !isLoading' class=\"container-fluid row rounded align--items-center\" style=\"background-color: rgba(255, 255, 255, 1); min-height: 100px;\">\r\n                &nbsp;<h2 class=\"align-self-center\">No trips Yet...</h2>\r\n            </div>\r\n\r\n            <!-- for own trips -->\r\n            <mat-expansion-panel #pan *ngFor='let trip of trips, let i = index, let isFirst = first' [expanded]='isFirst && !sharedTrip'>\r\n                <mat-expansion-panel-header class=\"my-headers-align\">\r\n                    <mat-panel-title class=\"align-self-center\">{{trip.tripName}}</mat-panel-title>\r\n                    <mat-panel-description class=\"align-self-center\" >{{trip.dateRange.start|date}} &mdash; {{trip.dateRange.end|date}}&nbsp;<mat-divider [vertical]=\"true\"></mat-divider>&nbsp;{{ trip.dateRange.length }} days</mat-panel-description>\r\n                    <span (click)=\"pan.toggle()\" style=\"margin-right: 1em;\">  \r\n                        <button mat-button (click)='changeSharingLink(trip._id)' color='primary' matTooltip='share this trp' [ngbPopover]='popContent' [autoClose]=\"'outside'\" container=\"body\">    \r\n                            <mat-icon>share</mat-icon>\r\n                        </button>\r\n                        <button mat-button (click)='showItinerary(i)' color='accent' matTooltip='show itinerary on map' >    \r\n                            <mat-icon>map</mat-icon>\r\n                        </button>\r\n                    </span>\r\n                </mat-expansion-panel-header>\r\n                <mat-card>\r\n                    <mat-card-content class=\"\">\r\n                        <div class=\"example-action-buttons\">\r\n                            <button mat-button (click)=\"TripAccordion.openAll()\">Expand All</button>\r\n                            <button mat-button (click)=\"TripAccordion.closeAll()\">Collapse All</button>\r\n                        </div>\r\n                        <mat-accordion #acc multi>\r\n                            <mat-expansion-panel *ngFor='let schedule of trip.schedule; let j = index'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>\r\n                                        day {{ j + 1 }}\r\n                                    </mat-panel-title>\r\n                                    <mat-panel-description>\r\n                                        {{ displayDay(schedule.day) }} | {{ schedule.day | date }} &nbsp; &mdash; &nbsp; Locations: {{getDayVenues(schedule)}} &nbsp; &mdash; &nbsp; Price: {{getDayPrice(schedule)}}$\r\n                                    </mat-panel-description>\r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"container-fluid\">\r\n                                    <mat-table [dataSource]='getDataSource(i, j)' style=\"width: 100%;\" matSort cdkDropList [cdkDropListData]='getDataSource(i, j)' (cdkDropListDropped)=\"onListDrop($event, i, j)\">\r\n                                         <!-- category -->\r\n                                         <ng-container matColumnDef=\"category\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <button mat-mini-fab color='primary' style=\"box-shadow: none;\" *ngIf='element.category' matTooltip='{{element.category.name}}'>\r\n                                                    <img src=\"{{element.category.url}}\" alt=\"\" style=\"margin-top: -0.3em;\">\r\n                                                </button>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueName -->\r\n                                        <ng-container matColumnDef=\"venueName\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Venue Name </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">{{element.name}}</mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- venueCity -->\r\n                                        <ng-container matColumnDef=\"venueCity\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> City </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"> {{element.venueCity}} </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venueAddress -->\r\n                                        <ng-container matColumnDef=\"venueAddress\" style=\"display: inline-block\">\r\n                                            <mat-header-cell *matHeaderCellDef> Address </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\"><p style=\"display: inline-block; width: 100%;\">{{element.venueAddress}} </p> </mat-cell>\r\n                                        </ng-container>\r\n                                        \r\n                                        <!-- venuePrice -->\r\n                                        <ng-container matColumnDef=\"price\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Price </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\" >\r\n                                                <span class=\"text-center\" style=\"width: 100%;\" *ngIf='element.price == 0'>{{element.price}}$</span> \r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- website -->\r\n                                        <ng-container matColumnDef=\"url\">\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header> Website </mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let element\">\r\n                                                <a href=\"{{element.url}}\" target=\"_blank\" *ngIf='element.url' matTooltip='{{element.url}}'>\r\n                                                    <button mat-button>\r\n                                                        <mat-icon>open_in_new</mat-icon>\r\n                                                    </button>\r\n                                                </a>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <!-- edit & drag -->\r\n                                        <ng-container matColumnDef=\"index\" stickyEnd>\r\n                                            <mat-header-cell *matHeaderCellDef mat-sort-header></mat-header-cell>\r\n                                            <mat-cell *matCellDef=\"let index = index\">\r\n                                                <p class=\"text-right\" style=\"width: 100%;\">\r\n                                                    <button mat-button matTooltip='edit venue' (click)='openAddVenueModal(i, j, index)'>\r\n                                                        <mat-icon>edit</mat-icon>\r\n                                                    </button>\r\n                                                    <button mat-button matTooltip='delete venue' color='warn' (click)='onDeleteVenue(i, j, index)'>\r\n                                                        <mat-icon>delete</mat-icon>\r\n                                                    </button>\r\n                                                    <button mat-button matTooltip='show location on map' (click)='showLocation(i, j, index)'>\r\n                                                        <mat-icon>map</mat-icon>\r\n                                                    </button>\r\n                                                    <button mat-button matTooltip='drag to reorder schedule' cdkDragHandle>\r\n                                                        <mat-icon>drag_indicator</mat-icon>\r\n                                                    </button>\r\n                                                </p>\r\n                                            </mat-cell>\r\n                                        </ng-container>\r\n\r\n                                        <mat-header-row *matHeaderRowDef=\"displayedColumns\"></mat-header-row>\r\n                                        <mat-row *matRowDef=\"let row; columns: displayedColumns;\" cdkDrag></mat-row>\r\n                                    </mat-table>\r\n                                </div>\r\n                                <br>\r\n                                <!-- add venue -->\r\n                                <div class=\"row justify-content-center\">\r\n                                    <button mat-mini-fab id=\"addIcon\" class=\"col-auto align-self-center\" (click)='openAddVenueModal(i, j, null)' matTooltip='add a venue'>\r\n                                        <mat-icon id='addIcon' *ngIf='!isLoading && !isErr && !isSuccess'>add_location</mat-icon>\r\n                                        <mat-icon id='addIcon' *ngIf='!isLoading && !isErr && isSuccess'>done</mat-icon>\r\n                                        <mat-icon id='addIcon' class=\"text-danger\" *ngIf='!isLoading && isErr && !isSuccess'>error</mat-icon>\r\n                                        <mat-spinner *ngIf='isLoading && !isErr && !isSuccess' diameter='20'></mat-spinner>\r\n                                    </button>\r\n                                    &nbsp;\r\n                                    <small class=\"text-success align-self-center\" style=\"vertical-align: middle;\" *ngIf='!isLoading && !isErr && isSuccess'>Schedule Saved Successfully!</small>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                            <br>\r\n                            <!-- trip stats -->\r\n                            <mat-expansion-panel expanded='true'>\r\n                                <mat-expansion-panel-header>\r\n                                    <mat-panel-title>Trip Overview</mat-panel-title>\r\n                                    <mat-panel-description>All your stats are here</mat-panel-description>   \r\n                                </mat-expansion-panel-header>\r\n                                <div class=\"row container-fluid\">\r\n                                    <mat-chip-list>\r\n                                        <mat-chip color=\"primary\" selected>Distance Traveled: {{getTripDistance(i)}} km</mat-chip>\r\n                                        <mat-chip color=\"warn\" selected>Places Visited: {{getTotalVenues(trip)}}</mat-chip>\r\n                                        <mat-chip color=\"accent\" selected>Price: {{getTotalPrice(trip)}}$</mat-chip>\r\n                                    </mat-chip-list>\r\n                                </div>\r\n                            </mat-expansion-panel>\r\n                        </mat-accordion>\r\n                    </mat-card-content>\r\n                    \r\n                    <!-- trip actions -->\r\n                    <mat-card-actions class=\"\">\r\n                        <button mat-button color='warn' (click)='onDeleteTrip(trip.tripName, i)'>\r\n                            delete\r\n                        </button>\r\n                        <button mat-button color='primary'>\r\n                            complete!\r\n                        </button>\r\n                    </mat-card-actions>\r\n                </mat-card>    \r\n            </mat-expansion-panel>\r\n        </mat-accordion>\r\n    </div>\r\n</div>\r\n\r\n<mat-grid-list *ngIf='!sessionState' cols='4' >\r\n    <mat-grid-tile colspan='4'>\r\n        <div class=\"container-fluid row justify-content-center rounded\" style=\"background-color: rgba(255, 255, 255, 0.9); margin: 10%; padding: 5%;\">\r\n            <button mat-flat-button color='accent' style=\"align-content: center;\" routerLink='/login'>\r\n                <p style=\"margin: 0;\">You must have an Account to Create a Trip</p>\r\n            </button>   \r\n        </div>\r\n    </mat-grid-tile>\r\n</mat-grid-list>\r\n\r\n<!-- share popover -->\r\n<ng-template #popContent> \r\n    <app-share [UrlLink]='sharingUrl'></app-share>\r\n</ng-template>\r\n","import { Subscription } from 'rxjs'\r\nimport { SessionService } from './../../services/session.service'\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service'\r\nimport { Component, OnInit, OnDestroy } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'app-chatsystem',\r\n  templateUrl: './chatsystem.component.html',\r\n  styleUrls: ['./chatsystem.component.scss']\r\n})\r\nexport class ChatsystemComponent implements OnInit, OnDestroy {\r\n\r\n  sessionState: boolean\r\n  user = sessionStorage.getItem('username')\r\n  openChatWidgets: any\r\n\r\n  private openChatWidgets_sub: Subscription\r\n  private sessionState_sub: Subscription\r\n\r\n  constructor(\r\n    private FriendlistService: FriendlistService,\r\n    private SessionService: SessionService){\r\n\r\n    this.SessionService.session()\r\n\r\n    this.openChatWidgets_sub = this.FriendlistService.openWidgets.subscribe(x => {\r\n      this.openChatWidgets = x\r\n    })\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe(x => {\r\n      this.sessionState = x\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.FriendlistService.getNotifications()\r\n  }\r\n\r\n  refreshRoom(roomId: string) {\r\n    this.FriendlistService.selectChatwidget(roomId)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.openChatWidgets_sub.unsubscribe()\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div class=\"row-12 chatwidget\">\r\n\r\n    <div class=\"col-8 col-sm-9 col-md-10 col-lg-9 col-xl-10\">\r\n      <div class='container-fluid'>\r\n        <div class=\"row justify-content-end\">\r\n          <app-chatwidget\r\n            (click)='refreshRoom(openChatWidgets.roomIds[i])'\r\n            *ngFor='let widget of openChatWidgets.roomNames, let i = index '\r\n            [roomName]=\"widget\"\r\n            [roomId]='openChatWidgets.roomIds[i]'>\r\n          </app-chatwidget>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-4 col-sm-3 col-md-2 col-lg-3 col-xl-2\">\r\n      <app-friendlist></app-friendlist>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n","import { AbstractControl } from '@angular/forms'\r\nimport { Observable, Observer, of } from 'rxjs'\r\n\r\nexport const mimeType = (\r\n  control: AbstractControl\r\n): Promise<{ [key: string]: any }> | Observable<{ [key: string]: any }> => {\r\n  if (typeof(control.value) === 'string') {\r\n    return of(null)\r\n  }\r\n  const file = control.value as File\r\n  const fileReader = new FileReader()\r\n  const frObs = Observable.create(\r\n    (observer: Observer<{ [key: string]: any }>) => {\r\n      fileReader.addEventListener('loadend', () => {\r\n        const arr = new Uint8Array(fileReader.result as ArrayBuffer).subarray(0, 4)\r\n        let header = ''\r\n        let isValid = false\r\n        for (let i = 0; i < arr.length; i++) {\r\n          header += arr[i].toString(16)\r\n        }\r\n        switch (header) {\r\n          case '89504e47':\r\n            isValid = true\r\n            break\r\n          case 'ffd8ffe0':\r\n          case 'ffd8ffe1':\r\n          case 'ffd8ffe2':\r\n          case 'ffd8ffe3':\r\n          case 'ffd8ffe8':\r\n            isValid = true\r\n            break\r\n          default:\r\n            isValid = false // Or you can use the blob.type as fallback\r\n            break\r\n        }\r\n        if (isValid) {\r\n          observer.next(null)\r\n        } else {\r\n          observer.next({ invalidMimeType: true })\r\n        }\r\n        observer.complete()\r\n      })\r\n      fileReader.readAsArrayBuffer(file)\r\n    }\r\n  )\r\n  return frObs\r\n}\r\n","import { SessionService } from '../../../../services/session.service'\r\nimport { Component, OnInit, Input } from '@angular/core'\r\nimport { RoomWidget } from '../../../../models/Room_Widget.model'\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service'\r\n\r\n@Component({\r\n  selector: 'app-friend',\r\n  templateUrl: './friend.component.html',\r\n  styleUrls: ['./friend.component.scss']\r\n})\r\n\r\nexport class FriendComponent implements OnInit {\r\n\r\n  sessionRoomName: string\r\n  username: string = sessionStorage.getItem('username')\r\n\r\n  @Input() friend: RoomWidget\r\n  constructor(private friendlistService: FriendlistService,\r\n              public sessionService: SessionService) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.sessionRoomName = this.sessionService.getRoomName(this.friend.roomName)\r\n  }\r\n\r\n  // open or close chat widget\r\n  toggleChatWidget(friend: RoomWidget) {\r\n    this.friendlistService.toggleChatWidget(friend)\r\n    this.friendlistService.resizeWindow(window.innerWidth)\r\n  }\r\n}\r\n","<button type=\"button\" class=\"btn\"\r\n    [ngClass]=\"friend.unread ? 'btn-danger' : friend.open ? 'btn-light disabled' : 'btn-light'\"\r\n    (click)='toggleChatWidget(friend)'>\r\n        {{sessionRoomName}}\r\n</button>","import { MapService } from 'src/app/services/map/map.service'\r\nimport { Subscription } from 'rxjs'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { Router } from '@angular/router'\r\nimport { Component, Output, EventEmitter, ViewChild, ElementRef, Renderer2, OnDestroy, OnInit } from '@angular/core'\r\nimport { SessionService } from 'src/app/services/session.service'\r\n\r\n\r\n@Component({\r\n    selector: 'header-navbar',\r\n    templateUrl: './header.component.html',\r\n    styleUrls: ['./header.component.scss'],\r\n})\r\n\r\nexport class HeaderComponent implements OnDestroy, OnInit{\r\n    sessionState: any\r\n    username: string\r\n    // link = 'data:image/jpeg;base64,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'\r\n    link = 'https://cdn.discordapp.com/attachments/681368843951538206/792228230189940756/icon.png'\r\n\r\n    private sessionState_sub: Subscription\r\n\r\n    constructor(private sessionService: SessionService) {\r\n        this.sessionState_sub = this.sessionService.sessionState.subscribe((username) => {\r\n            this.sessionState = username\r\n            if (username) {\r\n                this.username = sessionStorage.getItem('username')\r\n            } else {\r\n                this.username = ''\r\n            }\r\n        })\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.sessionState_sub.unsubscribe()\r\n    }\r\n}\r\n","<!-- <div id='header' class=\"row-12\"> -->\r\n  <!-- search bar -->\r\n  <!-- <form (submit)='onSubmit(search.value)' class='form col-auto'>\r\n    <input #search (keyup)='onKey(search.value)' class='form-control' type='search' placeholder='Search' aria-label='Search' autocomplete='off'>\r\n    <i class=\"fas fa-search\" aria-hidden=\"true\"></i> -->\r\n      <!-- search results -->\r\n    <!-- <div class=\"container-fluid\" id='searchResultsContainer'>\r\n      <div *ngIf='loading' class=\"spinner-border text-primary\" style=\"margin-left: 50%;\"></div>\r\n      <div #searchResults></div>\r\n    </div>\r\n  </form> -->\r\n\r\n  <!-- login/register widgets -->\r\n  <!-- <div\r\n    class='col-auto'\r\n    *ngIf='!sessionState'>\r\n      <a class='btn btn-primary' routerLink='register' style=\"margin-right: 1%;\">Register<span class='sr-only'></span></a>\r\n      <a class='btn btn-primary' routerLink='login'>Login<span class='sr-only'></span></a>\r\n  </div> -->\r\n\r\n  <!-- dropdown menu -->\r\n  <!-- <div *ngIf='sessionState' id='icon' class=\"dropdown\">\r\n    <img class='img-thumbnail dropdown-toggle' data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" [src]=\"link\" alt=\"Settings\">\r\n    <div class=\"dropdown-menu dropdown-menu-right \">\r\n      <button class=\"btn btn-secondary dropdown-item\" routerLink='profile'>Profile</button>\r\n      <app-logout class=\"dropdown-item\"></app-logout>\r\n    </div>\r\n  </div>\r\n</div> -->\r\n\r\n  <!-- logo -->\r\n  <!-- <li class=\"nav-item\">\r\n    <img src=\"assets/img/travelnet.jpg\" id=\"logo\" alt=\"asd\" (click)=\"onReload()\">\r\n  </li> -->\r\n\r\n  <!-- search bar -->\r\n  <!-- <li class=\"nav-item\">\r\n    <form (submit)='onSubmit(search.value)' class='form'>\r\n      <mat-form-field class=\"input\">\r\n        <input matInput #search (keyup)='onKey(search.value)' class='form-control input' type='search' placeholder='Search' aria-label='Search' autocomplete='off'>\r\n        <i fas fa-search aria-hidden=\"true\"></i>\r\n        <mat-label>Search</mat-label>\r\n      </mat-form-field>\r\n    </form>\r\n  </li> -->\r\n\r\n  <!-- Register and Login buttons -->\r\n    <!-- <a class='btn btn-primary' routerLink='register' style=\"margin-right: 1%;\">Register<span class='sr-only'></span></a> -->\r\n    <a *ngIf='!sessionState' class='btn btn-primary' routerLink='login'>Login<span class='sr-only'></span></a>\r\n\r\n  <div *ngIf='sessionState' class=\"nav-item topIcon\">\r\n    <div  id='icon' class=\"dropdown\">\r\n      <img class='img-thumbnail dropdown-toggle' data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" [src]=\"link\" alt=\"Settings\">\r\n      <div class=\"dropdown-menu dropdown-menu-right \">\r\n        <button class=\"btn btn-secondary dropdown-item\" routerLink='profile'>Profile</button>\r\n        <app-logout class=\"dropdown-item\"></app-logout>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n","import { Component, OnInit } from '@angular/core'\r\nimport { FormGroup, FormControl } from '@angular/forms'\r\nimport { Router, ActivatedRoute } from '@angular/router'\r\n\r\n\r\n@Component({\r\n  selector: 'app-search-posts',\r\n  templateUrl: './search-posts.component.html',\r\n  styleUrls: ['./search-posts.component.scss']\r\n})\r\nexport class SearchPostsComponent implements OnInit {\r\n  form: FormGroup\r\n\r\n  constructor(\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      input: new FormControl(null, {\r\n        validators: []\r\n      })\r\n    })\r\n  }\r\n  onSearchPost(){\r\n    if (this.form.invalid) {\r\n      return\r\n    }\r\n    const input = this.form.get('input').value\r\n    if (input){\r\n    this.router.navigate(['/home', input])\r\n    }\r\n  }\r\n}\r\n","<form [formGroup]=\"form\" (submit)=\"onSearchPost()\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" formControlName=\"input\" placeholder=\"search a post...\">\r\n  </mat-form-field>\r\n  <button mat-raised-button color=\"accent\" type=\"submit\">Search</button>\r\n</form>\r\n\r\n\r\n\r\n","import { environment } from 'src/environments/environment';\r\nimport { Component, OnInit } from '@angular/core'\r\nimport { FormGroup, FormControl } from '@angular/forms'\r\nimport { HttpClient } from '@angular/common/http'\r\n\r\n\r\n@Component({\r\n  selector: 'app-add-tag',\r\n  templateUrl: './add-tag.component.html',\r\n  styleUrls: ['./add-tag.component.scss']\r\n})\r\nexport class AddTagComponent implements OnInit {\r\n  form: FormGroup\r\n  constructor(private http: HttpClient) { }\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      tag: new FormControl(null, {\r\n        validators: []\r\n      })\r\n    })\r\n  }\r\n  onSubmit(){\r\n    this.onAddTag(sessionStorage.getItem('username'), this.form.get('tag').value)\r\n  }\r\n  onAddTag(username: string, tag: string){ //send request to add tag to post\r\n    this.http\r\n      .put(environment.travelnetURL + \"api/user/addTag/\", {'username': username, 'tag': tag})\r\n      .subscribe((response:{message:string, likes: string[]})=>{\r\n        console.log(response)\r\n    })\r\n  }\r\n}\r\n","<form [formGroup]=\"form\" (submit)=\"onSubmit()\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" formControlName=\"tag\" placeholder=\"add a tag\">\r\n  </mat-form-field>\r\n  <button mat-raised-button color=\"accent\" type=\"submit\">Add</button>\r\n</form>\r\n","import { FormControl, FormGroup } from '@angular/forms'\r\nimport { Component, OnInit, Input } from '@angular/core'\r\nimport { threadId } from 'worker_threads'\r\n\r\n@Component({\r\n  selector: 'app-share',\r\n  templateUrl: './share.component.html',\r\n  styleUrls: ['./share.component.scss']\r\n})\r\nexport class ShareComponent implements OnInit {\r\n  @Input() UrlLink: URL | string\r\n  shareForm: FormGroup = null\r\n  copied = false\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    this.shareForm = new FormGroup({\r\n     urlLinkControl: new FormControl(null)\r\n\r\n    })\r\n    this.shareForm.get('urlLinkControl').patchValue(this.UrlLink ? this.UrlLink : 'czi')\r\n  }\r\n\r\n  onCopyClick() {\r\n    this.copied = true\r\n  }\r\n\r\n}\r\n","<form [formGroup]='shareForm'>\r\n    <mat-form-field appearance='outline'>\r\n        <mat-label>Shareable Link</mat-label>\r\n        <input matInput formControlName='urlLinkControl' type=\"text\" readonly aria-readonly=\"true\">\r\n    </mat-form-field>  \r\n    <button mat-button type='button' [cdkCopyToClipboard]='shareForm.get(\"urlLinkControl\").value' (click)='onCopyClick()'>Copy</button>\r\n    &nbsp;\r\n    <small class=\"text-success\" *ngIf='copied'>Copied To Clipboard</small>\r\n</form>\r\n\r\n","import { HttpService } from 'src/app/services/http.service'\r\nimport { NgbDateStruct } from '@ng-bootstrap/ng-bootstrap'\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { Component, OnInit, Input } from '@angular/core'\r\nimport * as moment from 'moment'\r\n\r\n@Component({\r\n  selector: 'app-proprety',\r\n  templateUrl: './proprety.component.html',\r\n  styleUrls: ['./proprety.component.scss']\r\n})\r\nexport class PropretyComponent implements OnInit {\r\n  @Input() username: string\r\n  @Input() proprety: string\r\n  @Input() propretyValue: string\r\n  changeForm: FormGroup\r\n  changing: boolean\r\n  invalid: boolean\r\n  invalidOld: boolean\r\n  model: NgbDateStruct\r\n\r\n  constructor(\r\n    private httpService: HttpService) { }\r\n\r\n  ngOnInit(): void {\r\n\r\n    // special forms that need validations\r\n    if (this.proprety == 'email') {\r\n      this.changeForm = new FormGroup({\r\n        newPropretyValue: new FormControl(this.propretyValue, [Validators.required, Validators.email])\r\n      })\r\n    } else if (this.proprety == 'password') {\r\n      this.propretyValue = '••••••••'\r\n      this.changeForm = new FormGroup({\r\n        oldPassword: new FormControl(null, [Validators.required, Validators.minLength(5)]),\r\n        newPropretyValue: new FormControl(null, [Validators.required, Validators.minLength(5)])\r\n      })\r\n    } else { // everything else\r\n      if (this.proprety == 'birthdate') {\r\n        this.propretyValue = this.propretyValue.slice(0, 10)\r\n      }\r\n      this.changeForm = new FormGroup({\r\n        newPropretyValue: new FormControl(this.propretyValue, [Validators.required])\r\n      })\r\n    }\r\n  }\r\n\r\n  // changing between form and h3 with old proprety\r\n  onClick(): void {\r\n    this.changing = !this.changing\r\n  }\r\n\r\n  // once a new proprety is submitted\r\n  onSubmit(): void {\r\n    const requestedChange = {\r\n      username: this.username,\r\n      proprety: this.proprety,\r\n      newProprety: this.changeForm.get('newPropretyValue').value\r\n    }\r\n\r\n    if (this.changeForm.valid) {\r\n      this.invalid = false\r\n\r\n      if (this.proprety == 'password') {\r\n        // implement old password\r\n      } else if (this.proprety == 'birthdate') {\r\n        requestedChange.newProprety = moment(requestedChange.newProprety)\r\n      }\r\n\r\n      this.httpService.patch('/user/edit', requestedChange).then((res) => {\r\n        console.log(res)\r\n        window.location.reload()\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n    } else {\r\n      this.invalid = true\r\n    }\r\n  }\r\n}\r\n","<div>\r\n    <!-- name and value -->\r\n    <h3 *ngIf='!changing'> \r\n        {{ proprety | titlecase }}\r\n        <br>\r\n        {{ propretyValue }}\r\n    </h3>\r\n\r\n    <!-- if user decides to change -->\r\n    <form *ngIf='changing' [formGroup]='changeForm' (ngSubmit)='onSubmit()'>\r\n        <div class='form-group'>\r\n\r\n            <!-- old password -->\r\n            <div *ngIf='proprety == \"password\"'>\r\n                <label for='newPropretyValue'>Old {{ proprety | titlecase }}</label>  \r\n                <input type='text' formControlName='oldPassword' class='form-control'>\r\n            </div>\r\n\r\n            <!-- new proprety space -->\r\n            <label for='newPropretyValue'>New {{ proprety | titlecase }}</label>            \r\n            <div *ngIf='invalid'>\r\n                Invalid {{ proprety | titlecase }}!\r\n                <br>\r\n            </div>\r\n\r\n            <!-- all but birthdate and gender -->\r\n            <input *ngIf='proprety != \"birthdate\" && proprety != \"gender\"' type='text' formControlName='newPropretyValue' class='form-control'>\r\n\r\n            <!-- birthdate -->\r\n            <div *ngIf='proprety == \"birthdate\"'>\r\n                <input [minDate]=\"{year: 1900, month: 1, day: 1}\" [maxDate]=\"{year: 2020, month: 1, day: 1}\"\r\n                placeholder=\"yyyy-mm-dd\" formControlName=\"newPropretyValue\" [(ngModel)]=\"model\" name=\"dp\" ngbDatepicker #d=\"ngbDatepicker\">\r\n                <div class=\"input-group-append\">\r\n                    <button id='calendar' class=\"btn btn-outline-secondary calendar\"\r\n                    (click)=\"d.toggle()\" type=\"button\"><mat-icon>calendar_today</mat-icon></button>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- gender -->\r\n            <div *ngIf='proprety == \"gender\"'> \r\n                <mat-radio-group aria-label=\"Select an option\" class=\"row\"\r\n                formControlName=\"newPropretyValue\">\r\n                  <mat-radio-button value=\"Male\" class='col-4'>Male</mat-radio-button>\r\n                  <mat-radio-button value=\"Female\" class='col-4'>Female</mat-radio-button>\r\n                  <mat-radio-button value=\"Other\" class='col-4'>Other</mat-radio-button>\r\n                </mat-radio-group>\r\n            </div>\r\n            \r\n        </div>        \r\n        <button *ngIf='changing' class='btn btn-danger' type='submit'>Confirm</button>\r\n        <button *ngIf='changing' class='btn btn-light' id='cancel' (click)='onClick()'>Cancel</button> \r\n    </form>\r\n    <button *ngIf='!changing' class='btn btn-danger' (click)='onClick()'>Change {{ proprety | titlecase }}</button>\r\n</div>","import { Observable } from 'rxjs'\r\nimport { Injectable } from '@angular/core'\r\nimport { environment } from 'src/environments/environment'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { env } from 'process'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OpenstreetmapService {\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  onSendRequest(bbox){\r\n    return this.http\r\n      .get<{[key: string]: any}>(\r\n        environment.openstreetmap.searchNodes,\r\n        {\r\n          headers: {\r\n          },\r\n          params: {\r\n\r\n            bbox,\r\n          }\r\n      })\r\n  }\r\n\r\n  /** search for cities with nominatim (geojson response) coord as [lng, lat] */\r\n  citySearch(city: string): Observable<{[key: string]: any}> {\r\n    return this.http\r\n      .get<{[key: string]: any, name: string, content: {[key: string]: any}}>(\r\n        environment.nominatim.search,\r\n        {\r\n          headers: {},\r\n          params: {\r\n            city,\r\n            format: 'geojson'\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  /** reverse geocoding */\r\n  reverseSearch(lng: number, lat: number): Observable<{[key: string]: any, features: Array<{[key: string]: any}>}> {\r\n    return this.http\r\n      .get<{[key: string]: any, features: Array<{[key: string]: any}>}>(\r\n        environment.nominatim.reverse,\r\n        {\r\n          params: {\r\n            format: 'geojson',\r\n            zoom: '10',\r\n            lat: lat.toString(),\r\n            lon: lng.toString()\r\n          }\r\n        }\r\n      )\r\n  }\r\n}\r\n","import { HttpService } from './../../../services/http.service'\r\nimport { CitySearchComponent } from './../../city-search/city-search.component'\r\nimport { clickLocationCoordinates } from './../../../services/map/map.service'\r\nimport { environment } from './../../../../environments/environment.prod'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\nimport { getCode } from 'country-list'\r\nimport { Subscription } from 'rxjs'\r\nimport { Component, OnInit, Input, OnDestroy, AfterContentInit, ViewChild, AfterViewInit } from '@angular/core'\r\nimport * as CountriesList from 'countries-list'\r\n\r\nexport interface VisitedPlaces {\r\n  code: string\r\n  continent: string\r\n  places: string[]\r\n}\r\n\r\n@Component({\r\n  selector: 'app-country-selector',\r\n  templateUrl: './country-selector.component.html',\r\n  styleUrls: ['./country-selector.component.scss']\r\n})\r\nexport class CountrySelectorComponent implements OnInit, AfterContentInit, AfterViewInit , OnDestroy {\r\n  @ViewChild('citySearch') citySearchComponent: CitySearchComponent\r\n  citySearchAppearance = 'standard'\r\n  citySearchPlaceholder = 'Search for Locations'\r\n  optionClick_sub: Subscription\r\n  @Input() progressUpdate: any\r\n  @Input() target: number\r\n  allPlaces: VisitedPlaces[] = [\r\n    {code: 'NA', continent: 'North-America', places: []},\r\n    {code: 'SA', continent: 'South-America', places: []},\r\n    {code: 'EU', continent: 'Europe', places: []},\r\n    {code: 'AS', continent: 'Asia', places: []},\r\n    {code: 'AF', continent: 'Africa', places: []},\r\n    {code: 'OC', continent: 'Oceania', places: []},\r\n    {code: 'AN', continent: 'Antarctica', places: []}\r\n  ]\r\n  removable = true\r\n\r\n  private clickLocation_sub: Subscription\r\n\r\n  constructor(private MapService: MapService,\r\n              private Http: HttpClient,\r\n              private HttpService: HttpService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    // display city where user clicked\r\n    this.clickLocation_sub = this.MapService.clickLocation.subscribe((x: clickLocationCoordinates) => {\r\n      if (this.progressUpdate && this.target == this.progressUpdate) {\r\n        if (x.lng != null) {\r\n          this.Http.get<any>(\r\n            environment.mapbox.geocoding.concat('/', x.lng.toString(), ',', x.lat.toString(), '.json'),\r\n            {\r\n              headers: {},\r\n              params: {\r\n                access_token: environment.mapbox.token,\r\n                types: 'country,region,district,place',\r\n                language: environment.language\r\n              }\r\n            }\r\n          )\r\n          .subscribe((response) => {\r\n            if (response.features[0]) {\r\n              const placeName = response.features[0].place_name\r\n              const chip = this.citySearchComponent.removeMiddle(placeName, 1)\r\n              this.getKey(response.features[response.features.length - 1].properties.short_code.toUpperCase())\r\n                .then((value: any) => {\r\n                  const continent = value.continent\r\n                  this.allPlaces.forEach((element) => {\r\n                    if (element.code === continent && !element.places.includes(chip)) {\r\n                      element.places.push(chip)\r\n                      this.MapService.showMarker(this.target, {\r\n                        name: chip,\r\n                        content: {\r\n                          geometry: {\r\n                            coordinates: response.query\r\n                          }\r\n                        }\r\n                      })\r\n                    }\r\n                  })\r\n\r\n                })\r\n                .catch((err) => {\r\n                  console.log(err)\r\n                })\r\n            }\r\n          }, (err) => {\r\n            console.log(err)\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.optionClick_sub = this.citySearchComponent.clickedOption.subscribe(content => {\r\n      if (content) {\r\n        // displays chip and clear search input\r\n        const chip = this.citySearchComponent.removeMiddle(content.name, 1)\r\n        const countryName = ((content.name.split(', '))[content.name.split(', ').length - 1]).substring(1)\r\n        const code = getCode(countryName)\r\n        this.getKey(code)\r\n        .then((value: any) => {\r\n          const continent = value.continent\r\n          this.allPlaces.forEach((element) => {\r\n            if (element.code === continent && !element.places.includes(chip)) {\r\n              element.places.push(chip)\r\n            }\r\n          })\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n\r\n        // show location on map\r\n        content.name = this.citySearchComponent.removeMiddle(content.name, 1)\r\n        this.MapService.showMarker(this.target, content)\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  // search Countrieslist countries\r\n  getKey(code: string) {\r\n    return new Promise((resolve, reject) => {\r\n      const value = Object.keys(CountriesList.countries).find(key => {\r\n        if (key === code) {\r\n          resolve(CountriesList.countries[key])\r\n        }\r\n      })\r\n      if (!value) {\r\n        reject('not found')\r\n      }\r\n    })\r\n  }\r\n\r\n  // remove chips\r\n  onRemove(place: string, index: number) {\r\n    const placesArr = this.allPlaces[index].places\r\n    placesArr.splice(placesArr.indexOf(place), 1)\r\n    this.MapService.removeMarker(place, this.target)\r\n  }\r\n\r\n  onClear() {\r\n    this.allPlaces.forEach(element => {\r\n      element.places = []\r\n    })\r\n    this.MapService.removeMarker('', null, true)\r\n  }\r\n\r\n  // send data to backend\r\n  onSumbit(): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpService.patch('/user/edit', {\r\n        username: localStorage.getItem('username').toString(),\r\n        proprety: (this.target == 1) ? 'history' : 'wishlist',\r\n        newProprety: this.allPlaces\r\n      })\r\n      .then((response) => {\r\n        resolve(response)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.clickLocation_sub.unsubscribe()\r\n    this.optionClick_sub.unsubscribe()\r\n  }\r\n}\r\n","<form class=\"example-form row align-items-center\">\r\n    <!-- city search autocomplete -->\r\n    <app-city-search #citySearch class=\"col\" [appearance]='citySearchAppearance' [placeholder]='citySearchPlaceholder' [clearOnSearch]='true' [getFakeCenterCity]='false'></app-city-search>\r\n    <div class=\"col-auto mr-auto\">\r\n        <span><strong>Or</strong></span>\r\n    </div>\r\n    <div class=\"col-auto mr-auto\">\r\n        <button mat-button><span>Click on the map</span></button>\r\n    </div>\r\n</form>\r\n<!-- <img *ngIf='!citySearchComponent.myControl.dirty' src=\"https://img.icons8.com/bubbles/100/000000/geography.png\" class=\"img\" style=\"margin-left: 25%;\">\r\n<small *ngIf='!citySearchComponent.myControl.dirty'><a href=\"https://icons8.com/icon/113643/geography\">Geography icon by Icons8</a></small> -->\r\n\r\n<div id=\"mainList\" #mainlist [hidden]=\"Place.places.length == 0? true:false\" *ngFor=\"let Place of allPlaces, let i = index\">\r\n    <button mat-raised-button  class=\"mat-chip-list-stacked\" aria-orientation=\"vertical\">\r\n        {{ Place.continent }}\r\n    </button>\r\n    <br>\r\n    <mat-chip-list class=\"\">\r\n        <mat-chip *ngFor='let place of allPlaces[i].places'\r\n            (removed)=onRemove(place,i)>\r\n            {{ place }}\r\n            <mat-icon matChipRemove class=\"\" *ngIf='removable'>cancel</mat-icon>\r\n        </mat-chip>\r\n    </mat-chip-list>\r\n    <hr>\r\n</div>\r\n<br>\r\n<div class=\"row-auto\">\r\n    <button mat-button *ngIf='true' color='warn' (click)='onClear()'>Clear</button>\r\n</div>\r\n<br>\r\n","import { HttpService } from 'src/app/services/http.service'\r\nimport { FormGroup, FormControl } from '@angular/forms'\r\nimport { Component, OnInit } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'app-myaccount',\r\n  templateUrl: './myaccount.component.html',\r\n  styleUrls: ['./myaccount.component.scss']\r\n})\r\nexport class MyaccountComponent implements OnInit {\r\n\r\n  form: FormGroup\r\n  imagePreview: string\r\n\r\n  constructor(private httpService: HttpService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      picture: new FormControl(null, [])\r\n    })\r\n  }\r\n\r\n  onImagePicked(event: Event) {\r\n    const file = (event.target as HTMLInputElement).files[0]\r\n    this.form.patchValue({picture: file})\r\n    this.form.get('picture').updateValueAndValidity\r\n    const reader = new FileReader()\r\n    reader.onload = () => {\r\n      this.imagePreview = reader.result.toString()\r\n    }\r\n    console.log(this.form)\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  onSubmit() {\r\n    const imageData = new FormData()\r\n    imageData.append('username', sessionStorage.getItem('username'))\r\n    imageData.append('image', this.form.value.picture, 'profilepicture')\r\n    this.httpService.post('/user/profilepicture', imageData).then((res) => {\r\n      console.log('profile picture updated succesfully!')\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\n","<!-- profile picture -->\r\n<h1>Change Profile Picture</h1>\r\n\r\n<form [formGroup]='form' (ngSubmit)='onSubmit()'>\r\n    <button type='button' class='btn btn-danger button' (click)='filePicker.click()'>Upload Profile Picture</button>\r\n    <input type='file' style='visibility: hidden;' accept='image/*' (change)='onImagePicked($event)' #filePicker>\r\n    <div class='image-preview' *ngIf=\"imagePreview && imagePreview !== '' && this.form.get('picture').valid\">\r\n        <img [src]='imagePreview' alt=\"Invalid File\">\r\n        <button type='submit' class='btn btn-primary'>Change Profile Picture</button>\r\n    </div>\r\n</form>\r\n\r\n<!-- preferences -->\r\n<h1>Change Preferences</h1>\r\n\r\n<!-- places already visited -->\r\n\r\n<!-- interesting places -->\r\n\r\n<!-- post stuff -->","import { environment } from 'src/environments/environment'\r\n/** response from openstreetmaps api /search, coord as [lng, lat] */\r\nexport class geocodeResponseModel {\r\n    [key: string]: any\r\n    name: string\r\n    content: {\r\n        [key: string]: any\r\n        geometry: {\r\n            [key: string]: any\r\n            coordinates: number[]\r\n        }\r\n    }\r\n\r\n    constructor(name: string, coord: number[], content?: {[key: string]: any, geometry: any}) {\r\n        this.name = name\r\n        this.content = {\r\n            geometry: {\r\n                coordinates: [environment.montrealCoord.lng, environment.montrealCoord.lat]\r\n            }\r\n        }\r\n        if (content) {\r\n            this.content = content\r\n        } else {\r\n            this.content.geometry.coordinates = coord\r\n        }\r\n    }\r\n}\r\n","import { Subscription } from 'rxjs'\r\nimport { SessionService } from '../../../services/session.service'\r\nimport { RoomWidget } from '../../../models/Room_Widget.model'\r\nimport { Component, OnInit, OnDestroy } from '@angular/core'\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service'\r\n\r\n@Component({\r\n  selector: 'app-friendlist',\r\n  templateUrl: './friendlist.component.html',\r\n  styleUrls: ['./friendlist.component.scss']\r\n})\r\n\r\nexport class FriendlistComponent implements OnInit, OnDestroy {\r\n  sessionState: boolean\r\n  friends: RoomWidget[] = []\r\n  private friendsSub: Subscription\r\n  private sessionSub: Subscription\r\n\r\n  constructor(private friendlistService: FriendlistService,\r\n              private SessionService: SessionService) { }\r\n\r\n  ngOnInit(): void {\r\n    // setup sessionState and friends observable\r\n    this.sessionSub = this.SessionService.sessionState.subscribe((isLoggedIn) => {\r\n      this.sessionState = isLoggedIn\r\n\r\n      if (isLoggedIn) {\r\n        this.friendsSub = this.friendlistService.chatroomList.subscribe((friends) => this.friends = friends)\r\n        this.friendlistService.getList([])\r\n      } else {\r\n        console.log(`not logged in`)\r\n      }\r\n    })\r\n  }\r\n\r\n  // update friendlist on each key press\r\n  onKey(data: string) {\r\n    if (data === '') {\r\n      this.friendlistService.getList([sessionStorage.getItem('username')])\r\n    } else {\r\n      const arr: string[] = data.split(' ')\r\n      this.friendlistService.getList(arr)\r\n    }\r\n  }\r\n\r\n  // creates new room on submit\r\n  onSubmit(data: string) {\r\n    this.friendlistService.CreateChatroom(data)\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.friendsSub.unsubscribe()\r\n    this.sessionSub.unsubscribe()\r\n  }\r\n}\r\n","<div *ngIf='sessionState' class=\"border border-secondary\">\r\n    <!-- actual friendlist -->\r\n    <div id=\"friends\">\r\n        <div id = 'friend' *ngFor=\"let friend of friends\">\r\n            <app-friend [friend]=\"friend\">\r\n            </app-friend>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- textarea -->\r\n    <form (submit)='onSubmit(input.value)' >\r\n        <input #input type='text' class=\"form-control rounded-0\" (keyup)='onKey(input.value)' placeholder='Add a friend!' id=\"input\" autocomplete='off'>\r\n    </form>\r\n</div>\r\n","import { CustomCoordinates } from './../app/models/coordinates'\r\n// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  travelnetURL: 'http://localhost:3000',\r\n\r\n  mapbox: {\r\n    token: 'pk.eyJ1IjoidHJhdmVsbmV0IiwiYSI6ImNrOTk3cHkwaDAzaHkzZHEwMm03ZGN0MG8ifQ.j24u0Q5RbYw7PW4tVpGjmQ',\r\n    geocoding: 'https://api.mapbox.com/geocoding/v5/mapbox.places'\r\n  },\r\n\r\n  foursquare: {\r\n    clientId: 'NYZJ324E5GAY2MSQUNYIYLKIDCMX2ETMQREKQXZLW3S5ZYVG',\r\n    clientSecret: 'K51P2Y1T3TMTCU24LOFHDFOAONPGU44ZBNZCGTWCOJESUW4A',\r\n    v: '',\r\n    venuesSearch: 'https://api.foursquare.com/v2/venues/search',\r\n    venuesExplore: 'https://api.foursquare.com/v2/venues/explore',\r\n    venueDetails: 'https://api.foursquare.com/v2/venues',\r\n    userAuth: 'https://foursquare.com/oauth2/authenticate',\r\n    getCategories: 'https://api.foursquare.com/v2/venues/categories',\r\n\r\n  },\r\n\r\n  nominatim: {\r\n    search: 'https://nominatim.openstreetmap.org/search',\r\n    reverse: 'https://nominatim.openstreetmap.org/reverse'\r\n  },\r\n\r\n  openstreetmap: {\r\n    searchNodes: 'https://master.apis.dev.openstreetmap.org/api/0.6/map',\r\n    searchRealNode: ' https://api.openstreetmap.org/api/0.6/map'\r\n  },\r\n\r\n  travelnet: {\r\n    getUserInfo: 'http://localhost:3000/user',\r\n    getProfile: 'http://localhost:3000/profile',\r\n    searchUsers: 'http://localhost:3000/searchusers',\r\n    travelnetCommentURL: 'http://localhost:3000/comments',\r\n    travelnetPostURL: 'http://localhost:3000/posts',\r\n  },\r\n\r\n  montrealCoord: new CustomCoordinates(-73.5633265, 45.5009128)\r\n}\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { tripModel } from './../../models/trip.model'\r\nimport { TripService } from './../../services/trip.service'\r\nimport { MatListOption } from '@angular/material/list'\r\nimport { environment } from './../../../environments/environment.dev'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\nimport { MatBottomSheetModule } from '@angular/material/bottom-sheet'\r\nimport { Component, OnInit, OnDestroy } from '@angular/core'\r\nimport { Router, ActivatedRoute } from '@angular/router'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { Subscription } from 'rxjs'\r\nimport { tab } from '../../models/tab.model'\r\nimport { selectedVenueModel } from '../../models/selectedVenue.model'\r\n\r\n@Component({\r\n  selector: 'app-venue',\r\n  templateUrl: './venue.component.html',\r\n  styleUrls: ['./venue.component.scss']\r\n})\r\nexport class VenueComponent implements OnInit, OnDestroy {\r\n  ogUrl: string = null\r\n  url: string = null\r\n  content: selectedVenueModel = null\r\n  rating: number = null\r\n  ratingColor: any = null\r\n  displayContent: Array<{[key: string]: any}> = []\r\n  windowHeight: number = window.innerHeight\r\n\r\n  isLoading = false\r\n  isSuccess = false\r\n  isErr = false\r\n\r\n  private trip_sub: Subscription\r\n  trips: tripModel[] = []\r\n\r\n  private openTabSub: Subscription\r\n  openTab: tab\r\n  constructor(\r\n    private router: Router,\r\n    private SearchService: SearchService,\r\n    private MapService: MapService,\r\n    private TripService: TripService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.trip_sub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.trips = trips\r\n    })\r\n\r\n    this.openTabSub = this.SearchService.searchTab.subscribe(x => {\r\n      this.openTab = x\r\n    })\r\n    this.ogUrl = environment.travelnetURL + this.router.url\r\n    this.url = this.router.url.replace('/search/venue/', '')\r\n    this.SearchService.formatDetails(this.url).then(result => {\r\n      console.log(result)\r\n      this.content = result.response.venue\r\n      if (this.content.rating && this.content.ratingColor) {\r\n        this.rating = this.content.rating\r\n        this.ratingColor = `#${this.content.ratingColor}`\r\n      }\r\n    })\r\n  }\r\n    /** add venue to specific trips */\r\n    addToTrip(event: MatListOption[]) {\r\n      this.isLoading = true\r\n      if (event.length && this.trips) {\r\n        event.map((option: MatListOption) => {\r\n          this.trips[option.value.trip].schedule[option.value.day].venues.push({\r\n            name: this.content.name ? this.content.name : null,\r\n            venueAddress: this.content.location.formattedAddress ? this.content.location.formattedAddress.join(' ') : null,\r\n            venueCoord: this.content.location.lng ? {lng: this.content.location.lng, lat: this.content.location.lat} : null,\r\n            venueCity: this.content.location.city ? this.content.location.city : null,\r\n            url: this.content.canonicalUrl ? this.content.canonicalUrl : null,\r\n            category: this.content.categories[0] ? { name: this.content.categories[0].name, url: this.content.categories[0].icon.prefix + '32' + this.content.categories[0].icon.suffix } : null\r\n          })\r\n        })\r\n\r\n        this.TripService.modifyBackend(this.trips)\r\n        .then((val) => {\r\n          this.isSuccess = true\r\n        })\r\n        .catch(err => {\r\n          this.isErr = true\r\n        })\r\n        .finally(() => {\r\n          setTimeout(() => {\r\n            this.isErr = false\r\n          }, 800)\r\n          this.isLoading = false\r\n        })\r\n      }\r\n    }\r\n\r\n  goBack(){\r\n    this.router.navigate(['search'], {queryParams: this.SearchService.currentSearch ? this.SearchService.currentSearch : {}})\r\n  }\r\n\r\n  // check if is object\r\n  isObject(val: any): boolean {\r\n    if (typeof(val) == 'object') {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  // for ngIf, filter keys in user reviews\r\n  reviewKeys(key: string): boolean {\r\n    const keys = ['likes', 'text', 'user']\r\n    if (keys.includes(key)) {\r\n      return true\r\n    } else  {\r\n      return false\r\n    }\r\n  }\r\n\r\n  showOnMap(location: {[key: string]: any}) {\r\n    this.MapService.addMarker(location)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.openTabSub.unsubscribe()\r\n    this.MapService.venueOnDestroy()\r\n  }\r\n\r\n}\r\n","<mat-card class=\"container\" *ngIf=\"content\">\r\n  <mat-card-title>\r\n    <div class=\"row\">\r\n      <!-- go back -->\r\n      <button mat-button (click)='goBack()' *ngIf=\"this.openTab\" class=\"col-auto\" matTooltip=\"back\">\r\n        <mat-icon class=\"\">\r\n          keyboard_backspace\r\n        </mat-icon>\r\n      </button>\r\n      <!-- venue category icon -->\r\n      <span class=\"col-auto md-auto\">\r\n        <button mat-flat-button color='primary' class=\"align-self-start\" matTooltip='{{content.categories[0].name}}' matTooltipPosition='above'>\r\n          <span style=\"padding: auto; display:inline-block;\"><img src=\"{{content.categories[0].icon.prefix}}32{{content.categories[0].icon.suffix}}\" alt=\"\"></span>\r\n        </button>\r\n      </span>\r\n      <!-- verified user icon -->\r\n      <span class=\"col-auto md-auto align-self-center\">\r\n        {{ content.name }}\r\n        &nbsp;\r\n        <span *ngIf='content.verified' matTooltip=\"Verified Venue\" matTooltipPosition='above'>\r\n          <mat-icon mat-icon-button style=\"vertical-align: middle;\" color='primary'>verified_user</mat-icon>\r\n        </span>\r\n      </span>\r\n      <!-- quick actions -->\r\n      <span class=\"col justify-content-end\">\r\n        <button mat-icon-button matTooltip=\"share\" matTooltipPosition='above' color='accent' [ngbPopover]=\"sharePop\" [autoClose]=\"'outside'\" placement=\"right\">\r\n          <mat-icon>\r\n            share\r\n          </mat-icon>\r\n        </button>\r\n        <button *ngIf=\"(content.location)? true:false\" mat-icon-button matTooltip=\"show on map\" matTooltipPosition='above' color='primary' (click)='showOnMap(content.location)'>\r\n          <mat-icon>\r\n            map\r\n          </mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"add to trip\" matTooltipPosition='above'>\r\n          <mat-icon mat-icon-button *ngIf='!isErr && !isLoading && !isSuccess' matTooltipPosition='above' [ngbPopover]=\"popContent\" matTooltip=\"add to trip...\" [autoClose]=\"'outside'\">playlist_add</mat-icon>\r\n          <mat-spinner diameter='20' *ngIf='isLoading'></mat-spinner>\r\n          <mat-icon mat-icon-button class=\"text-success\" *ngIf='isSuccess && !isLoading'>check</mat-icon>\r\n          <mat-icon mat-icon-button class=\"text-danger\" *ngIf='isErr && !isLoading' matTooltip='an error occured'>error</mat-icon>\r\n        </button>\r\n      </span>\r\n    </div>\r\n  </mat-card-title>\r\n\r\n  <mat-card-content class=\"\">\r\n    <mat-grid-list cols=\"4\" rowHeight='{{windowHeight*.1}}'>\r\n      <!-- pictures -->\r\n      <mat-grid-tile id='imgTile'colspan=\"2\" rowspan=\"4\" >\r\n        <ngb-carousel *ngIf=\"content.photos\">\r\n          <ng-template ngbSlide *ngFor='let photo of content.photos.groups[0].items, let i = index'>\r\n            <div class=\"picsum-img-wrapper\">\r\n              <img class=\"d-inline-flex w-100\" src=\"{{photo|null:['prefix']}}original{{photo|null:['suffix']}}\" alt=\"slide {{i}}\">\r\n            </div>\r\n          </ng-template>\r\n        </ngb-carousel>\r\n        <!-- need button for additional pictures -->\r\n      </mat-grid-tile>\r\n\r\n      <!-- description -->\r\n      <mat-grid-tile colspan=\"2\" rowspan=\"3\" >\r\n        <div class=\"container-fluid\">\r\n          <!-- get page info -->\r\n          <div class=\"div\">\r\n            <p>description: {{content | null:['page','pageInfo','description']}}</p>\r\n          </div>\r\n          <!-- each categories -->\r\n          <div class=\"div\">\r\n            <p>category: <span *ngFor=\"let category of content.categories\">{{category | null:['name']}}</span></p>\r\n          </div>\r\n          <!-- need for each for attributes -->\r\n          <p>attributes:</p>\r\n          <div class=\"div\" *ngFor=\"let attribute of content.attributes.groups\">\r\n             <span>{{attribute|null:['name']}} </span><span *ngIf=\"(attribute|null:['name'])!==(attribute|null:['summary'])\"> | {{attribute|null:['summary']}}</span>\r\n          </div>\r\n          <!-- need price -->\r\n      </div>\r\n      </mat-grid-tile>\r\n\r\n      <!--rating -->\r\n      <mat-grid-tile colspan=\"4\" rowspan='1' class=\"border border-primary\">\r\n        <div class=\"container row\">\r\n          <mat-label class=\"col-auto align-self-center\">Rating: <b>{{ rating | null}}</b></mat-label>\r\n          &nbsp;\r\n          <ngb-rating [(rate)]='rating' [readonly]=\"true\" [max]=\"10\">\r\n            <ng-template #t let-fill=\"fill\">\r\n              <span class=\"star\" [class.full]=\"fill === 100\" >\r\n                <span class=\"half\" [style.width.%]=\"fill\" [style.color]='ratingColor'>&hearts;</span>&hearts;\r\n              </span>\r\n            </ng-template>\r\n          </ngb-rating>\r\n        </div>\r\n      </mat-grid-tile>\r\n\r\n      <mat-grid-tile colspan=\"4\" rowspan=5 >\r\n        <!-- need tips -->\r\n        <div class='container col' class=\"align-self-start d-inline\">\r\n          <br>\r\n          <h3 style=\"margin-bottom: 0;\"><b>Reviews</b></h3>\r\n          <div class=\"row d-inline\" *ngFor=\"let item of content.tips.groups[0].items\">\r\n            <div>\r\n              <span><b>{{ item.user.firstName }} {{ item.user.lastName }}: </b></span>\r\n              <span>{{ item.text }}</span>\r\n            </div>\r\n            <hr>\r\n          </div>\r\n        </div>\r\n      </mat-grid-tile>\r\n    </mat-grid-list>\r\n\r\n  </mat-card-content>\r\n</mat-card>\r\n\r\n<!-- share -->\r\n<ng-template #sharePop> \r\n  <app-share [UrlLink]='ogUrl'></app-share>\r\n</ng-template>\r\n\r\n<!-- add to trip -->\r\n<ng-template #popContent> \r\n  <app-add-to-trip-popover (onSubmitEvent)='addToTrip($event)'></app-add-to-trip-popover>\r\n</ng-template>","import { Component, OnInit, OnDestroy, Input } from '@angular/core'\r\nimport { ActivatedRoute, ParamMap } from '@angular/router'\r\nimport { Subscription } from 'rxjs'\r\n\r\nimport { Post } from 'src/app/models/post.model'\r\nimport { AddPostService } from 'src/app/services/add-post.service'\r\nimport { FormGroup, FormControl } from '@angular/forms'\r\nimport { HttpService } from 'src/app/services/http.service'\r\n\r\n@Component({\r\n  selector: 'app-display-posts',\r\n  templateUrl: './display-posts.component.html',\r\n  styleUrls: ['./display-posts.component.scss']\r\n})\r\nexport class DisplayPostsComponent implements OnInit, OnDestroy {\r\n  user\r\n  // posts = [\r\n  //   { title: \"First Post\", content: \"This is the first post's content\" },\r\n  //   { title: \"Second Post\", content: \"This is the second post's content\" },\r\n  //   { title: \"Third Post\", content: \"This is the third post's content\" }\r\n  // ];\r\n  posts: Post[] = []\r\n  isLoading = false\r\n  private postsSub: Subscription;\r\n  timeoutHandler\r\n  likeShow = false\r\n  input: string\r\n\r\n\r\n  constructor(public postsService: AddPostService, private HttpService: HttpService, private route: ActivatedRoute) {}\r\n\r\n  ngOnInit() { // get all posts related to a user\r\n    if (sessionStorage.getItem('username')){\r\n      this.isLoading = true\r\n      this.route.params.subscribe(params => {\r\n        this.input = params.query\r\n        if (this.input){\r\n          this.postsService.searchPosts({input: this.input})\r\n          this.postsSub = this.postsService.getPostUpdateListener()\r\n          .subscribe((posts: Post[]) => {\r\n            this.isLoading = false\r\n            this.posts = posts\r\n          })\r\n\r\n        }\r\n        else{\r\n          this.HttpService.get('/user', null).then((res: any) => {\r\n            this.user = res.user[0]\r\n            this.postsService.getRelevantPosts({author: this.user.username, follows: this.user.following, tags: this.user.tags, location: this.user.location})\r\n            this.postsSub = this.postsService.getPostUpdateListener()\r\n            .subscribe((posts: Post[]) => {\r\n              this.isLoading = false\r\n              this.posts = posts\r\n            })\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  onDelete(postId: string) { //delete a post\r\n    this.postsService.deletePost(postId)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (sessionStorage.getItem('username')){\r\n      this.postsSub.unsubscribe()\r\n    }\r\n  }\r\n\r\n  like(postId: string){\r\n    this.postsService.likePost(postId, sessionStorage.getItem('username'))\r\n  }\r\n\r\n  public mouseup() {\r\n    if (this.timeoutHandler) {\r\n      clearInterval(this.timeoutHandler)\r\n      this.timeoutHandler = null\r\n    }\r\n  }\r\n\r\n  public mousedown() {\r\n    this.timeoutHandler = setInterval(() => {\r\n      this.showLikes()\r\n      console.log(this.likeShow)\r\n    }, 300)\r\n  }\r\n\r\n  showLikes(){\r\n    this.likeShow = !this.likeShow\r\n  }\r\n\r\n  submitComment(comment){\r\n\r\n  }\r\n  ownContent(post){\r\n    if (sessionStorage.getItem('username') === post.author){\r\n      return true\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","<div class=\"row container\">\r\n  <app-search-posts class=\"col-6\"></app-search-posts>\r\n  <app-add-tag class=\"col-6\"></app-add-tag>\r\n</div>\r\n<!-- <mat-spinner *ngIf=\"isLoading\"></mat-spinner> -->\r\n\r\n<div *ngIf=\"posts.length > 0 && !isLoading\">\r\n  <div *ngFor=\"let post of posts\">\r\n    <mat-card class=\"\">\r\n      <mat-card-header>\r\n        <div mat-card-avatar class=\"\"></div>\r\n        <mat-card-title>{{ post.author }}</mat-card-title>\r\n        <mat-card-subtitle>Premium User</mat-card-subtitle>\r\n        <div class='authorButtons'>\r\n          <a *ngIf=\"ownContent(post)\" mat-button color=\"primary\" [routerLink]=\"['/edit', post._id]\">EDIT</a>\r\n          <button *ngIf=\"ownContent(post)\" mat-button color=\"warn\" (click)=\"onDelete(post._id)\">DELETE</button>\r\n        </div>\r\n      </mat-card-header>\r\n      <h1>\r\n        {{ post.title }}\r\n      </h1>\r\n      <p>\r\n        {{ post.tags }} {{ post.date }}\r\n      </p>\r\n      <p>\r\n        {{ post.content }}\r\n      </p>\r\n      <img mat-card-image [src]=\"post.imagePath\" [alt]=\"post.title\">\r\n\r\n      <mat-card-actions>\r\n        <button mat-button type=\"button\" (click)=\"like(post._id)\" (mousedown)=\"mousedown()\" (mouseup)=\"mouseup()\" (mouseleave)=\"mouseup()\" matTooltip='{{post.likes}}'>LIKE {{ post.likes.length }}</button>\r\n        <button mat-button>SHARE</button>\r\n      </mat-card-actions>\r\n      <!-- <div *ngIf=\"likeShow\">{{post.likes}}</div> -->\r\n\r\n      <app-comment-section [post] ='post'></app-comment-section>\r\n    </mat-card>\r\n  </div>\r\n</div>\r\n<p class=\"info-text mat-body-1\" *ngIf=\"posts.length <= 0 && !isLoading\">No posts added yet!</p>\r\n","import { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { mimeType } from './mime-type.validator'\r\nimport { HttpService } from 'src/app/services/http.service'\r\nimport { environment } from 'src/environments/environment'\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { Router } from '@angular/router'\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service'\r\nimport { Component, OnInit, OnDestroy } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss']\r\n})\r\nexport class ProfileComponent implements OnInit, OnDestroy {\r\n  User: {\r\n    username: string,\r\n    password: string,\r\n    email: string,\r\n    firstname: string,\r\n    lastname: string,\r\n    birthdate: string,\r\n    gender: any,\r\n  }\r\n  propreties: string[]\r\n  values: string[]\r\n  form: FormGroup\r\n  imagePreview: string\r\n\r\n  constructor(private socketService: SocketService,\r\n              private sessionService: SessionService,\r\n              private Router: Router,\r\n              private httpService: HttpService) { }\r\n\r\n  ngOnInit(): void {\r\n    // http request to get user info\r\n    this.getProfile()\r\n    this.form = new FormGroup({\r\n      image: new FormControl(null, {\r\n        validators: [Validators.required],\r\n        asyncValidators: [mimeType]\r\n      })\r\n    })\r\n  }\r\n\r\n  getProfile() {\r\n    this.httpService.get('/user', null).then((res: any) => {\r\n      this.User = (({username, password, email, firstname, lastname, birthdate, gender}) =>\r\n          ({username, password, email, firstname, lastname, birthdate, gender}))(res.user[0])\r\n\r\n      // transform object in arrays\r\n      this.propreties = Object.keys(this.User)\r\n      this.values = Object.values(this.User)\r\n\r\n      // takeout username\r\n      this.propreties.shift()\r\n      this.values.shift()\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // delete account function\r\n  onDelete() {\r\n      this.Router.navigate(['./'])\r\n      this.socketService.emit('deleteUser', sessionStorage.getItem('username'), (data) => {\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      } else {\r\n        console.log(data.res)\r\n        localStorage.removeItem('username')\r\n        sessionStorage.removeItem('username')\r\n        this.sessionService.session()\r\n        window.location.reload()\r\n        console.log('session cleared')\r\n      }\r\n    })\r\n  }\r\n\r\n  // when profile pic is selected\r\n  onImagePicked(event: Event) {\r\n    const file = (event.target as HTMLInputElement).files[0]\r\n    this.form.patchValue({ image: file })\r\n    this.form.get('image').updateValueAndValidity()\r\n    const reader = new FileReader()\r\n    reader.onload = () => {\r\n      this.imagePreview = reader.result as string\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  // on image picked\r\n  onSubmit() {\r\n    if (this.form.invalid) {\r\n      return\r\n    }\r\n    const formData = new FormData()\r\n    formData.append('image', this.form.value.image)\r\n    formData.append('username', localStorage.getItem('username'))\r\n    this.httpService.post('/user/profilepicture', formData\r\n    ).then((res: any) => {\r\n\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n    this.form.reset()\r\n  }\r\n\r\n  // back button that destroys component\r\n  onExit() {\r\n    this.ngOnDestroy()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.Router.navigate(['./'])\r\n  }\r\n}\r\n","<div id=\"main\" class=\"container-fluid rounded\">\r\n\r\n    <!-- after fetching data -->\r\n    <div *ngIf='User'>\r\n\r\n        <!-- generate propreties -->\r\n        <app-proprety *ngFor='let proprety of propreties; let i = index' [username]='User.username' [proprety]='proprety' [propretyValue]='values[i]'></app-proprety>\r\n        <div id='delete'>\r\n            <button class='btn btn-danger' (click)='onDelete()'>Delete Account</button>\r\n        </div>\r\n\r\n        <!-- profile picture -->\r\n        <form [formGroup]=\"form\" (submit)=\"onSubmit()\">\r\n            <div>\r\n                <button class='btn btn-danger' type=\"button\" (click)=\"filePicker.click()\">Change Profile Picture</button>\r\n                <input class='hidden' type=\"file\" #filePicker (change)=\"onImagePicked($event)\">\r\n            </div>\r\n        \r\n            <div class=\"image-preview\" *ngIf=\"imagePreview !== '' && imagePreview && form.get('image').valid\">\r\n                <img [src]=\"imagePreview\" [alt]=\"form.value.title\">\r\n            </div>\r\n\r\n            <button *ngIf=\"form.valid\" class='btn btn-danger' color=\"accent\" type=\"submit\">Submit</button>\r\n        </form>\r\n\r\n    <!-- no wifi or user not found -->\r\n    <div *ngIf='!User'>\r\n        Error: User not found\r\n    </div>\r\n    <button class=\"btn btn-secondary\" (click)='onExit()'>Back</button>   \r\n</div>","import { Component, OnInit } from '@angular/core'\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.component.html',\r\n  styleUrls: ['./map.component.scss']\r\n})\r\n\r\nexport class MapComponent implements OnInit {\r\n\r\n  session: boolean = this.sessionService.session()\r\n\r\n  constructor(private sessionService: SessionService, private map: MapService) {}\r\n\r\n  ngOnInit(){\r\n    this.map.buildMap()\r\n  }\r\n\r\n}\r\n","<link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet'/>\r\n<div id='mapbox'></div>\r\n","import { Pipe, PipeTransform } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'arrayToPipe'\r\n})\r\nexport class ArrayToPipePipe implements PipeTransform {\r\n\r\n  transform(value: unknown, ...args: unknown[]): unknown {\r\n    return Array(value).fill(args[0])\r\n  }\r\n\r\n}\r\n","export class CustomCoordinates {\r\n    lng: number\r\n    lat: number\r\n\r\n    /** 1: lng,lat | 2: lat,lng */\r\n    toStringReorder(order: number): string {\r\n        if (order === 1) {\r\n            return `${this.lng},${this.lat}`\r\n        } else {\r\n            return `${this.lat},${this.lng}`\r\n        }\r\n    }\r\n\r\n    constructor(lng: number, lat: number) {\r\n        this.lng = lng\r\n        this.lat = lat\r\n    }\r\n\r\n}\r\n","import { geocodeResponseModel } from './../../../../models/geocodeResp.model'\r\nimport { SearchBarComponent } from './../../../search-bar/search-bar.component'\r\nimport { CustomCoordinates } from './../../../../models/coordinates'\r\nimport { MapService } from './../../../../services/map/map.service'\r\nimport { CategoryNode, foursquareCategory } from './../../../../models/CategoryNode.model'\r\nimport { SearchService } from './../../../../services/search.service'\r\nimport { tripModel } from './../../../../models/trip.model'\r\nimport { TripService } from './../../../../services/trip.service'\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { Subscription } from 'rxjs'\r\nimport { CitySearchComponent } from './../../../city-search/city-search.component'\r\nimport { Component, OnInit, ViewChild, AfterViewInit, OnDestroy, Inject } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'app-add-venue-popover',\r\n  templateUrl: './add-venue-popover.component.html',\r\n  styleUrls: ['./add-venue-popover.component.scss']\r\n})\r\nexport class AddVenuePopoverComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  // user data from tripService\r\n  allTrips: tripModel[] = []\r\n  private trips_sub: Subscription\r\n\r\n  // passed by mytrip\r\n  tripIndex: number\r\n  dayIndex: number\r\n  venueIndex: number|null\r\n\r\n  // foursquare venues categories\r\n  foursquareCategory_sub: Subscription\r\n  defaultCategory = 'All'\r\n  venueCategories: foursquareCategory[] = []\r\n\r\n  // for database venue search\r\n  @ViewChild(SearchBarComponent) SearchBarComponent: SearchBarComponent\r\n  searchVenueForm: FormGroup\r\n  mapCenter_sub: Subscription\r\n  searchUrlCoord: CustomCoordinates\r\n\r\n  // for custom add venue\r\n  @ViewChild('citySearch') CitySearchComponent: CitySearchComponent\r\n  private selectedOption_sub: Subscription\r\n  selectedOption: geocodeResponseModel\r\n  citySearchAppearance = 'outline'\r\n  citySearchPlaceholder = 'Search for a City'\r\n  customVenueForm: FormGroup\r\n\r\n  // for component visual\r\n  isLoading = false\r\n  isLoaded: boolean\r\n  isErr = false\r\n\r\n  constructor(private SearchService: SearchService,\r\n              private TripService: TripService,\r\n              private MapService: MapService,\r\n              public dialogRef: MatDialogRef<AddVenuePopoverComponent>,\r\n              @Inject(MAT_DIALOG_DATA) public data: {\r\n                tripIndex: number\r\n                scheduleIndex: number\r\n                venueIndex: number|null\r\n                venueName: string\r\n                venuePrice: number\r\n                venueCity: string\r\n                venueAddress: string\r\n              }) {\r\n    this.tripIndex = data.tripIndex\r\n    this.dayIndex = data.scheduleIndex\r\n    this.venueIndex = data.venueIndex\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.isLoaded = false\r\n\r\n    // sets mat select venue category options\r\n    this.foursquareCategory_sub =  this.SearchService.categoryTree.subscribe((cats: foursquareCategory[]) => {\r\n      this.venueCategories = cats\r\n    })\r\n\r\n    // gets user trips from trip service\r\n    this.trips_sub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.allTrips = trips\r\n    })\r\n\r\n    // get map center from map service\r\n    this.mapCenter_sub = this.MapService.fakeCenter.subscribe((coord: CustomCoordinates) => {\r\n      this.searchUrlCoord = coord\r\n    })\r\n\r\n    this.searchVenueForm = new FormGroup({\r\n      name: new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(25)])\r\n    })\r\n\r\n    this.customVenueForm = new FormGroup({\r\n      name: new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(25)]),\r\n      address: new FormControl(null),\r\n      price: new FormControl(null),\r\n      url: new FormControl(null)\r\n    })\r\n\r\n    // fill form if user is editing venue\r\n    if (this.venueIndex != null) {\r\n      this.customVenueForm.get('name').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].name ? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].name : '')\r\n      this.customVenueForm.get('address').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueAddress ? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueAddress : '')\r\n      this.customVenueForm.get('price').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].price ? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].price : 0)\r\n      this.customVenueForm.get('url').patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].url ? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].url : '')\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // selected option from autosuggest\r\n    this.selectedOption_sub = this.CitySearchComponent.clickedOption.subscribe((location) => {\r\n      if (location) {\r\n        this.selectedOption = location\r\n        this.CitySearchComponent.myControl.patchValue(location.name)\r\n      }\r\n    })\r\n\r\n    // fill form if user is editing venue\r\n    if (this.venueIndex != null) {\r\n      this.CitySearchComponent.myControl.patchValue(this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueCity ? this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex].venueCity : '')\r\n    }\r\n  }\r\n\r\n  /** when user searches venues from foursquare */\r\n  onSubmitSearch() {\r\n    this.isLoading = true\r\n    if (this.SearchBarComponent.searchBarForm.valid) {\r\n      this.isLoading = false\r\n      this.dialogRef.close()\r\n    }\r\n    this.isLoading = false\r\n  }\r\n\r\n  /** update when user adds custom venue */\r\n  onSubmitCustom() {\r\n    if (this.customVenueForm.valid) {\r\n      let url: any = null\r\n      for (const category of this.venueCategories) {\r\n        if (category.name === this.defaultCategory) {\r\n          url = category.icon.prefix + '32' + category.icon.suffix\r\n          break\r\n        }\r\n      }\r\n\r\n      // if edit venue\r\n      if (this.venueIndex != null) {\r\n        this.allTrips[this.tripIndex].schedule[this.dayIndex].venues[this.venueIndex] = {\r\n          name: this.customVenueForm.get('name').value,\r\n          venueCity: this.CitySearchComponent.myControl.value ? this.CitySearchComponent.removeMiddle(this.CitySearchComponent.myControl.value, 0) : '',\r\n          venueCoord: {lng: this.selectedOption.content.geometry.coordinates[0], lat: this.selectedOption.content.geometry.coordinates[1]},\r\n          venueAddress: this.customVenueForm.get('address').value ? this.customVenueForm.get('address').value : '',\r\n          price: this.customVenueForm.get('price').value ? this.customVenueForm.get('price').value : 0,\r\n          category: url ? {name: this.defaultCategory, url} : null,\r\n          url: this.customVenueForm.get('url').value ? this.customVenueForm.get('url').value : ''\r\n        }\r\n      } else {\r\n        // if add venue\r\n        this.allTrips[this.tripIndex].schedule[this.dayIndex].venues.push({\r\n          name: this.customVenueForm.get('name').value,\r\n          venueCity: this.CitySearchComponent.myControl.value ? this.CitySearchComponent.removeMiddle(this.CitySearchComponent.myControl.value, 0) : '',\r\n          venueCoord: {lng: this.selectedOption.content.geometry.coordinates[0], lat: this.selectedOption.content.geometry.coordinates[1]},\r\n          venueAddress: this.customVenueForm.get('address').value ? this.customVenueForm.get('address').value : '',\r\n          price: this.customVenueForm.get('price').value ? this.customVenueForm.get('price').value : 0,\r\n          category: url ? {name: this.defaultCategory, url} : null,\r\n          url: this.customVenueForm.get('url').value ? this.customVenueForm.get('url').value : ''\r\n        })\r\n      }\r\n      this.TripService.modifyBackend(this.allTrips)\r\n      .then((response) => {\r\n        this.TripService.updateLocal(this.allTrips)\r\n        setTimeout(() => {\r\n          this.dialogRef.close()\r\n        }, 500)\r\n      })\r\n      .catch((err) => {\r\n        this.isErr = true\r\n      })\r\n      .finally(() => {\r\n        this.isLoading = false\r\n        this.isLoaded = true\r\n      })\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.selectedOption_sub.unsubscribe()\r\n    this.trips_sub.unsubscribe()\r\n    this.foursquareCategory_sub.unsubscribe()\r\n    this.mapCenter_sub.unsubscribe()\r\n  }\r\n}\r\n","    <mat-card>\r\n    <mat-card-header>\r\n        <mat-card-title>{{venueIndex != null? 'Edit' : 'Add'}} Venue for Day {{dayIndex + 1}}</mat-card-title>\r\n    </mat-card-header>\r\n    <br>\r\n    <mat-card-content>\r\n        <mat-tab-group dynamicHeight mat-align-tabs=\"center\">\r\n            <!-- Search Venue -->\r\n            <mat-tab id=\"theTab\" *ngIf='venueIndex === null'>\r\n                <!-- <form\r\n                    [formGroup]='searchVenueForm'\r\n                    (ngSubmit)='onSubmitSearch()'>\r\n                    <ng-template mat-tab-label>\r\n                        <label matTooltip=\"Search Venue in Database\" style=\"margin: 0;\">Search</label>\r\n                    </ng-template>\r\n                    <br>\r\n                    <mat-form-field appearance='outline' style=\"margin: 0; padding: 0;\">\r\n                        <mat-label>Search Venue</mat-label>\r\n                        <input formControlName='name' matInput type=\"text\" >\r\n                        <small class=\"text-danger\" *ngIf=\"!searchVenueForm.get('name').valid && searchVenueForm.get('name').touched\">name must be between 1 and 25 characters</small>\r\n                    </mat-form-field>\r\n                    &nbsp;\r\n                    <mat-form-field appearance='fill'>\r\n                        <mat-label>Category</mat-label>\r\n                        <mat-select [(value)]='defaultCategory'>\r\n                            <mat-option value='All'>All</mat-option>\r\n                            <mat-option *ngFor='let category of venueCategories' [value]='category.name'>{{category.name}}</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                    <br>\r\n                    <span class=\"row container-fluid\">\r\n                        <button mat-raised-button class=\"col-auto\" color='primary' [disabled]='isLoading'>Search</button>\r\n                        &nbsp;\r\n                        <mat-spinner *ngIf='isLoading' class=\"col-auto align-self-center\" diameter='30' color='primary'></mat-spinner>                        \r\n                    </span>\r\n                </form> -->\r\n                <form\r\n                    (ngSubmit)='onSubmitSearch()'\r\n                    class=\"container-fluid\" style=\"padding: 0;\">\r\n                    <ng-template mat-tab-label>\r\n                        <label matTooltip=\"Search Venue in Database\" style=\"margin: 0;\">Search</label>\r\n                    </ng-template>\r\n                    <br>\r\n                    <app-search-bar isChild='true' style=\"padding: 0; margin-left: 0; margin-right: 0; width: 100%;\" (submission)='onSubmitSearch()'></app-search-bar>\r\n                </form>\r\n            </mat-tab>\r\n            <!-- Custom Venue -->\r\n            <mat-tab>\r\n                <form \r\n                    #customForm\r\n                    [formGroup]='customVenueForm'\r\n                    (ngSubmit)='onSubmitCustom()'>\r\n                    <ng-template mat-tab-label >\r\n                        <label style=\"margin: 0;\">Custom</label>\r\n                        &nbsp;\r\n                        <mat-icon matTooltip=\"Add Custom Venue\">info</mat-icon>\r\n                    </ng-template>\r\n                    <br>\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Venue Name*</mat-label>\r\n                        <input matInput type=\"text\" autocomplete=\"off\" formControlName='name'>\r\n                        <small class=\"text-danger\" *ngIf=\"!customVenueForm.get('name').valid && customVenueForm.get('name').touched\">Name must be between 1 and 20 characters</small>\r\n                    </mat-form-field>\r\n                    &nbsp;\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Category</mat-label>\r\n                        <mat-select [(value)]='defaultCategory'>\r\n                            <mat-option value='All'>All</mat-option>\r\n                            <mat-option *ngFor='let category of venueCategories' [value]='category.name'>{{category.name}}</mat-option>\r\n                        </mat-select>\r\n                    </mat-form-field>\r\n                    <hr style=\"margin-top: 0;\">\r\n                    <app-city-search #citySearch [appearance]='citySearchAppearance' [placeholder]='citySearchPlaceholder'></app-city-search>\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Street Address</mat-label>\r\n                        <input matInput type='text' autocomplete=\"street-address\" formControlName='address'>\r\n                    </mat-form-field>\r\n                    <br>\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Price</mat-label>\r\n                        <input matInput type='number' formControlName='price'>\r\n                    </mat-form-field>\r\n                    &nbsp;\r\n                    <mat-form-field appearance='outline'>\r\n                        <mat-label>Website Url</mat-label>\r\n                        <input matInput type='url' formControlName='url'>\r\n                    </mat-form-field>\r\n                    <span class=\"row container-fluid\">\r\n                    <button \r\n                        class=\"col-auto\"\r\n                        mat-raised-button\r\n                        matTooltip='add custom Venue'\r\n                        color='primary'\r\n                        [disabled]='isLoading'>\r\n                        Add\r\n                    </button>\r\n                    &nbsp;\r\n                    <mat-spinner *ngIf='isLoading' class=\"col-auto align-self-center\" diameter='30' color='primary'></mat-spinner>\r\n                    </span>\r\n                    &nbsp;\r\n                    <span>\r\n                        <small *ngIf='isLoaded && !isErr' class=\"text-success\">New Venue added Succesfully!</small>\r\n                    </span>\r\n                </form> \r\n            </mat-tab>\r\n        </mat-tab-group>\r\n    </mat-card-content>\r\n    <mat-card-actions>\r\n    </mat-card-actions>\r\n</mat-card>\r\n","import * as Mapboxgl  from 'mapbox-gl'\r\nimport { geocodeResponseModel } from './../../models/geocodeResp.model'\r\nimport { OpenstreetmapService } from './openstreetmap.service'\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { CustomCoordinates } from './../../models/coordinates'\r\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs'\r\nimport { Injectable, OnInit, Input, OnDestroy } from '@angular/core'\r\nimport { environment } from 'src/environments/environment'\r\nimport { GeoJsonTypes } from 'geojson'\r\n\r\n\r\nexport class featureGEOJSONModel {\r\n  public type: String\r\n  public geometry: {\r\n    type: String,\r\n    coordinates: number[]\r\n  }\r\n  public properties?: {\r\n    [key: string]: any\r\n    title: string\r\n    icon?: string\r\n  }\r\n\r\n  constructor(title: string, coordinates: number[]) {\r\n    this.type = 'Feature'\r\n    this.geometry = {\r\n      type: 'Point',\r\n      coordinates\r\n    }\r\n    this.properties = {\r\n      title,\r\n      'marker-color': '#3c4e5a',\r\n      'marker-symbol': 'marker-15',\r\n      'marker-size': 'large',\r\n    }\r\n  }\r\n}\r\n\r\nexport interface clickLocationCoordinates {\r\n  [key: string]: any\r\n  lng: number\r\n  lat: number\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MapService implements OnDestroy{\r\n  citySearchPresent: boolean = null\r\n\r\n  private _fakeCenter: BehaviorSubject<mapboxgl.LngLatLike | CustomCoordinates> = new BehaviorSubject(null)\r\n  public fakeCenter: Observable<mapboxgl.LngLatLike | CustomCoordinates> = this._fakeCenter.asObservable()\r\n\r\n  private _fakeCenterCity: BehaviorSubject<{[key: string]: any}> = new BehaviorSubject({})\r\n  public fakeCenterCity: Observable<{[key: string]: any}> = this._fakeCenterCity.asObservable()\r\n\r\n\r\n  lngOffset: number\r\n  map: Mapboxgl.Map\r\n  venueLocation: Mapboxgl.Marker\r\n\r\n  private _clickLocation: BehaviorSubject<clickLocationCoordinates> = new BehaviorSubject({\r\n    lat: null,\r\n    lng: null\r\n  })\r\n  clickLocation: Observable<clickLocationCoordinates> = this._clickLocation.asObservable()\r\n\r\n  private Places: Array<featureGEOJSONModel[]> = [[], []]\r\n\r\n  private sidebarWidth_sub: Subscription\r\n  sidebarWidth: number\r\n\r\n  constructor(private SessionService: SessionService,\r\n              private OpenstreetmapService: OpenstreetmapService) {\r\n    (Mapboxgl as any).accessToken = environment.mapbox.token\r\n\r\n    this.sidebarWidth_sub = this.SessionService.sidebarWidth.subscribe((w: number) => {\r\n      this.sidebarWidth = w\r\n    })\r\n  }\r\n\r\n  buildMap() {\r\n    this.map = new Mapboxgl.Map({\r\n      container: 'mapbox', // container id\r\n      style: 'mapbox://styles/travelnet/ck99afyp80hhu1iqrodjf1brl',\r\n      center: [-71.22, 46.85], // starting position\r\n      zoom: 2, // starting zoom\r\n      failIfMajorPerformanceCaveat: true, // map creation will fail\r\n      // if the performance of Mapbox GL JS\r\n      pitchWithRotate: false,\r\n      dragRotate: false,\r\n    })\r\n    // this._clickLocation = new BehaviorSubject(`${this.map.getCenter().lng},${this.map.getCenter().lat}`)\r\n    // this.clickLocation = this._clickLocation.asObservable()\r\n\r\n    this.map.on('load', () => {\r\n      // init center observable\r\n      this.getCenter()\r\n      this.getFakeCenter()\r\n\r\n      this.map.on('click', (e) => {\r\n        const lng = e.lngLat.lng\r\n        const lat = e.lngLat.lat\r\n        this._clickLocation.next({\r\n          lng,\r\n          lat\r\n        })\r\n      })\r\n    })\r\n\r\n    // update fake center of map\r\n    this.map\r\n    .on('zoomend', () => {\r\n      this.getFakeCenter()\r\n    })\r\n    .on('moveend', () => {\r\n      this.getFakeCenter()\r\n    })\r\n\r\n  }\r\n\r\n  addGeoJsonSource(id: string, type: any, content: any[]) {\r\n    this.map.addSource(id, {\r\n      type: 'geojson',\r\n      data: {\r\n        type,\r\n        features: content\r\n      }\r\n    })\r\n  }\r\n\r\n  addLayer(id: string, type: any, source: string, layout?: {[key: string]: any}, paint?: {[key: string]: any}) {\r\n    this.map.addLayer({\r\n      id,\r\n      type,\r\n      source,\r\n      layout,\r\n      paint\r\n    })\r\n  }\r\n\r\n  addMarker(location: {[key: string]: any}) {\r\n    const coord: mapboxgl.LngLatLike = {\r\n      lng: location.lng,\r\n      lat: location.lat\r\n    }\r\n    this.venueLocation = new Mapboxgl.Marker()\r\n    .setLngLat(coord)\r\n    .addTo(this.map)\r\n    coord.lng -= this.lngOffset\r\n    this.map.flyTo({ center: coord, speed: 0.8, curve: 1, essential: true })\r\n  }\r\n\r\n  /** gets middle point between sidebar and right side of screen */\r\n  getFakeCenter(sidebar: number = this.sidebarWidth) {\r\n    let centerPoints: any\r\n    if (sidebar < 500) {\r\n      centerPoints = this.map.unproject([window.innerWidth / 2, window.innerHeight / 2])\r\n    }\r\n    else {\r\n      centerPoints = this.map.unproject([(window.innerWidth - sidebar) / 2 + sidebar, window.innerHeight / 2])\r\n    }\r\n    const realCenter: mapboxgl.LngLatLike = this.map.getCenter()\r\n    centerPoints = new CustomCoordinates(centerPoints.lng, centerPoints.lat)\r\n    this.lngOffset = centerPoints.lng - realCenter.lng\r\n    // update coord at fake center\r\n    this._fakeCenter.next(centerPoints)\r\n\r\n    if (this.citySearchPresent) {\r\n      // get name of city at fake center\r\n      this.OpenstreetmapService.reverseSearch(centerPoints.lng, centerPoints.lat)\r\n      .subscribe((response) => {\r\n        this._fakeCenterCity.next(response)\r\n      }, err => {\r\n        console.log(err)\r\n        this._fakeCenterCity.next(err)\r\n      })\r\n    }\r\n  }\r\n\r\n  /** return coordinates [lng, lat] at center of screen if not found -> montreal*/\r\n  getCenter(): CustomCoordinates {\r\n    const lng: number = this.map.getCenter().lng ? this.map.getCenter().lng : environment.montrealCoord.lng\r\n    const lat: number = this.map.getCenter().lat ? this.map.getCenter().lat : environment.montrealCoord.lat\r\n    return new CustomCoordinates(lng, lat)\r\n  }\r\n\r\n  /** highlight selected coutries when register */\r\n  showMarker(target: number, input?: geocodeResponseModel, style?: URL) {\r\n    if (!input && this.map.getSource('points') && this.Places[target - 1]) {\r\n      (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n        {\r\n          type: 'FeatureCollection',\r\n          features: this.Places[target - 1] as any\r\n        }\r\n      )\r\n    } else if (input) {\r\n      this.Places[target - 1].push(new featureGEOJSONModel(input.name, input.content.geometry.coordinates))\r\n      const coord: mapboxgl.LngLatLike = {\r\n        lng: input.content.geometry.coordinates[0],\r\n        lat: input.content.geometry.coordinates[1]\r\n      }\r\n      coord.lng -= this.lngOffset\r\n      this.map.flyTo({ center: coord, speed: 0.8, curve: 1, essential: true })\r\n      if (this.map.getSource('points')) {\r\n        // update points\r\n        (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n          {\r\n            type: 'FeatureCollection',\r\n            features: this.Places[target - 1] as any\r\n          }\r\n        )\r\n      } else {\r\n        // add first point\r\n        this.map.addSource('points', {\r\n          type: 'geojson',\r\n          data: {\r\n            type: 'FeatureCollection',\r\n            features: [\r\n              {\r\n                type: 'Feature',\r\n                geometry: {\r\n                  type: 'Point',\r\n                  coordinates: [\r\n                    input.content.geometry.coordinates[0],\r\n                    input.content.geometry.coordinates[1],\r\n                  ]\r\n                },\r\n                properties: {\r\n                  title: input.name,\r\n                  'marker-color': '#3c4e5a',\r\n                  'marker-symbol': 'marker-15',\r\n                  'marker-size': 'large',\r\n                }\r\n              },\r\n            ]\r\n          }\r\n        })\r\n\r\n      }\r\n    }\r\n    if (!this.map.getLayer('points') && this.map.getSource('points')) {\r\n      this.map.addLayer({\r\n        id: 'points',\r\n        type: 'symbol',\r\n        source: 'points',\r\n        layout: {\r\n          // get the icon name from the source's \"icon\" property\r\n          // concatenate the name to get an icon from the style's sprite sheet\r\n          'icon-image': ['get', 'marker-symbol'],\r\n          // get the title name from the source's \"title\" property\r\n          'text-field': ['get', 'title'],\r\n          'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\r\n          'text-offset': [0, 0.6],\r\n          'text-anchor': 'top'\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  // remove markers on map\r\n  removeMarker(name: string, target: number, all?: boolean) {\r\n    if (all) {\r\n      this.Places[target - 1] = []\r\n      if (this.map.getSource('points')) {\r\n        (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n          {\r\n            type: 'FeatureCollection',\r\n            features: []\r\n          }\r\n        )\r\n      }\r\n    } else {\r\n      for (let x = 0; x < this.Places[target - 1].length; x++) {\r\n        if (this.Places[target - 1][x].properties.title == name) {\r\n          this.Places[target - 1].splice(x, 1) as any;\r\n          (this.map.getSource('points') as Mapboxgl.GeoJSONSource).setData(\r\n            {\r\n              type: 'FeatureCollection',\r\n              features: this.Places[target - 1] as any\r\n            }\r\n          )\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  venueOnDestroy() {\r\n    if (this.venueLocation) {\r\n      this.venueLocation.remove()\r\n    }\r\n  }\r\n  ngOnDestroy() {\r\n    this.sidebarWidth_sub.unsubscribe()\r\n  }\r\n}\r\n","import { SocketService } from './chatsystem/socket.service'\r\nimport { Injectable } from '@angular/core'\r\nimport { BehaviorSubject, Observable} from 'rxjs'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class SessionService {\r\n\r\n  // observable for login state\r\n  private _sessionState: BehaviorSubject<boolean> = new BehaviorSubject(false)\r\n  public sessionState: Observable<boolean> = this._sessionState.asObservable()\r\n\r\n  private _sidebarWidth: BehaviorSubject<number> = new BehaviorSubject(window.innerWidth * .4)\r\n  public sidebarWidth: Observable<number> = this._sidebarWidth.asObservable()\r\n\r\n  constructor(private SocketService: SocketService) { }\r\n\r\n  getRoomName(roomName: string) {\r\n    if (roomName.replace(`${sessionStorage.getItem('username')},`, '').includes(roomName)) {\r\n      return roomName.replace(`,${sessionStorage.getItem('username')}`, '')\r\n    } else {\r\n      return roomName.replace(`${sessionStorage.getItem('username')},`, '')\r\n    }\r\n  }\r\n\r\n  session(): boolean {\r\n    if (sessionStorage.getItem('username')) {\r\n      this._sessionState.next(true)\r\n      return true\r\n    } else {\r\n      this._sessionState.next(false)\r\n      return false\r\n    }\r\n  }\r\n\r\n  updateSidebarWidth(width: number) {\r\n    this._sidebarWidth.next(width)\r\n  }\r\n}\r\n","import { tripModel } from './../../../../models/trip.model'\r\nimport { Subscription } from 'rxjs'\r\nimport { TripService } from './../../../../services/trip.service'\r\nimport { Component, OnInit, OnDestroy, ViewChild, AfterViewInit, Output, EventEmitter } from '@angular/core'\r\nimport { MatSelectionList, MatListOption } from '@angular/material/list'\r\n\r\n@Component({\r\n  selector: 'app-add-to-trip-popover',\r\n  templateUrl: './add-to-trip-popover.component.html',\r\n  styleUrls: ['./add-to-trip-popover.component.scss']\r\n})\r\nexport class AddToTripPopoverComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild(MatSelectionList) MatSelectionList: MatSelectionList\r\n  @Output() onSubmitEvent = new EventEmitter<MatListOption[]>()\r\n  trips: tripModel[] = null\r\n  trip_sub: Subscription\r\n\r\n  constructor(private TripService: TripService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.trip_sub = this.TripService.trips.subscribe((trips: tripModel[]) => {\r\n      this.trips = trips\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  onSubmit() {\r\n    this.onSubmitEvent.emit(this.MatSelectionList.selectedOptions.selected)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.trip_sub.unsubscribe()\r\n  }\r\n\r\n}\r\n","<mat-label>\r\n    <h2>Select Where You Want To Add This Venue</h2>\r\n</mat-label>\r\n<mat-accordion>\r\n    <mat-expansion-panel *ngFor='let trip of trips, let i = index'>\r\n        <mat-expansion-panel-header>\r\n            <mat-panel-title>\r\n                {{ trip.tripName }}\r\n            </mat-panel-title>\r\n            <mat-panel-description>\r\n                {{ trip.dateRange.start | date }} &mdash; {{ trip.dateRange.end | date }}\r\n            </mat-panel-description>\r\n        </mat-expansion-panel-header>\r\n        <mat-selection-list #days>\r\n            <mat-accordion>\r\n                <mat-expansion-panel *ngFor='let day of trip.schedule, let j = index' #panel>\r\n                    <mat-expansion-panel-header>\r\n                        <mat-list-option (click)='panel.toggle()' [value]='{trip: i, day: j}' style=\"margin-right: 1em;\">\r\n                            {{ day.day | date}}\r\n                        </mat-list-option>\r\n                    </mat-expansion-panel-header>\r\n                    <mat-table [dataSource]=\"trip.schedule[j].venues\" class=\"mat-elevation-z8\">\r\n                        <!-- category -->\r\n                        <ng-container matColumnDef=\"category\">\r\n                            <mat-header-cell *matHeaderCellDef> Category </mat-header-cell>\r\n                            <mat-cell *matCellDef=\"let element\">\r\n                                <button mat-mini-fab color='primary' style=\"box-shadow: none;\" *ngIf='element.category' matTooltip='{{element.category.name}}'>\r\n                                    <img src=\"{{element.category.url}}\" alt=\"\" style=\"margin-top: -0.3em;\">\r\n                                </button>\r\n                            </mat-cell>\r\n                        </ng-container>\r\n\r\n                        <!-- Name Column -->\r\n                        <ng-container matColumnDef=\"name\">\r\n                          <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>\r\n                          <mat-cell *matCellDef=\"let element\"> {{element.name}} </mat-cell>\r\n                        </ng-container>\r\n                      \r\n                        <!-- Price Column -->\r\n                        <ng-container matColumnDef=\"price\">\r\n                          <mat-header-cell *matHeaderCellDef> price </mat-header-cell>\r\n                          <mat-cell *matCellDef=\"let element\"> {{element.price}} </mat-cell>\r\n                        </ng-container>\r\n\r\n                      \r\n                        <mat-header-row *matHeaderRowDef=\"['category', 'name', 'price']\"></mat-header-row>\r\n                        <mat-row *matRowDef=\"let row; columns: ['category', 'name', 'price']\"></mat-row>\r\n                      </mat-table>\r\n                </mat-expansion-panel>\r\n            </mat-accordion>\r\n        </mat-selection-list>\r\n    </mat-expansion-panel>\r\n</mat-accordion>\r\n<br>\r\n<span class=\"container-fluid justify-content-end\">\r\n    <button mat-raised-button color='primary' (click)='onSubmit()'>\r\n        add\r\n    </button>\r\n</span>","import { HttpService } from 'src/app/services/http.service'\r\nimport { userModel } from 'src/app/models/user.model'\r\nimport { Component, OnInit, Input } from '@angular/core'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { Router } from '@angular/router'\r\n\r\n@Component({\r\n  selector: 'app-userbutton',\r\n  templateUrl: './userbutton.component.html',\r\n  styleUrls: ['./userbutton.component.scss']\r\n})\r\nexport class UserbuttonComponent implements OnInit {\r\n  pathID: string\r\n  searchResult: any\r\n  @Input() result: userModel\r\n  selfUsername: string = localStorage.getItem('username')\r\n\r\n  constructor(\r\n    private searchservice: SearchService,\r\n    private router: Router,\r\n    private HttpService: HttpService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.result)\r\n    this.searchResult = this.result\r\n    this.pathID = '/search/user/' + this.result.username\r\n  }\r\n\r\n  navigate() {\r\n    console.log(this.result)\r\n    this.router.navigate([this.pathID])\r\n  }\r\n\r\n  // follow button\r\n  onFollow() {\r\n    // update database\r\n    this.HttpService.post('/user/follow', {\r\n      username: localStorage.getItem('username'),\r\n      followed: this.result.username\r\n    }).then((res) => {\r\n      // add the follower in current content\r\n      this.result.followers.push(localStorage.getItem('username'))\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // unfollow button\r\n  onUnfollow() {\r\n    // update database\r\n    this.HttpService.post('/user/unfollow', {\r\n      username: localStorage.getItem('username'),\r\n      unfollowed: this.result.username\r\n    }).then((res) => {\r\n      // remove the follower from current content\r\n      this.result.followers.splice(this.result.followers.indexOf(localStorage.getItem('username')), 1)\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\n","<mat-card *ngIf=\"searchResult.username\">\r\n  <mat-card-header (click)='navigate()' class='mainCard'>\r\n    <img\r\n    mat-card-avatar\r\n    src=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEhUQEhMVFRUVFRUXGBUVFRcVFRcVFRUWFhUVFxUYHiggGBolGxUVITEhJSorLi4uFx8zODMtNygtLisBCgoKDg0OFRAQFysdFR0rLSsrLS0rKy0rLSstLTctLSstKy0tLS0rKzEtLS03Ky0tLTctKystLSsrKy0rLSsrK//AABEIARAAuQMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAAAQMEBQYHAgj/xABFEAABAwIDBAYGBggGAgMAAAABAAIDBBEFEiEGMUFREyJhcYGRBzJCUqGxFCNicsHRFRZTkpOi4fAkM0NUgrJjczTS4v/EABoBAQEBAQEBAQAAAAAAAAAAAAABAgMEBQb/xAAkEQEBAAICAgICAgMAAAAAAAAAAQIRAxIhMQRBMlETIgVSYf/aAAwDAQACEQMRAD8A7ehIhApSJUiBUJEqAQhIgVIhKgAhIhAqEiECoQkugVCRCBUISIFQhIgVIlQgRCEIFSIQgEICEAke4AEncBfyXpVO01TkgcOLhbwGpQN02PsLrOsAdx/NXLTfUblyAVfG60Gz+0bmEMJu3kfwPAqbXTfoUODFInkBrt/wPI8ipiqFSJUIESpEIBKkSoEQhKgRCEIBLdIhAIQhAIQhAJUiVALD7Y1+Z5YDo0ZfH2vyWyrKgRsdIdzQSuQ4vW5nHrC5JJ1QRzGTuBtzsmDcL1Tzlp0eO4nRT2lr+V1NN7OYdjJaQH303OG8fmF0rA8UbOwaguHLiOa5VNRclJwiplgeHMO47uHah7dfQq/BsVZUMzN0cPWbxB/JWCrAQhCBUFCCgEJEIFSJUIEQlQgEJmSpY05S4A8rp5AiVCEAgIQgiYjQNmaGPJyXuQNM1twJ5LxTYRTxizIY29zB8Ta5UbHMcbCMrQHScG3sB2uP4b1hMX2gqL9aoc3sZZgHl+abWR0afDYXiz4o3d7Gn8Fn8V2LoXC9jAeBY62vY03B7lX7MUFdKWzGpmZDvGeznSdzXXyt7StrDSMaS613He46u8zu7gqjBt2PqmuyskjkjO50mZjx3tsbp87Ez/tox4O/JbtzgBcmw58PNUddtbRxHKZQ53KMF/xGiiqak2Xq4nB7Jorjj1x4bty11G6TL9YGh3HKbtPaOKzo24gPqsee+w+Cei2vicfUd5goarSIUairmSi7D3jiFIRCoQhAIshCAQhCAQhCChbEXuYDfMTdzgRYa3I+SvgslhNRJGbljuAIIy/u81rGm4usYW/aQqEIW1C8yOsCeQuvSi4pJlhkdyafjogyOETxSSyNlYHdXNrwFzfvKqNlNmPpVRJVStd9GZIehY8ayWPtA+wPjZPvw5jsuXM2ZxDA5riN548wugRRtijDRZrWN3k2AA4k/ipG8vBySRrGlziGtaLkkgNAHM7gsHjnpHaCWUbRJb/Vd/l/8GjV3ebDvWM9IG1f02Ysjl/wkZAA9Vsjx6zzfVzb7uGl1R09azcLuPJjS8/yhVJi0NdilRUG88rnj3QcrB/xGi8MFtLJmmbUOHUo53drgIx/MpToa4D/AOJG3707b/AKWtzENKeheVVVMtYzfSsP3ZwfwTDcclb69LKO0EEKGm+2fxMxvBO7ce0LojTcXC4ZR7SRk6skb3tv8l13ZbEWz0zHtOa3VJ7W/wBhVnJbpEqRVgqEIQCEIQCS6j4lU9FE+S18rSbdy5/+tlX+zd5f0QdGjcHC4sQvapqGriiiuHFwFrnj32KuGm4B5rOOW0KhCQrSlVLtfWthpXvdqLsFhvJLhoFdKh25pDLRTAes0Z297Df5XQc8wOqxaomZUQwQxQNcdZjdxuLEhrTvsVabQ1FfO11PNPGyN4s4QMIcWne0vcdL9gV3gdB0UEMMVyCxrib8xckr1XuhYdS15G+x3FYtdpGJw/ZmlZa0DXW3GS7z5HT4LSUkwYMrQ1nY0AfJRqrGWbgwA8xdU7643LiVi11mLUueTxuostIXKnjx/LvITh2oYOOvY0u+SFj1VU7m723C8vDTE5thqOWu5Mx7Si+57u9jh8wnMQqWvaHMjcPeHZ3KssrNBkNiuo+i+P8Aw0juDpjbwa0Fc8xyIsYyQggXO8EWvuXR/Rgb0ZP/AJX/ACaF0jlm15SJUKuYQi6EAhCEEHGY80LmlwaDlzOJsAzMM+v3bqs/WXDP9zT/AL7VZ47h4qKeanOnSRvZ5iw+Nlzz9UJf9lD/ACINFsxhELrvYXvZpcvdfM5puNNy0VXiDWOEY1cdwsbd5svNHPE2HNGLMY09W1iLDUEb7rJDHLS5yHNc73txHAblw30nhm3TWYfXGRz26HJoSAbX5X4qwVZgnqk5A25voLX5lWZXXG7kWBR6+oZHG+SQgMa0lxOoDba6KQoGP0vS000XvxvHiWm3xWmo57jW1EP0UQxdOGNDY3TMDWXyjRoc88lh21cBvZ1U/sdKwA95aCVJxSmfG+MuY0sdG1zPaYcwuSBuvw8FDqYyQLWHdZc5dvVcJJ4IcVtcMiaO1z5Xn/sB8EfpCYAG0Yv9i/8A2JUKeLLqtHRsliy5BlJYM1wNxG6zh/d1MrIuGO/aqOIVB9sAfZjjHyamX4lOTrPIB99wHkFcYjQno2zNFmlxY+3CQC+7gCCD4FVBpCNUmUXLD9G4qiQn/MlI1/1X2+as8PnySwylz+pLG43e43DXgkG513KHTwknddWYww5cx3E/JW5eUmPjy222O1kU9NLBGC94ka02HUAzA3Ltyr8G2mkoYY4GtbKxty5wBboSXHW+p15Kpw2MNhliAHWbcd41Vfh1VIWugkAOUEg2APjZXs5dI7rSVAkY2Ru5zQ4dxF06q/Z2ItpYWneI2/JWC24UqEIQCEIKCtxLFOjzNYx0jg25AsANLjM46C/isF+v1X/tm/xR+StNoNk31NW98tQ9sDshETHFuYhjWuzHwSfqDQ+5J/Fk/wDsvPlzatj14YcfWbWeEY2Gt+sFr66G+v4qpxRsRkM8ZABtmbrf7wHAdyk4Jsk3I4Tyl5duF/V7bqxw7ZCCN2bM57u0/BSY31t4dbWGzof0ZLhYE3bffaytVEnqCHNjYLkm55Bg3lS16JNRuBI5Kq3GauWMNMbWm5sS4kActeW9BmMb2fjZAI33c2PNkPEMJu0f8bkeAXOaqIZiGBxHBdRxfH80d4ywTRnrAEPAFte8Xtv5rGVW1lbewlaPuxsH4Ljf+PVxZ2xWU2BSSWORwbcXcW6W5C+89i12GUhklkmncGk2DWHSzWgBo8gFmXVFdKx8oe57gNCT8GhU9P8ApE3c5mbtJyO/qs6rp2jbVuFOvKGsc+GUAEMILmOabskaCdeII4gqnZgzCLfSYhbeHZ2OHe0tVJNhNbIcxkfH9lj2208Fa0GEkgmqAe42tqSQBxJ0Tqd06nwmBu+qb/wY5x8CbJvaCpjsyOHNlbvJsCSe5R3NEWg3cFXVE2YqyGWR6nmOV44kWCtdn8KM1Qy4uX+sR6rYwbu73HQeKp6Vps7KLkAkDmbaarq2yOBup2l8hHSPA0bq1rd9gTv7+5dJNvPlk0LRbRKhC6OIQhM1M4Y0uO4KW6Dj5AN5A4a80ksgaLk2CymKYk8u1acvYb2tr5pMRxmRzGRQtzyP014Ae07sC81+R71Ge8XklXHJJka4FwF7cbL30YWFdOYJMrJnskBHSXDXi+/qjgLb1o/1li/bD+GfzXDtMvOXtrHm8aZ/CpHtBMjiDaw1Lteak4e2oe4dETe+ridLdqKfA6ioN3ENYTv3WHdxK2mG0DIWBjBu3niTzK9GGFvmpidpoyAMxzOtqbWv/RPJEL06UJuoha9pY4AtcLEHcQU4hQYTEMFho+q2FoZKcvT3Jcwu3Nee02sdywddCQ8jcQbHzXc54GvaWPAc1wIIOoIPArmO2eD/AEeUOFyyQaE8HDe0lY66b47qqL9Llg6NhDdNXWuR3DiUzGYiesah1yNXTBp/dAsAquWmaXdYuDb3OU2KsGOwtg+sZGT9ouue+6unU8RSt1DHD7RqHA/kVXT7QMj0ZI82PqvOfwBsCFOjxvDGf5ccbe3IXJl2LRk/VjxIt5BTRdPUdf0rcxFj2pm6JpQdQmQ9NJtZYeQM/wB1dsw5+aKN3NjD/KFwmnlsHHsC63FizoW00AjvnhZ1r7jYAC3ErWLnm0aE3DewzWvbW25RK6vET2h2519bX1Vt0wkVlRkbmsT3LJ1WJmSYxEP77dQW1I/qpuJY203aXAN8iViMWxZr29HDnDQb3BJuePcvLy5XK6npzyyPVdRNK42kEWRxDWu1bJyF+BSyV9b0UrpC2na1u58dy87rNcN25Q8AyOmY9sbnOYbySuk6ke/c21r9hU6ucGslE9R08L9XdG8CRpvcdUaOHcuOpHNQYUZ52O6GlEu/NM4erpwcSNVB/R0n7N/8RajBZJIYAKYTdG/M5oewZnDiQ3eQq/8ASx/27/4L/wAlrtodnY0AWGgXpCF73oIlSJUAhCEAq/HcLbUwuidpfVruLXDcVYIKDg+0WFyU7+jeMrtdeDm8HNPJVDMPjdq75arsvpGw7paQvAu6Ih/bl3OHxv4Li8z7EhF3U2Ohgb2nt0TFUxo9UfFROmK8FxTweU2GS4TrxYZjoOZ3JqhebhjIzJI42a0C5PcPxXTdltgAC2orrSSDVsI1ijO/X3z8FNLtQ7E7KPqiJZGllPfjo6UDg0cG8zx4c1utr6hkH0ectByTAW3HLkcSB5BaMNtoOHyXM/SpiwMkdO0+oM7vvO0A8vmrpm10OirmTMEsbszSN/4HkVmtr6l7wGxX6puSAfhzWKwLF5INGnqu9ZvPtHarCWoqr5+mD4yeodzh9kjgVy5d2ajOV8HpMPFT1zIC5ltSLW03EBQJMDYwOkLpJsouWxdUb7WtvKky1n0dsrXkZ3EEAG3DXU6lV2FVrz0ksgJiYA8BpAOYHq34kdi8XXJykWroYGRs3MaBn+jgEZ3EadIT+Kp6yiJtnZAxkhv1ZNAeF7Ly2pilLjnfLNI4HKN3YGt7kV2GwxkSVrw02s2FhzVBA3DKNGeKsxv23MLTste7p2NJkfazAWbmgbsjR26q/wDpdd+0l/g//lZiKsqXDLSwGmi5tBdM8fakPqjuSfo2q/8AL+8/8116x0/hrtyRMGT6wNtvaSDfkRcEeIT69gEqLoQCEIQCEIQM1kAkjfGfaa5vmLLieMQZJHQysyvF9CLeIPELuSrMcwOCqZkmYDbc4aPb2tdwRY+f6iAAr1Q0z5pGwQszyONgBwHFzjwC31V6NusbVYydrLyDs0NitHstQ0tIDHHG5pO+aS2Z57SNw5BZaPbGbJx0TMxs+dw68lt32WcmrUheWBeytM1GxKsbDE+Z/qsaXHw4Lg9bVPnldM/1nuLj+A8BouheljECI4qcHSRxc7tDLWHmfgudMC1IzUiOSwCs6CU2I4FUr3gC5NlMw+pa4Zm7vyTSL2laAbuax/323PmvDNm2ySXM+Rjt4Dbm3IW0UdsxUiGpI4rncJUjS0OCQRNIhuL73g2e4ci4C4HdZS6TDqaPVsLM3vEZj4udcqgp64jcbKfBiZ9qx+a4ZcN9x6+PPFbOlto0Af8AEJvppPfH7oUdmIxHecvyUrpGe+3zXmuOUezG8diZHiLnP6SwsBlDeIvqSSO5MjHbyENkiJG+PML+fNYajiLKOrLHauAN2k31JuL/AN71lYKbL1nttxDgddV3ne/b5+8f0667aMGXIJog4f6eYajjc8+5NzbTtdII+lawjlq0nkXLkVfYZd5IOlgT8UrZ7Pa8tMgHsntTWX+yd8Z9OtS7ZQOcYema13vNuQewEix8E2zbaMXa47vbsdfBYqjwOabrZGxN9kSC9u7TRTYdliAGSSsa5x0LXnMexrdyxvLftj+Sfpo8N21DnvYb2AJDnbzbebDcFYxYw4fWZiQeB3eA4LLUOAQUzzK9xebWDCb3PNx3W7k5VVpeb+Q4Ady9GOF/ZM1/SYvLJVwtJs12fqjdZrDqeetlqzrosNs6L1zR+zpy497yAFraKcl8jTwII7iFv1F9pIYOAC8SxNsbgW7k8oVXKSNENoVJiAjl6E6ttcH3ew9iuyqmmpAAXHeVnts9pH0sPQsB6SUODXcGNGjnd+ui3IlZPb3FBUVjspu2IdGDzcCS8+engqBqaaE6ujKJLRukd1yMg3NF9e9WcAyiyjOkygnkvVPKSLnipRZscnmvUFj04JFkWUcqcdVKq6VNS1CgsJ8Qso/6SH9hVr7nivPRqdY12re4PTQyRyxRtax8jdRc2dbXdw71R1uHxxExSmSF3248zSObXt0ISU07o3Ne02LSD+fwW9xanFZSPgLiOkZoRv4HT++K8m5H2f8AJfDnHnLj+Nc0w6vomZ8r5G23vMWZunHXcFocHxBjm54I3VAvo9sFrcxeypMDqThpeHxCSNwMby4Zi03+XYtFszUCkpsjZOkbI4vjDdGtBOoAXTHCZPk5Y6SHdJKeu2aLmZGtDfDXVNWhicZGDNJa3SO9a3Jo9kJitxFzzmc4nxVVJU3NlvHhmLnpLmqbnMf78EkcmZQXdZwdwG4cO9OCay6Jpr9hwHGqqebxGPusaNPNy0MDfrM9rXFlUbA09qJrjvkfI/zdYfAK8J4pY1tJlOigg6nRTo3XAKZlbxSTyPUDdFyf0jVWetczhE1rPE9Z3z+C6zCbC5/sLhWLVXTTyze/I4juvp8AFv7RGYE5ZeWhK91hdXaIle65EY46nuClMFlApOu50h4nTuCmucolPNcvWdRc69Z1FPvkTD5V4e9eFUes5RmK8kpMyLtq8QpnRaPGh9r2fPgtbhch6KAg7i3yIyn5rLQYxI0WktI07w4C/h/VWUUYi6KSElrHvZeMm7RmPs+6e7RfIytsfqvmd8sZM4r9tB0VWTYFkrRmbwuNLqujlY3SNuVo3Dlff8VY+kaQ9PH/AOvTzWXE5Xu4POMr85yeLpbT1V0xHJqoPTKRAV6HFOzpqaXQ9ybc9MSv0Kg61sO7/AU/3D8yrF+mirNitKGn/wDXfzJKs5Tqgfgd1UONym2HRe2FJBXbU1vQUk0nHLYd7uqPmucbG4LFMHSzDM1pytZcgX4uNt60XpTrLQxQj235j91g/MrFYJjz6UOb0YkY45rZspDrWPguXyJn1/r7dOPW/K022wWKAxSQdVshLXMuTYgXzNvrbfp3LJ1zyQGD2j8Fa4nislVI18gDGsBDGA3tfe5x4nQJdnMCkrZiGENZGOtI7VoJ3NHN3YtcEy6/29pya34VsTMoskJWvn2AqwbMdE9vvZiPMEKhx7AaijLemaMr/Ve05mE8r8D2Fd3LSuuvLnJCmnv1UodBXrNZRzIlBUDjnLxqlBS3UG5qsCJbmp5BI0+ySLjud+asMQYWsp2cRJECO24ustG5zHZonFrieBsDfmFcxtn+kwMmOly4W1BytJ3r5Ge3635GGWPjLLaP6SzaWA/YePIhZDpFpfSTNeaJvusJ/eP9FkMy+h8b8I/Nc35VNjepkblWROUhsi9GnFMdImZXaHuTJeklf1T3IjtezbctJTjlDH8WgqY/VMYbpDEOUbB/IE6SppTgK9ByZzJQ5WG3M/SRW56vJfSNjW+J6x+YWUa9P41V9LUSye9I8juzWHwCiNVE/DqV08rKdhsZDa/ui1yfIFddw6hipYmwRDK1vm48XOPElc12CbesDvcY8/C34rocjyVvET+lHNRqqJlRG+KYB0RGt+B4OB4Ec1WVuJQwi80zGfedr4NGpWZxL0hRDqwRukA3F3UZfnzPktXSMpiMAilkizZsji2/MX0PkqqWbUp6qrHSPdK+2Z7i4hugF+AVe513LnROh5lOXUUSr1nWDSTdF00x693QaN53Ab7j5hbp7vrYwbaNce3db8VhIDeSMc3t/wCwW1JvOT7oA7OJK+PzebH6r5+XpgNt6nNVv+yGt+F/xVFdaXAqBtdiEsj23iY8lzfesbBp7NFN9IOzdPBGKmA9H1mtMXsm/FnunmF9Xhx1hH5rkv8AasjE5eYprvPYmY3b03SO1JXWuayD0kz+qUyHpZXdVZqO8Ujvq2fcb/1CcLlFp39Vo+yPkF7zqh/MoWOVXR08z/djf52ICezqg25qMtHIPeLW+bgqOWB1kvSJt5TTnIqXTYtLTuzwuykixNgdPEJupxuqkvnnkN+AdlHk2ygk3RdUKxg38e3VOZk3dF1Nj05ygSv62nFSnlRA76wFKJbRlAvvQHXTDnXTkbrLKJUScTTJAvWcINXgjc9TGOAOY9w1WjrqzLFNLyDrd+5ZTZzGoWZ36kuFgSNBzB4hTdocSaaTo43Ne9xGYNB0113r5l4r2j7ny/k45+qtvR/jLDTGOQsY6Mm5JDczTqHG+/iFR+kLaCCoDIYXZ8ri5zh6u6wAPHfwWOmPAjzUfMvqYXU0+Ll7SoyvLNCV4jcnnG6VHsFLI7TxCZaUSu0Kg7tHJoO4fJeukUCkku1p+y35BSA5BIzrJ+keotTsb70o/lBK0udYf0jz6ws++75AfitIxjnJmRy9uKjyOVCNcvZKYuvQcopzMi6bcUgKiFeVG9q6eeVHGpU2JAXpoXhgT0YQe7WSZ14lemelQf/Z\"\r\n    alt=\"\">\r\n    <mat-card-title>{{searchResult|null: ['username']}}</mat-card-title>\r\n    <mat-card-subtitle>User</mat-card-subtitle>\r\n  </mat-card-header>\r\n\r\n  <mat-card-content (click)='navigate()' class=\"container\" class='mainCard'>\r\n    lol\r\n    <div>\r\n      <!-- dunno why these dont work -->\r\n      <!-- <p *ngFor=\"let item of searchResult|null:['history']\">{{item}}</p> -->\r\n    </div>\r\n    <div>\r\n      <!-- <p *ngFor=\"let item of searchResult|null:['whishlist']\">{{item}}</p> -->\r\n    </div>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"container\">\r\n    <div class=\"container\">\r\n      <!-- option to follow -->\r\n      <div *ngIf=\"!result.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onFollow()\">\r\n          Follow\r\n        </button>\r\n      </div>\r\n\r\n      <!-- already following -->\r\n      <div *ngIf=\"result.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onUnfollow()\">\r\n          Unfollow\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n\r\n","import { environment as defaultEnvironment } from './environment.prod'\r\nexport const environment = {\r\n    ...defaultEnvironment,\r\n    production: false,\r\n}\r\n","import { environment } from './../../environments/environment'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Injectable, OnDestroy } from '@angular/core'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\n// http service that gives httpclient to everything\r\n\r\nexport class HttpService {\r\n  serverURL = environment.travelnetURL\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  delete(route: String, params: any) {\r\n    const serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.delete<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  get(route: String, params: any) {\r\n    const serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.get<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  post(route: String, params: any) {\r\n    const serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.post<any>(serverRoute,\r\n        params\r\n      ).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  put(route: String, params: any) {\r\n    const serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.put<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  patch(route: string, params: any) {\r\n    const serverRoute = this.serverURL + route\r\n    return new Promise((resolve, reject) => {\r\n      this.http.patch<any>(serverRoute, {\r\n        headers: {\r\n          authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n        },\r\n        params\r\n      }).subscribe((res) => {\r\n        resolve(res)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n}\r\n","import { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service'\r\nimport { Component, OnDestroy, OnInit } from '@angular/core'\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap'\r\nimport { Router } from '@angular/router'\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./loginpage.component.scss'],\r\n})\r\n\r\nexport class loginComponent {\r\n    modal = null\r\n    constructor(private modalService: NgbModal ) {\r\n      this.openModal()\r\n    }\r\n\r\n    openModal() {\r\n        this.modal = this.modalService.open(LoginComponent, {})\r\n    }\r\n}\r\n\r\n\r\n@Component({\r\n    selector: 'app-loginpage',\r\n    templateUrl: './loginpage.component.html',\r\n    styleUrls: ['./loginpage.component.scss'],\r\n    providers: [NgbModalConfig, NgbModal]\r\n})\r\n\r\nexport class LoginComponent implements OnInit, OnDestroy{\r\n    loginForm: FormGroup\r\n    login_err = false\r\n    hide = true\r\n\r\n    constructor(private SocketService: SocketService,\r\n                private sessionService: SessionService,\r\n                private modalService: NgbModal,\r\n                private router: Router) { }\r\n\r\n    ngOnInit() {\r\n        this.loginForm = new FormGroup({\r\n            username: new FormControl(null, Validators.required),\r\n            password: new FormControl(null, Validators.required)\r\n        })\r\n    }\r\n\r\n    // handle user login with socket\r\n    loginClicked() {\r\n        if (!(sessionStorage.getItem('username'))) {\r\n            const credentials = {\r\n                email: this.loginForm.get('username').value,\r\n                password: this.loginForm.get('password').value\r\n            }\r\n            this.login_err = false\r\n            this.SocketService.emit('login', credentials, (data: any) => {\r\n                if (data.err || data === '') {\r\n                    console.log(data.err)\r\n                    this.login_err = true\r\n                    this.loginForm.get('password').reset()\r\n                }\r\n                else if (data.res) {\r\n                    sessionStorage.setItem('username', data.res)\r\n                    localStorage.setItem('token', data.token)\r\n                    localStorage.setItem('username', data.res)\r\n                    this.modalService.dismissAll()\r\n                    this.sessionService.session()\r\n                    this.router.navigate(['/home'])\r\n                } else {\r\n                    console.log('login fini')\r\n                }\r\n            })\r\n        } else {\r\n            sessionStorage.removeItem('username')\r\n            this.loginClicked()\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(){\r\n        // this.router.navigate(['/'])\r\n    }\r\n}\r\n","<!-- <div>\r\n  <form class='modal-body' [formGroup]='loginForm' (ngSubmit)='loginClicked()'>\r\n    <h1 class='jumbotron modal-title'>Login</h1>\r\n    <br *ngIf='!login_err'>\r\n      <span *ngIf='login_err' class=\"help-block text-danger\">username or password incorrect</span>\r\n      <div class='form-group' >\r\n        <label for='exampleInputEmail1'>Email or Username</label>\r\n        <input type='text' class='form-control' formControlName='username'>\r\n      </div>\r\n      <div class='form-group'>\r\n        <label for='exampleInputPassword1'>Password</label>\r\n        <input type='password' class='form-control' formControlName='password'>\r\n        <small class=\"help-block text-danger\" *ngIf=\"!loginForm.get('password').valid && loginForm.get('password').touched\">Please enter something</small>\r\n      </div>\r\n      <button type='submit' class='btn btn-primary'>Login</button>\r\n  </form>\r\n</div> -->\r\n<br>\r\n<br>\r\n\r\n<mat-card class=\"\">\r\n  <mat-card-content class=\"\">\r\n    <form\r\n    ngbAutofocus\r\n    class='modal-body'\r\n    id='form'\r\n    (ngSubmit)=\"loginClicked()\"\r\n    [formGroup]='loginForm'>\r\n      <h1 class='modal-title'>Login</h1>\r\n      <hr>\r\n      <!-- username -->\r\n      <mat-form-field appearance=\"outline\" class='form-group' id=\"username\">\r\n        <mat-label for='username'>Email or Username</mat-label>\r\n        <input matInput formControlName='username' placeholder=\"Enter a Username\" autocomplete=\"off\">\r\n        <small class=\"help-block text-danger\" *ngIf=\"!loginForm.get('username').valid && loginForm.get('username').touched\">Please enter something</small>\r\n      </mat-form-field>\r\n        \r\n      <!-- password -->\r\n      <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Password</mat-label>\r\n        <input matInput\r\n          placeholder=\"Enter a password\"\r\n          formControlName='password'\r\n          [type]=\"hide ? 'password' : 'text'\"\r\n          autocomplete=\"false\">\r\n        <small class=\"help-block text-danger\" *ngIf=\"!loginForm.get('password').valid && loginForm.get('password').touched\">Please enter something</small>\r\n        <button mat-button\r\n          type='button'\r\n          mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\">\r\n          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <button mat-raised-button type='submit' id='submit' color='primary' aria-required='true'>Login</button>\r\n    </form>\r\n  </mat-card-content>\r\n</mat-card>\r\n<hr class=\"hr-text\" data-content=\"OR\">\r\n<mat-card class=\"\">\r\n  <mat-card-content class=\"row\" style=\"padding-left: 25%; padding-right: 25%;\">\r\n    <button mat-raised-button color='primary' class=\"col\" routerLink='/register'>Register</button>\r\n  </mat-card-content>\r\n</mat-card>","import { Component, OnInit } from '@angular/core'\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog'\r\nimport { Inject } from '@angular/core'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { CommentsService } from 'src/app/services/comments.service'\r\n\r\n@Component({\r\n  selector: 'app-edit-comment',\r\n  templateUrl: './edit-comment.component.html',\r\n  styleUrls: ['./edit-comment.component.scss']\r\n})\r\nexport class EditCommentComponent implements OnInit {\r\n  form: FormGroup\r\n  commentData: any\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<any>,\r\n    private CommentsService: CommentsService,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) { }\r\n\r\n  ngOnInit(): void { // re-initialize the comment\r\n    if (!this.data.displayEdits){\r\n      this.form = new FormGroup({\r\n          comment: new FormControl(null, {validators: [Validators.required]}),\r\n        })\r\n      if (this.data.commentData.reply){\r\n          this.form.setValue({\r\n            comment: this.data.commentData.reply.content\r\n            })\r\n        }\r\n        else{\r\n          this.form.setValue({\r\n            comment: this.data.commentData.comment.content\r\n            })\r\n        }\r\n      this.commentData = this.data.commentData\r\n      }\r\n    }\r\n\r\n\r\n  onEditComment(){ // save local data to the comment\r\n    if (this.data.commentData.reply){\r\n      this.commentData.reply.edited.push({edit: this.commentData.reply.content, date: Date().toLocaleString()})\r\n      this.commentData.reply.content = this.form.value.comment\r\n      this.CommentsService.editComment(this.commentData)\r\n    }\r\n    else{\r\n      this.commentData.comment.edited.push({edit: this.commentData.comment.content, date: Date().toLocaleString()})\r\n      this.commentData.comment.content = this.form.value.comment\r\n      this.CommentsService.editComment(this.commentData)\r\n    }\r\n    this.closeDialog()\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close()\r\n  }\r\n\r\n}\r\n","<form [formGroup]=\"form\" (submit)=\"onEditComment()\" *ngIf=\"!data.displayEdits\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" formControlName=\"comment\" placeholder=\"\">\r\n    <mat-error *ngIf=\"form.get('comment').invalid\">Please enter something</mat-error>\r\n  </mat-form-field>\r\n  <button mat-raised-button color=\"accent\" type=\"submit\">Save edit</button>\r\n  <button mat-raised-button type= \"button\" (click)=\"closeDialog()\">close</button>\r\n</form>\r\n\r\n<div *ngIf=\"data.displayEdits\">\r\n  <div *ngFor=\"let edit of data.commentData.comment.edited\">\r\n    {{edit.edit}}: {{edit.date}}\r\n  </div>\r\n</div>\r\n","import { CountrySelectorComponent } from './country-selector/country-selector.component'\r\nimport { SessionService } from 'src/app/services/session.service'\r\nimport { Subscription, BehaviorSubject, Observable } from 'rxjs'\r\nimport { MapService, clickLocationCoordinates } from './../../services/map/map.service'\r\nimport { Router } from '@angular/router'\r\nimport { RegistrationComponent } from './registrationpage/registrationpage.component'\r\nimport { Component, OnInit, AfterViewInit, ViewChild, OnDestroy, Output, Input } from '@angular/core'\r\nimport { FormBuilder, Validators, FormGroup, FormControl } from '@angular/forms'\r\nimport { MatHorizontalStepper } from '@angular/material/stepper'\r\n\r\nexport interface progressUpdateData {\r\n  target: number\r\n  coordinates: number[]\r\n}\r\n\r\n@Component({\r\n  selector: 'app-registration-process',\r\n  templateUrl: './registration-process.component.html',\r\n  styleUrls: ['./registration-process.component.scss']\r\n})\r\nexport class RegistrationProcessComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  private sessionState_sub: Subscription\r\n  sessionState: Boolean\r\n\r\n  firstFormGroup: FormGroup\r\n  secondFormGroup: FormGroup\r\n  @ViewChild('stepper') stepper: MatHorizontalStepper\r\n  @ViewChild('step1') step1: any\r\n  @ViewChild('selector1') selector1: CountrySelectorComponent\r\n  @ViewChild('selector2') selector2: CountrySelectorComponent\r\n\r\n  editable: Boolean = true\r\n  @ViewChild('registration') registration: RegistrationComponent\r\n\r\n  private _progressUpdate: BehaviorSubject<progressUpdateData> = new BehaviorSubject({\r\n    target: 0,\r\n    coordinates: []\r\n  })\r\n  @ViewChild('progressUpdate') progressUpdate: Observable<progressUpdateData> = this._progressUpdate.asObservable()\r\n\r\n  private clickLocation: Subscription\r\n  private stepper_sub: Subscription\r\n\r\n  isSaving = false\r\n  isDone = false\r\n\r\n  constructor(private _formBuilder: FormBuilder,\r\n              private MapService: MapService,\r\n              private SessionService: SessionService,\r\n              private Router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    this.firstFormGroup = this._formBuilder.group({\r\n      firstCtrl: ['']\r\n    })\r\n    this.secondFormGroup = this._formBuilder.group({\r\n      secondCtrl: ''\r\n    })\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe((state: Boolean) => {\r\n      this.sessionState = state\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() { // setup registration form\r\n    this.step1.stepControl = this.registration.registrationForm\r\n    this.clickLocation = this.MapService.clickLocation.subscribe((x: clickLocationCoordinates) => {\r\n      this._progressUpdate.next({\r\n        target: this.stepper.selectedIndex,\r\n        coordinates: [x.lng, x.lat]\r\n      })\r\n    })\r\n    this.stepper_sub = this.stepper.selectionChange.subscribe(x => {\r\n      console.log(this.stepper.steps)\r\n      if (x.selectedIndex != 0) {\r\n        this.editable = false\r\n        this.isDone = false\r\n        this.MapService.showMarker(x.selectedIndex)\r\n      }\r\n    })\r\n  }\r\n\r\n  registerClicked() {\r\n    this.registration.onSubmit()\r\n  }\r\n\r\n  onClear(target: number) {\r\n\r\n  }\r\n\r\n  savePreferences() {\r\n    this.isSaving = true\r\n    Promise.all([this.selector1.onSumbit(), this.selector2.onSumbit()])\r\n    .then((responses: any[]) => {\r\n      this.isDone = true\r\n      setTimeout(() => {\r\n        this.Router.navigate(['/home'])\r\n      }, 500)\r\n    })\r\n    .catch((err: any[]) => {\r\n      alert(err[0])\r\n      // window.location.reload()\r\n    })\r\n    .finally(() => {\r\n      this.isSaving = false\r\n    })\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // this.Router.navigate(['/'])\r\n    this.clickLocation.unsubscribe()\r\n    this.stepper_sub.unsubscribe()\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n\r\n}\r\n","<mat-horizontal-stepper linear #stepper>\r\n  <ng-template matStepperIcon=\"edit\">\r\n    <mat-icon>check</mat-icon>\r\n  </ng-template>\r\n\r\n  <mat-step #step1 label='Create Your Account' [editable]='editable' [optional]=\"true\">\r\n    <app-registrationpage #registration [stepper]='stepper'></app-registrationpage>\r\n  </mat-step>\r\n  <mat-step label=\"Where You've Been\" [optional]=\"true\">\r\n    <br>\r\n    <mat-label ><h2>Tell Us About The Places You Enjoyed Most</h2></mat-label>\r\n    <app-country-selector #selector1 [progressUpdate]='stepper.selectedIndex' [target]='1'></app-country-selector>\r\n    <div>\r\n      <button mat-stroked-button matStepperNext color='primary'>Next</button>\r\n    </div>\r\n  </mat-step>\r\n  <mat-step label='Where Do You Want To Go' [optional]=\"true\">\r\n    <br>\r\n    <mat-label ><h2>Tell Us About Places You Would Like to Discover</h2></mat-label>\r\n    <app-country-selector #selector2 [progressUpdate]='stepper.selectedIndex' [target]='2'></app-country-selector>\r\n    <div>\r\n      <button mat-button matStepperPrevious>Back</button>\r\n      <button mat-raised-button color='primary' (click)='savePreferences()'>Save</button>\r\n      <button mat-button *ngIf='isSaving'><mat-spinner diameter='32'></mat-spinner></button>\r\n      <button mat-button *ngIf='isDone' class=\"text-success\">Preferences Saved!</button>\r\n    </div>\r\n  </mat-step>\r\n</mat-horizontal-stepper>","import { HttpService } from './../../services/http.service'\r\nimport { Component, OnInit, OnDestroy } from '@angular/core'\r\nimport { Router } from '@angular/router'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { tab } from '../../models/tab.model'\r\nimport { Subscription } from 'rxjs'\r\nimport { userModel } from 'src/app/models/user.model'\r\n\r\n\r\n@Component({\r\n  selector: 'app-userprofile',\r\n  templateUrl: './userprofile.component.html',\r\n  styleUrls: ['./userprofile.component.scss']\r\n})\r\nexport class UserprofileComponent implements OnInit, OnDestroy {\r\n  url: string = null\r\n  private openTabSub: Subscription\r\n  content: userModel = null\r\n  openTab: tab\r\n  username: string\r\n  selfUsername: string\r\n  windowHeight: number = window.innerHeight\r\n\r\n\r\n  constructor(\r\n    private SearchService: SearchService,\r\n    private router: Router,\r\n    private HttpService: HttpService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.openTabSub = this.SearchService.searchTab.subscribe(x => {\r\n      this.openTab = x\r\n    })\r\n    this.url = this.router.url.replace('/search/user/', '')\r\n    this.searchUser(this.url).then(result => this.content = result.users[0])\r\n    this.username = this.router.url.substr(13)\r\n    this.selfUsername = localStorage.getItem('username')\r\n  }\r\n\r\n  goBack(){\r\n    this.router.navigate(['search', this.openTab.query])\r\n  }\r\n\r\n  searchUser(username: string){\r\n    return new Promise<any>((resolve) => {\r\n      this.SearchService.userSearch(username).then(result => {\r\n      console.log(result)\r\n      resolve(result)\r\n      })\r\n    }\r\n  ) }\r\n\r\n  ngOnDestroy(){\r\n    this.openTabSub.unsubscribe()\r\n  }\r\n\r\n  // follow button\r\n  onFollow() {\r\n    // update database\r\n    this.HttpService.post('/user/follow', {\r\n      username: localStorage.getItem('username'),\r\n      followed: this.username\r\n    }).then((res) => {\r\n      // add the follower in current content\r\n      this.content.followers.push(this.selfUsername)\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  // unfollow button\r\n  onUnfollow() {\r\n    // update database\r\n    this.HttpService.post('/user/unfollow', {\r\n      username: localStorage.getItem('username'),\r\n      unfollowed: this.username\r\n    }).then((res) => {\r\n      // remove the follower from current content\r\n      this.content.followers.splice(this.content.followers.indexOf(this.selfUsername), 1)\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n}\r\n","<mat-card class=\"container\"  *ngIf=\"content\">\r\n  <mat-card-title>\r\n    <div class=\"row\">\r\n      <button mat-button (click)='goBack()' *ngIf=\"this.openTab\" class=\"col-auto\" matTooltip=\"back\">\r\n        <mat-icon class=\"\">\r\n          keyboard_backspace\r\n        </mat-icon>\r\n      </button>\r\n      <!-- option to follow -->\r\n      <div *ngIf=\"!this.content.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onFollow()\">\r\n          Follow\r\n        </button>\r\n      </div>\r\n      <!-- already following -->\r\n      <div *ngIf=\"this.content.followers.includes(this.selfUsername)\">\r\n        <button mat-raised-button (click)=\"onUnfollow()\">\r\n          Unfollow\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  <!-- User profile -->\r\n  <!-- view username -->\r\n  <div>{{content|null:['username']}}</div>\r\n  <!-- view profile pic -->\r\n  <a href=\"{{content|null:['profilepicture']}}\" class=\"img\"></a>\r\n  <!-- view friends -->\r\n  </mat-card-title>\r\n\r\n  <mat-card-content>\r\n    <!-- view photos -->\r\n    <!-- view posts/blogs,albums -->\r\n    <!-- view trips -->\r\n    <div>\r\n      <div *ngFor=\"let item of content|null:['trips']\">\r\n        {{item}}\r\n      </div>\r\n    </div>\r\n    <!-- view history -->\r\n    <div>\r\n      <p>history: </p>\r\n      <p *ngFor=\"let item of content.history\">{{ (item|null:['continent']) + (item|null:['places'])  }}</p>\r\n    </div>\r\n    <!-- view wishlist -->\r\n    <div>\r\n      <p>wishlist: </p>\r\n      <p *ngFor=\"let item of content.wishlist\">{{  item|null:['places']  }}</p>\r\n    </div>\r\n  </mat-card-content>\r\n</mat-card>\r\n","import { MatListOption } from '@angular/material/list'\r\nimport { AddToTripPopoverComponent } from './../add-to-trip-popover/add-to-trip-popover.component'\r\nimport { CustomCoordinates } from 'src/app/models/coordinates'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\nimport { tripModel } from './../../../../models/trip.model'\r\nimport { Subscription } from 'rxjs'\r\nimport { TripService } from './../../../../services/trip.service'\r\nimport { Component, OnInit, Input, OnDestroy, ViewChild } from '@angular/core'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { Router } from '@angular/router'\r\n\r\n@Component({\r\n  selector: 'app-venueButton',\r\n  templateUrl: './venueButton.component.html',\r\n  styleUrls: ['./venueButton.component.scss']\r\n})\r\nexport class VenueButtonComponent implements OnInit, OnDestroy {\r\n  pathID: string\r\n  searchResult: any\r\n  @Input() select: any\r\n  @Input() result: any\r\n  @ViewChild(AddToTripPopoverComponent) AddToTripPopoverComponent: AddToTripPopoverComponent\r\n\r\n  // keeps track of user trips\r\n  trips_sub: Subscription\r\n  trips: tripModel[] = null\r\n\r\n  isLoading = false\r\n  isSuccess = false\r\n  isErr = false\r\n\r\n  constructor(\r\n    private SearchService: SearchService,\r\n    private TripService: TripService,\r\n    private router: Router,\r\n    private MapService: MapService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.searchResult = this.result\r\n    this.pathID = '/search/venue/' + this.result.venue.id\r\n\r\n    this.trips_sub = this.TripService.trips.subscribe((triparr: tripModel[]) => {\r\n      if (triparr) {\r\n        this.trips = triparr\r\n      }\r\n    })\r\n  }\r\n\r\n  navigate(){\r\n    this.router.navigate([this.pathID])\r\n  }\r\n\r\n  /** add venue to specific trips */\r\n  addToTrip(event: MatListOption[]) {\r\n    this.isLoading = true\r\n    this.SearchService.formatDetails(this.result.venue.id)\r\n    .then(result => {\r\n      console.log(result)\r\n      if (event.length && this.trips) {\r\n        event.map((option: MatListOption) => {\r\n          this.trips[option.value.trip].schedule[option.value.day].venues.push({\r\n            name: result.response.venue.name ? result.response.venue.name : null,\r\n            venueAddress: result.response.venue.location.formattedAddress ? result.response.venue.location.formattedAddress.join(' ') : null,\r\n            venueCoord: result.response.venue.location.lng ? {lng: result.response.venue.location.lng, lat: result.response.venue.location.lat} : null,\r\n            venueCity: result.response.venue.location.city ? result.response.venue.location.city : null,\r\n            url: result.response.venue.canonicalUrl ? result.response.venue.canonicalUrl : null,\r\n            category: result.response.venue.categories[0] ? { name: result.response.venue.categories[0].name, url: result.response.venue.categories[0].icon.prefix + '32' + result.response.venue.categories[0].icon.suffix } : null\r\n          })\r\n        })\r\n\r\n        this.TripService.modifyBackend(this.trips)\r\n        .then((val) => {\r\n          this.isSuccess = true\r\n        })\r\n        .catch(err => {\r\n          this.isErr = true\r\n        })\r\n      }\r\n    })\r\n    .catch(() => {\r\n      this.isErr = true\r\n      setTimeout(() => {\r\n        this.isErr = false\r\n      }, 800)\r\n    })\r\n    .finally(() => {\r\n      this.isLoading = false\r\n    })\r\n  }\r\n\r\n  /** show venue location on map */\r\n  showLocation() {\r\n    this.MapService.venueOnDestroy()\r\n    this.MapService.addMarker(new CustomCoordinates(this.result.venue.location.lng, this.result.venue.location.lat))\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.MapService.venueOnDestroy()\r\n    this.trips_sub.unsubscribe()\r\n    this.MapService.venueOnDestroy()\r\n  }\r\n}\r\n","<mat-card *ngIf=\"searchResult.venue\">\r\n  <mat-card-header (click)='navigate()' >\r\n    <mat-card-title>{{searchResult|null:['venue','name']}}</mat-card-title>\r\n    <mat-card-subtitle>\r\n      <p *ngFor=\"let item of (searchResult|null: ['venue','categories'])\" class=\"inline\">{{item.name}}</p>\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n\r\n  <mat-card-content class=\"container-fluid justify-content-end\">\r\n    <p class=\"description text-right d-flex flex-row-reverse\"  (click)='navigate()'>\r\n      {{searchResult|null:['venue','location','address']}}\r\n    </p>\r\n    <hr>\r\n    <!-- quick actions -->\r\n    <span class=\"row justify-content-end\">\r\n      <!-- show on map -->\r\n      <button mat-button class=\"col-auto mr-auto\" (click)='showLocation()'>\r\n        <mat-icon mat-icon-button matTooltip=\"show on map\" matTooltipPosition='above' color='primary'>map</mat-icon>\r\n      </button>\r\n      <!-- add to trip -->\r\n      <button mat-button class=\"col-auto mr-auto\">\r\n        <mat-icon mat-icon-button *ngIf='!isErr && !isLoading && !isSuccess' matTooltipPosition='above' [ngbPopover]=\"popContent\" matTooltip=\"add to trip...\" [autoClose]=\"'outside'\">playlist_add</mat-icon>\r\n        <mat-spinner diameter='20' *ngIf='isLoading'></mat-spinner>\r\n        <mat-icon mat-icon-button class=\"text-success\" *ngIf='isSuccess && !isLoading'>check</mat-icon>\r\n        <mat-icon mat-icon-button class=\"text-danger\" *ngIf='isErr && !isLoading' matTooltip='an error occured'>error</mat-icon>\r\n      </button>\r\n    </span>\r\n  </mat-card-content>\r\n</mat-card>\r\n\r\n<!-- add to trip -->\r\n<ng-template #popContent> \r\n  <app-add-to-trip-popover (onSubmitEvent)='addToTrip($event)'></app-add-to-trip-popover>\r\n</ng-template>\r\n","import { Observable } from 'rxjs'\r\nimport { environment } from 'src/environments/environment'\r\nimport { Injectable } from '@angular/core'\r\nimport { HttpClient, HttpResponse } from '@angular/common/http'\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class FoursquareService {\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /** takes lat,lng */\r\n  searchVenues(query: string, latLng: string, near?: string) {\r\n    return this.http\r\n      .get<{[key: string]: any}>(\r\n        environment.foursquare.venuesExplore,\r\n        {\r\n          headers: {\r\n          },\r\n          params: {\r\n            client_id: environment.foursquare.clientId,\r\n            client_secret: environment.foursquare.clientSecret,\r\n            v: this.getCurrentDate(),\r\n            ll: latLng,\r\n            query\r\n          }\r\n    })\r\n  }\r\n\r\n  getDetails(query: string) {\r\n    return this.http\r\n      .get<{[key: string]: any}>(\r\n        environment.foursquare.venueDetails + '/' + query,\r\n        {\r\n          headers: {\r\n          },\r\n          params: {\r\n            client_id: environment.foursquare.clientId,\r\n            client_secret: environment.foursquare.clientSecret,\r\n            v: this.getCurrentDate(),\r\n          }\r\n    })\r\n  }\r\n\r\n  userAuth() {\r\n    const url = environment.foursquare.userAuth +\r\n    '?client_id=' + environment.foursquare.clientId +\r\n    '&response_type=' + 'code' +\r\n    '&redirect_uri=' + 'http://localhost:4200/'\r\n    console.log(url)\r\n    window.location.replace(url)\r\n  }\r\n\r\n  updateCategories(): Observable<{[key: string]: any}> {\r\n    return this.http\r\n    .get<{[key: string]: any}>(\r\n      environment.foursquare.getCategories + '/',\r\n      {\r\n        headers: {\r\n        },\r\n        params: {\r\n          client_id: environment.foursquare.clientId,\r\n          client_secret: environment.foursquare.clientSecret,\r\n          v: this.getCurrentDate(),\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  getCurrentDate(): string {\r\n    const dt = new Date()\r\n    let month: string\r\n    let day: string\r\n    if (dt.getMonth.toString().length != 2){\r\n      month = '' + 0 + dt.getMonth()\r\n    }\r\n    else{\r\n      month = dt.getMonth().toString()\r\n    }\r\n    if (dt.getDay.toString().length != 2){\r\n      day = '' + 0 + dt.getDay()\r\n    }\r\n    else{\r\n      day = dt.getDay().toString()\r\n    }\r\n    return (dt.getFullYear().toString() + month + day)\r\n  }\r\n}\r\n","import { environment } from 'src/environments/environment'\r\nimport { Injectable } from '@angular/core'\r\nimport * as io from 'socket.io-client/dist/socket.io'\r\nimport { Observable, BehaviorSubject } from 'rxjs'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class SocketService {\r\n  private socket: any\r\n  room: any\r\n  readonly uri: string = environment.travelnetURL\r\n\r\n  constructor() {\r\n    this.socket = io(this.uri)\r\n  }\r\n\r\n  listen(eventName: string) {\r\n    return new Observable((sub) => {\r\n      this.socket.on(eventName, (data) => {\r\n        sub.next(data)\r\n      })\r\n    })\r\n  }\r\n\r\n  emitO(eventName: string, data: any): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.socket) {\r\n        reject()\r\n      } else {\r\n        this.socket.emit(eventName, data, (ack) => {\r\n          resolve(ack)\r\n      })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  emit(eventName: string, data: any, ack?: (res?: any) => any) {\r\n    this.socket.emit(eventName, data, ack)\r\n  }\r\n\r\n  once(eventName: string) {\r\n    return new Observable((sub) => {\r\n      this.socket.once(eventName, (data) => {\r\n        sub.next(data)\r\n      })\r\n    })\r\n  }\r\n\r\n  remove(eventName: string) {\r\n    this.socket.removeListener(eventName)\r\n  }\r\n\r\n  // disconnects and reconnects to backend\r\n  close() {\r\n    this.socket.close()\r\n  }\r\n\r\n  // permanent disconnection from backend\r\n  disconnect() {\r\n    this.socket.disconnect()\r\n  }\r\n\r\n  // manually reconnect to backend\r\n  open() {\r\n    this.socket.open()\r\n  }\r\n}\r\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","import { Pipe, PipeTransform } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'null'\r\n})\r\nexport class NullPipe implements PipeTransform {\r\n\r\n  transform(value: any, parent: any= false, returnNull: boolean = false ): any {\r\n    if (!parent.length){\r\n      return value\r\n    }\r\n    else if (!parent){\r\n      if (returnNull){\r\n        return\r\n      }\r\n      else{\r\n        return 'no results found'\r\n      }\r\n\r\n    }\r\n    else{\r\n      if (value[parent[0]]){\r\n        return this.transform(value[parent.shift()], parent)\r\n      }\r\n      else{\r\n        if (returnNull){\r\n          return\r\n        }\r\n        else{\r\n          return 'no results found'\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Subscription } from 'rxjs'\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service'\r\nimport { SessionService } from './services/session.service'\r\nimport { Component, DoCheck, OnInit, OnDestroy } from '@angular/core'\r\nimport { FriendlistService } from './services/chatsystem/friendlist.service'\r\nimport { MapService } from './services/map/map.service'\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements DoCheck, OnInit, OnDestroy {\r\n\r\n  title = 'frontend'\r\n  windowHeight: number\r\n  user = sessionStorage.getItem('username')\r\n  openChatWidgets: any\r\n  private openChatWidgetsSub: Subscription\r\n  sessionState: boolean\r\n  private sessionStateSub: Subscription\r\n\r\n  constructor(\r\n    private FriendlistService: FriendlistService,\r\n    private SessionService: SessionService,\r\n    private SocketService: SocketService,\r\n    private MapService: MapService){\r\n\r\n    // check if logged in from other tab (if LocalStorage exist)\r\n    localStorage.getItem('username') ?\r\n    this.SocketService.emit('updateLogin', {username: localStorage.getItem('username')}, (data) => {\r\n      if (data.res){\r\n        sessionStorage.setItem('username', data.res)\r\n        SessionService.session()\r\n      } else if (data.err){\r\n        console.log(data.err)\r\n        localStorage.clear()\r\n        sessionStorage.clear()\r\n        SessionService.session()\r\n      }\r\n    })\r\n    : {}\r\n\r\n    // calling observables\r\n    this.openChatWidgetsSub = this.FriendlistService.openWidgets.subscribe(x => this.openChatWidgets = x)\r\n    this.sessionStateSub = this.SessionService.sessionState.subscribe(x => {\r\n      this.sessionState = x\r\n      if (this.sessionState) {\r\n        // this.FriendlistService.getNotifications()\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n    // this.FriendlistService.getNotifications()\r\n  }\r\n\r\n  ngDoCheck() {\r\n    // console.log(this.sessionState)\r\n  }\r\n\r\n  resizeWindow(){\r\n    this.windowHeight = window.innerHeight\r\n    this.FriendlistService.resizeWindow(window.innerWidth)\r\n    this.MapService.getFakeCenter()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.openChatWidgetsSub.unsubscribe()\r\n    this.sessionStateSub.unsubscribe()\r\n  }\r\n}\r\n","<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n\r\n  <title></title>\r\n\r\n  <!-- popperjs import -->\r\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js\"></script>\r\n\r\n  <!-- socketio import -->\r\n  <script src=\"https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js\" alt='/socket.io/socket.io.js' defer></script>\r\n\r\n  <!-- font import -->\r\n  <style>\r\n  @import url('https://fonts.googleapis.com/css2?family=Baloo+Bhaina+2&display=swap');\r\n  </style>\r\n\r\n  <!-- mapbox css import -->\r\n  <link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet'/>\r\n\r\n</head>\r\n\r\n<body (window:resize)='resizeWindow()' [attr.height]='windowHeight'>\r\n  \r\n  <app-map></app-map>\r\n \r\n  <router-outlet></router-outlet>\r\n  \r\n  <div>\r\n    <app-sidebar></app-sidebar>\r\n  </div>\r\n  <div style=\"z-index: 2; position: absolute; top: 1%; right: 1%;\">\r\n    <header-navbar></header-navbar>\r\n  </div>\r\n  <div id=\"chatsystem\">\r\n    <app-chatsystem></app-chatsystem>\r\n  </div>\r\n</body>\r\n</html>","import { Injectable } from '@angular/core'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Subject } from 'rxjs'\r\nimport { map } from 'rxjs/operators'\r\nimport { Router } from '@angular/router'\r\n\r\nimport { Post } from '../models/post.model'\r\nimport { Comment } from '../models/comment.model'\r\nimport { AddPostService } from './add-post.service'\r\nimport { environment } from 'src/environments/environment'\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CommentsService {\r\n  url = environment.travelnet.travelnetCommentURL\r\n  private posts: Post[] = []\r\n  private postsUpdated = new Subject<Post[]>()\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private router: Router,\r\n    private PostService: AddPostService) {}\r\n\r\n  addComment(newComment, postId: string){\r\n    this.http\r\n    .post<{ message: string; comment: Comment }>(\r\n      this.url,\r\n      {commentData: newComment, postId}, {\r\n        headers: {}\r\n      }\r\n    ).subscribe(responseData => {\r\n      const comment: Comment = {\r\n        _id: responseData.comment._id,\r\n        date: responseData.comment.date,\r\n        author: responseData.comment.author,\r\n        likes: responseData.comment.likes,\r\n        content: newComment.content,\r\n        replies: responseData.comment.replies,\r\n        edited: responseData.comment.edited,\r\n      }\r\n      console.log(comment)\r\n      // need to update post\r\n      const postIndex = this.PostService.posts.findIndex(p => p._id === postId)\r\n      this.PostService.posts[postIndex].comments.push(comment)\r\n      this.PostService.updatePosts(this.PostService.posts)\r\n  })\r\n}\r\n  /**get all comments associated to a post*/\r\n  getComments() {\r\n    this.http\r\n      .get<{ message: string; comments: any }>(this.url)\r\n      .pipe(\r\n        map(commentData => {\r\n          return commentData.comments.map(comment => {\r\n            return {\r\n              _id: comment._id,\r\n              date: comment.date,\r\n              author: comment.author,\r\n              content: comment.content,\r\n              likes: comment.likes,\r\n              replies: comment.replies,\r\n              edited: comment.edited\r\n            }\r\n          })\r\n        })\r\n      )\r\n      .subscribe(transformedComments => {\r\n        // this.posts = transformedPosts;\r\n        // this.postsUpdated.next([...this.posts])/;\r\n      })\r\n  }\r\n  // doesnt even exist lul\r\n  /**get specific comment given its id */\r\n  getComment(commentId: string) {\r\n    return this.http.get<{\r\n      _id: string;\r\n      date: string;\r\n      author: string;\r\n      content: string;\r\n      likes: string[];\r\n      replies: Comment[];\r\n      edited: string[]\r\n    }>(\r\n      this.url + commentId\r\n    )\r\n  }\r\n  /**reply to head comment */\r\n  reply(replyContent: {postId: string, commentId: string, reply: any}){\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === replyContent.postId)\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === replyContent.commentId)\r\n\r\n    this.http\r\n    .put<{ message: string; reply: Comment }>(\r\n      this.url + replyContent.commentId,\r\n      {commentData: replyContent.reply, postId: replyContent.postId})\r\n    .subscribe(responseData => {\r\n      this.PostService.posts[postIndex].comments[commentIndex].replies.push(responseData.reply)\r\n      this.PostService.updatePosts(this.PostService.posts)\r\n    })\r\n  }\r\n  /**edit  tree comment */\r\n  editComment(editContent: {postId: string, reply: any, comment: any}){\r\n    console.log(editContent)\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === editContent.postId)\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === editContent.comment._id)\r\n    if (editContent.reply){\r\n      const replyIndex = this.PostService.posts[postIndex].comments[commentIndex].replies.findIndex(r => r._id === editContent.reply._id)\r\n    }\r\n    this.http\r\n    .put<{ message: string; comment: Comment }>(\r\n      this.url + 'edit/' + editContent.comment._id,\r\n    {postId: editContent.postId, replyId: editContent.reply, comment: editContent.comment})\r\n      .subscribe(response => {\r\n        (this.PostService.posts[postIndex]).comments[commentIndex] = response.comment\r\n        this.PostService.updatePost(this.PostService.posts)\r\n      })\r\n\r\n\r\n  }\r\n  /**like comment */\r\n  likeComment(likeContent: {postId: string, commentId: string, username: string, replyId: string}){\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === likeContent.postId)\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === likeContent.commentId)\r\n    let replyIndex;\r\n    if (likeContent.replyId){\r\n      const replyIndex = this.PostService.posts[postIndex].comments[commentIndex].replies.findIndex(r => r._id === likeContent.replyId)\r\n    }\r\n    this.http\r\n    .put<{ message: string; likes: string[] }>(\r\n      this.url + 'like/' + likeContent.commentId,\r\n    {postId: likeContent.postId, username: likeContent.username, replyId: likeContent.replyId})\r\n      .subscribe(response => {\r\n        if (likeContent.replyId){\r\n          (this.PostService.posts[postIndex]).comments[commentIndex].replies[replyIndex].likes = response.likes\r\n        }\r\n        else{\r\n          (this.PostService.posts[postIndex]).comments[commentIndex].likes = response.likes\r\n        }\r\n        this.PostService.updatePost(this.PostService.posts)\r\n      })\r\n  }\r\n  /**delete existing comment */\r\n  deleteComment(deleteContent: {postId: string, commentId: string, replyId: string}){\r\n    const postIndex = this.PostService.posts.findIndex(p => p._id === deleteContent.postId)\r\n    const commentIndex = this.PostService.posts[postIndex].comments.findIndex(c => c._id === deleteContent.commentId);\r\n    let replyIndex;\r\n    if (deleteContent.replyId){\r\n      const replyIndex = this.PostService.posts[postIndex].comments[commentIndex].replies.findIndex(r => r._id === deleteContent.replyId)\r\n    }\r\n    this.http\r\n    .put<{}>(\r\n      this.url + 'delete/' + deleteContent.commentId,\r\n      {postId: deleteContent.postId, replyId: deleteContent.replyId})\r\n      .subscribe(() => {\r\n        const newPosts = this.PostService.posts\r\n        if (deleteContent.replyId){\r\n          newPosts[postIndex].comments[commentIndex].replies.splice(replyIndex)\r\n        }\r\n        else{\r\n          newPosts[postIndex].comments.splice(commentIndex)\r\n        }\r\n        this.postsUpdated.next(newPosts)\r\n      })\r\n  }\r\n}\r\n","import { interval as observableInterval } from 'rxjs'\r\nimport { takeWhile, scan, tap } from 'rxjs/operators'\r\nimport { Component, OnInit, Input } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'app-scroll-to-top',\r\n  templateUrl: './scroll-to-top.component.html',\r\n  styleUrls: ['./scroll-to-top.component.scss']\r\n})\r\nexport class ScrollToTopComponent implements OnInit {\r\n  @Input() el\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  scrollToTop() {\r\n    const duration = 500\r\n    const interval = 40\r\n    const move = this.el.scrollTop * interval / duration\r\n    observableInterval(interval)\r\n    .pipe(\r\n      scan((acc, curr) => acc - move, this.el.scrollTop),\r\n      tap(position => this.el.scrollTop = position),\r\n      takeWhile(val => val > 0)\r\n    )\r\n    .subscribe()\r\n  }\r\n\r\n}\r\n","<button mat-raised-button (click)='scrollToTop()' color='primary'>    \r\n    <mat-icon>keyboard_arrow_up</mat-icon>\r\n</button>","import { selectedVenueModel } from './selectedVenue.model'\r\nimport { venueModel } from 'src/app/models/venue.model'\r\nimport * as moment from 'moment'\r\nimport { LngLatLike } from 'mapbox-gl'\r\n\r\nexport class tripModel {\r\n    _id: string\r\n    tripName: String\r\n    dateRange: {\r\n        [key: string]: any\r\n        start: Date\r\n        end: Date\r\n        length: Number\r\n    }\r\n    schedule?: Array<{\r\n        day?: Date,\r\n        venues: Array<{\r\n            hour?: any\r\n            name: String\r\n            venueCity?: String\r\n            venueAddress?: String\r\n            venueCoord?: LngLatLike\r\n            price?: Number\r\n            url?: URL | string\r\n            category?: {\r\n                name: string\r\n                url: URL | string\r\n            }\r\n        } | selectedVenueModel>\r\n    }>\r\n    isPrivate: boolean\r\n\r\n    constructor(start: Date, end: Date, name: string, isPrivate?: boolean) {\r\n        const final = moment(end)\r\n\r\n        this.tripName = name\r\n        this.dateRange = {\r\n            start,\r\n            end,\r\n            length: final.diff(start, 'days') + 1\r\n        }\r\n        this.schedule = []\r\n        for (let x = 0; x < this.dateRange.length; x++) {\r\n            this.schedule.push({\r\n                day: moment(start).add(x, 'days').toDate(),\r\n                venues: []\r\n            })\r\n        }\r\n        this.isPrivate = isPrivate ? isPrivate : false\r\n    }\r\n}\r\n","import { SessionService } from 'src/app/services/session.service'\r\nimport { userModel } from './../models/user.model'\r\nimport { tripModel } from '../models/trip.model'\r\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs'\r\nimport { HttpService } from './http.service'\r\nimport { Injectable, OnDestroy } from '@angular/core'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TripService implements OnDestroy {\r\n  private sessionState_sub: Subscription\r\n  sessionState: boolean = this.SessionService.session()\r\n\r\n  // query settings from mytrip add venue\r\n  searchedVenue: string = null\r\n\r\n  private _trips: BehaviorSubject<tripModel[]> = new BehaviorSubject(null)\r\n  public trips: Observable<tripModel[]> = this._trips.asObservable()\r\n\r\n  constructor(private HttpService: HttpService,\r\n              private SessionService: SessionService) {\r\n    // check if user is logged in and retrieve trip data\r\n    this.sessionState_sub = this.SessionService.sessionState.subscribe((state: boolean) => {\r\n      if (state) {\r\n        this.sessionState = state\r\n        this.HttpService.get('/user', {})\r\n        .then((response: {\r\n          [key: string]: any\r\n          user: userModel[]\r\n        }) => {\r\n          if (response.user) {\r\n            this._trips.next(response.user[0].trips)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /** when user searches/finished searching a venue from mytrip -> add venue */\r\n  changeQuery(query: string | null) {\r\n    this.searchedVenue = query\r\n  }\r\n\r\n  /** modifies trips of user */\r\n  modifyBackend(triparr: tripModel[]): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpService.patch('/user/edit', {\r\n        username: localStorage.getItem('username'),\r\n        proprety: 'trips',\r\n        newProprety: triparr\r\n      })\r\n      .then((response: {[key: string]: any}) => {\r\n        this._trips.next(triparr)\r\n        resolve(response)\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**localy update trips of user (when modification is already done)*/\r\n  updateLocal(triparr: tripModel[]) {\r\n    this._trips.next(triparr)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n}\r\n","import { HttpClientModule } from '@angular/common/http'\r\nimport { BrowserModule } from '@angular/platform-browser'\r\nimport { NgModule } from '@angular/core'\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'\r\nimport { AppRoutingModule } from './app-routing.module'\r\nimport { AppComponent } from './app.component'\r\nimport { RegistrationComponent } from './components/registration-process/registrationpage/registrationpage.component'\r\nimport { LoginComponent } from './components/loginpage/loginpage.component'\r\nimport { LogoutComponent } from './components/logout/logout.component'\r\nimport { ChatwidgetComponent } from './components/chatsystem/chatwidget/chatwidget.component'\r\nimport { FriendlistComponent } from './components/chatsystem/friendlist/friendlist.component'\r\nimport { HeaderComponent } from './components/header/header.component'\r\nimport { FriendComponent } from './components/chatsystem/friendlist/friend/friend.component'\r\nimport { MapComponent } from './components/map/map.component'\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap'\r\nimport { RxReactiveFormsModule } from '@rxweb/reactive-form-validators'\r\nimport { loginComponent } from './components/loginpage/loginpage.component'\r\nimport { ChatsystemComponent } from './components/chatsystem/chatsystem.component'\r\nimport { SidebarComponent } from './components/sidebar/sidebar.component'\r\nimport { ProfileComponent } from './components/profile/profile.component'\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\r\nimport { MatFormFieldModule } from '@angular/material/form-field'\r\nimport { MatInputModule } from '@angular/material/input'\r\nimport { MatIconModule } from '@angular/material/icon'\r\nimport { MatCheckboxModule } from '@angular/material/checkbox'\r\nimport { MatButtonModule } from '@angular/material/button'\r\nimport { PropretyComponent } from './components/profile/proprety/proprety.component'\r\nimport { MatRadioModule } from '@angular/material/radio'\r\nimport { ResizableModule  } from 'angular-resizable-element'\r\nimport { MatAutocompleteModule } from '@angular/material/autocomplete'\r\nimport { MatBadgeModule } from '@angular/material/badge'\r\nimport { MatBottomSheetModule } from '@angular/material/bottom-sheet'\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle'\r\nimport { MatCardModule } from '@angular/material/card'\r\nimport { MatChipsModule } from '@angular/material/chips'\r\nimport { MatStepperModule } from '@angular/material/stepper'\r\nimport { MatDatepickerModule } from '@angular/material/datepicker'\r\nimport { MatDialogModule } from '@angular/material/dialog'\r\nimport { MatDividerModule } from '@angular/material/divider'\r\nimport { MatExpansionModule } from '@angular/material/expansion'\r\nimport { MatGridListModule } from '@angular/material/grid-list'\r\nimport { MatListModule } from '@angular/material/list'\r\nimport { MatMenuModule } from '@angular/material/menu'\r\nimport { MatNativeDateModule, MatRippleModule } from '@angular/material/core'\r\nimport { MatPaginatorModule } from '@angular/material/paginator'\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar'\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner'\r\nimport { MatSelectModule } from '@angular/material/select'\r\nimport { MatSidenavModule } from '@angular/material/sidenav'\r\nimport { MatSliderModule } from '@angular/material/slider'\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle'\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar'\r\nimport { MatSortModule, MatSort } from '@angular/material/sort'\r\nimport { MatTableModule } from '@angular/material/table'\r\nimport { MatTabsModule } from '@angular/material/tabs'\r\nimport { MatToolbarModule } from '@angular/material/toolbar'\r\nimport { MatTooltipModule } from '@angular/material/tooltip'\r\nimport { MatTreeModule } from '@angular/material/tree'\r\nimport { RegistrationProcessComponent } from './components/registration-process/registration-process.component'\r\nimport { SearchresultsComponent } from './components/tabs/searchresults/searchresults.component'\r\nimport { HomeComponent } from './components/tabs/home/home.component'\r\nimport { MyaccountComponent } from './components/myaccount/myaccount.component'\r\nimport { MytripComponent } from './components/tabs/mytrip/mytrip.component'\r\nimport { CountrySelectorComponent } from './components/registration-process/country-selector/country-selector.component'\r\nimport { CountryList } from 'country-list'\r\nimport { VenueButtonComponent } from './components/tabs/searchresults/VenueButton/VenueButton.component'\r\nimport { TripmodalComponent } from './components/tabs/mytrip/tripmodal/tripmodal.component'\r\nimport { VenueComponent } from './components/venue/venue.component'\r\nimport { SearchBarComponent } from './components/search-bar/search-bar.component'\r\nimport { ListObjectPipe } from './pipes/list-object.pipe'\r\nimport { NullPipe } from './pipes/null.pipe'\r\nimport { UserprofileComponent } from './components/userprofile/userprofile.component'\r\nimport { UserbuttonComponent } from './components/tabs/searchresults/userbutton/userbutton.component'\r\nimport { AddVenuePopoverComponent } from './components/tabs/mytrip/add-venue-popover/add-venue-popover.component'\r\nimport { CitySearchComponent } from './components/city-search/city-search.component'\r\nimport { FilterComponent } from './components/filter/filter.component'\r\nimport { ScrollToTopComponent } from './components/sidebar/scroll-to-top/scroll-to-top.component'\r\nimport { AddPostComponent } from './components/add-post/add-post.component'\r\nimport { DisplayPostsComponent } from './components/display-posts/display-posts.component'\r\nimport { CommentSectionComponent } from './components/comment-section/comment-section.component'\r\nimport { CommentComponent } from './components/comment/comment.component'\r\nimport { AddToTripPopoverComponent } from './components/tabs/searchresults/add-to-trip-popover/add-to-trip-popover.component'\r\nimport { DragDropModule } from '@angular/cdk/drag-drop'\r\nimport { ArrayToPipePipe } from './pipes/array-to-pipe.pipe'\r\nimport { EditCommentComponent } from './components/edit-comment/edit-comment.component'\r\nimport { ShareComponent } from './components/share/share.component'\r\nimport {ClipboardModule} from '@angular/cdk/clipboard'\r\nimport { SearchPostsComponent } from './components/search-posts/search-posts.component'\r\nimport { AddTagComponent } from './components/add-tag/add-tag.component'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    RegistrationComponent,\r\n    LoginComponent,\r\n    LogoutComponent,\r\n    ChatwidgetComponent,\r\n    FriendlistComponent,\r\n    HeaderComponent,\r\n    FriendComponent,\r\n    MapComponent,\r\n    loginComponent,\r\n    ChatsystemComponent,\r\n    SidebarComponent,\r\n    ProfileComponent,\r\n    PropretyComponent,\r\n    RegistrationProcessComponent,\r\n    SearchresultsComponent,\r\n    HomeComponent,\r\n    MyaccountComponent,\r\n    MytripComponent,\r\n    CountrySelectorComponent,\r\n    VenueButtonComponent,\r\n    TripmodalComponent,\r\n    VenueComponent,\r\n    SearchBarComponent,\r\n    ListObjectPipe,\r\n    NullPipe,\r\n    UserprofileComponent,\r\n    UserbuttonComponent,\r\n    AddVenuePopoverComponent,\r\n    CitySearchComponent,\r\n    FilterComponent,\r\n    ScrollToTopComponent,\r\n    AddPostComponent,\r\n    DisplayPostsComponent,\r\n    CommentSectionComponent,\r\n    CommentComponent,\r\n    AddToTripPopoverComponent,\r\n    ArrayToPipePipe,\r\n    EditCommentComponent,\r\n    ShareComponent,\r\n    SearchPostsComponent,\r\n    AddTagComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    RxReactiveFormsModule,\r\n    NgbModule,\r\n    BrowserAnimationsModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatIconModule,\r\n    MatCheckboxModule,\r\n    MatButtonModule,\r\n    MatRadioModule,\r\n    ResizableModule,\r\n    MatAutocompleteModule,\r\n    MatBadgeModule,\r\n    MatBottomSheetModule,\r\n    MatButtonModule,\r\n    MatButtonToggleModule,\r\n    MatCardModule,\r\n    MatCheckboxModule,\r\n    MatChipsModule,\r\n    MatStepperModule,\r\n    MatDatepickerModule,\r\n    MatDialogModule,\r\n    MatDividerModule,\r\n    MatExpansionModule,\r\n    MatGridListModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatListModule,\r\n    MatMenuModule,\r\n    MatNativeDateModule,\r\n    MatPaginatorModule,\r\n    MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    MatRadioModule,\r\n    MatRippleModule,\r\n    MatSelectModule,\r\n    MatSidenavModule,\r\n    MatSliderModule,\r\n    MatSlideToggleModule,\r\n    MatSnackBarModule,\r\n    MatSortModule,\r\n    MatTableModule,\r\n    MatTabsModule,\r\n    MatToolbarModule,\r\n    MatTooltipModule,\r\n    MatTreeModule,\r\n    HttpClientModule,\r\n    DragDropModule,\r\n    ClipboardModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { SearchParams } from './../../../models/searchParams'\r\nimport { Component, OnInit, OnDestroy, Input } from '@angular/core'\r\nimport { Subscription } from 'rxjs'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { tab } from 'src/app/models/tab.model'\r\nimport { ActivatedRoute } from '@angular/router'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\nimport { CustomCoordinates } from 'src/app/models/coordinates'\r\n\r\n@Component({\r\n  selector: 'app-searchresults',\r\n  templateUrl: './searchresults.component.html',\r\n  styleUrls: ['./searchresults.component.scss']\r\n})\r\nexport class SearchresultsComponent implements OnInit, OnDestroy {\r\n  queryParams: SearchParams = {}\r\n  openTab: tab\r\n  filterNumber: number\r\n  loading: boolean = null\r\n  @Input() select: number\r\n  categoriesSet: Set<any> = null\r\n\r\n  private _categoriesSet_sub: Subscription\r\n  private returnTab_sub: Subscription\r\n  private filter_sub: Subscription\r\n\r\n  constructor(\r\n    private map: MapService,\r\n    private SearchService: SearchService,\r\n    private ActivatedRoute: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loading = true\r\n\r\n    // search parameters\r\n    this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n      this.queryParams = params\r\n    })\r\n    this.filter_sub = this.SearchService.filterNumber.subscribe((number) => this.filterNumber = number)\r\n\r\n    // response from http queries\r\n    this.returnTab_sub = this.SearchService.searchTab.subscribe((tab: tab) => {\r\n      this.openTab = tab\r\n      this.loading = false\r\n    })\r\n\r\n    this._categoriesSet_sub = this.SearchService.categorySet.subscribe((set: Set<any>) => {\r\n      if (set) {\r\n        this.categoriesSet = set\r\n      }\r\n    })\r\n  }\r\n\r\n  /** check if state of venues|users filter */\r\n  checkFilter(type: number) {\r\n    if (this.filterNumber === 0 || type === this.filterNumber){\r\n      return true\r\n    }\r\n    else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  checkIfChecked(id: string): boolean {\r\n    if (this.categoriesSet.has(id)) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._categoriesSet_sub.unsubscribe()\r\n    this.filter_sub.unsubscribe()\r\n    this.returnTab_sub.unsubscribe()\r\n  }\r\n}\r\n","<div class=\"container-fluid row\" style=\"margin: 0; padding: 0;\">\r\n    <div class=\"col mr-auto\"*ngIf=\"openTab.content\" style=\"margin-left: 0; padding-left: 0;\">\r\n      <br>\r\n      <mat-card *ngIf=\"openTab.content.venues.length === 0 && openTab.content.users.length === 0\">\r\n        <!-- loading animation -->\r\n        <div *ngIf='queryParams.query && loading' class=\"container-fluid row justify-content-center\" style=\"overflow: hidden; padding-top: 1em;\">\r\n          <mat-spinner class=\"col-auto\"></mat-spinner>\r\n        </div>\r\n        <!-- nothing found -->\r\n        <mat-card-header>\r\n          <mat-card-title *ngIf='queryParams.query && !loading'>\r\n            No Matches Found...\r\n          </mat-card-title>\r\n          <!-- no query param -->\r\n          <mat-card-title *ngIf='!queryParams.query && !loading'>\r\n            Search Something!\r\n          </mat-card-title>\r\n        </mat-card-header>\r\n      </mat-card>\r\n      <!-- display venues -->\r\n      <div *ngIf=\"checkFilter(1)\" style=\"min-height: 600px;\">\r\n        <div *ngFor=\"let result of openTab.content.venues\">\r\n          <div *ngIf=\"categoriesSet && checkIfChecked(result.venue.categories[0].id)\">\r\n            <app-venueButton [result]=\"result\"></app-venueButton>\r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- display users -->\r\n      <div *ngIf=\"checkFilter(2)\" style=\"min-height: 600px;\">\r\n        <div *ngFor=\"let result of openTab.content.users\">\r\n          <app-userbutton [result]=\"result\"></app-userbutton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col justify-content-end\" style=\"padding-right: 0; margin-right: 0;\">\r\n      <app-filter></app-filter>\r\n    </div>\r\n</div>\r\n","import { Subscription } from 'rxjs'\r\nimport { Router } from '@angular/router'\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service'\r\nimport { Component, OnInit, OnDestroy } from '@angular/core'\r\nimport { SessionService } from 'src/app/services/session.service'\r\n\r\n@Component({\r\n  selector: 'app-logout',\r\n  templateUrl: './logout.component.html',\r\n  styleUrls: ['./logout.component.scss']\r\n})\r\nexport class LogoutComponent implements OnInit, OnDestroy {\r\n  sessionState: boolean\r\n  private sessionSate_sub: Subscription\r\n\r\n  constructor(private SessionService: SessionService,\r\n              private SocketService: SocketService,\r\n              private router: Router) {\r\n    this.sessionSate_sub = this.SessionService.sessionState.subscribe((x: boolean) => this.sessionState = x)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  // logout user\r\n  logout() {\r\n    if (sessionStorage.getItem('username')) {\r\n      this.SocketService.emit('logout', sessionStorage.getItem('username'), (data) => {\r\n        if (data.res) {\r\n          this.SessionService.session()\r\n        }\r\n      })\r\n    }\r\n    localStorage.removeItem('username')\r\n    sessionStorage.clear()\r\n    window.location.reload()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sessionSate_sub.unsubscribe()\r\n  }\r\n}\r\n","<button mat-flat-button (click)='logout()' *ngIf='sessionState' color='warn' routerLink=\"/\">\r\n    Logout\r\n</button>","export class RoomWidget {\r\n   [prop: string]: any;\r\n   public roomName: string\r\n   public roomId: string\r\n   public unread?: boolean\r\n   public open?: boolean\r\n\r\n   constructor(roomName: string, roomId: string, unread: boolean) {\r\n      this.roomId = roomId\r\n      this.roomName = roomName\r\n   }\r\n}\r\n","import { HttpService } from 'src/app/services/http.service'\r\nimport { tripModel } from '../../../../models/trip.model'\r\nimport { userModel } from './../../../../models/user.model'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { Component, OnInit, Inject } from '@angular/core'\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog'\r\n@Component({\r\n  selector: 'app-tripmodal',\r\n  templateUrl: './tripmodal.component.html',\r\n  styleUrls: ['./tripmodal.component.scss']\r\n})\r\nexport class TripmodalComponent implements OnInit {\r\n\r\n  minDate: Date = new Date()\r\n\r\n  modalForm: FormGroup\r\n  isLoading = false\r\n  nameErr = false\r\n\r\n  trips: tripModel[]\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<TripmodalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      name: string\r\n      start: any,\r\n      end: any\r\n    },\r\n    private HttpService: HttpService)\r\n  {\r\n    this.modalForm = new FormGroup({\r\n      name: new FormControl(null, [Validators.required, Validators.minLength(1)], this.checkName.bind(this)),\r\n      dateRange: new FormGroup({\r\n        start: new FormControl(null),\r\n        end: new FormControl(null)\r\n      })\r\n    })\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  /** check if name of trip is unique**/\r\n  checkName(control: {[key: string]: any}): Promise<{err: string} | null> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpService.get('/user', {})\r\n      .then((response: {\r\n        [key: string]: any\r\n        user: userModel[]\r\n      }) => {\r\n        const trips: tripModel[] = response.user[0].trips ? response.user[0].trips : null\r\n        if (trips) {\r\n          this.trips = trips\r\n          for (let x = 0; x < trips.length; x++) {\r\n            if (trips[x].tripName == control.value) {\r\n              resolve({err: 'name already exists'})\r\n              break\r\n            }\r\n          }\r\n          resolve(null)\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log('err', err)\r\n        reject(err.message)\r\n      })\r\n    })\r\n  }\r\n  /** submit creation of trip */\r\n  onSubmit(data: {\r\n    [key: string]: any\r\n    start: Date\r\n    end: Date}) {\r\n    this.isLoading = true\r\n    const valid = this.checkName({value: data.name})\r\n    if (typeof(valid) == 'string') {\r\n      this.isLoading = false\r\n    } else {\r\n      this.trips.push(\r\n        new tripModel(data.start, data.end, data.name)\r\n      )\r\n      this.HttpService.patch('/user/edit', {\r\n        username: localStorage.getItem('username'),\r\n        proprety: 'trips',\r\n        newProprety: this.trips\r\n      })\r\n      .then((response: any) => {\r\n        if (response.message) {\r\n          this.dialogRef.close(\r\n            new tripModel(data.start, data.end, data.name)\r\n          )\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n      .finally(() => {\r\n        this.isLoading = false\r\n      })\r\n    }\r\n  }\r\n\r\n  onCancel() {\r\n    this.dialogRef.close()\r\n  }\r\n}\r\n","<mat-card class=\"container-fluid\">\r\n    <mat-card-title mat-dialog-title> New Trip </mat-card-title>\r\n    <hr>\r\n    <mat-card-content mat-dialog-content class=\"container-fluid\">\r\n        <form [formGroup]='modalForm'>\r\n            <mat-form-field class=\"example-full-width\">\r\n                <mat-label>Trip Name</mat-label>\r\n                <input matInput formControlName='name' placeholder=\"Ex. Simon va a Prague\" [(ngModel)]=\"data.name\">\r\n                <small *ngIf='this.modalForm.get(\"name\").touched && !this.modalForm.get(\"name\").valid' class=\"text-danger\">please create a name</small>\r\n              </mat-form-field>\r\n            <br>\r\n            <mat-form-field >\r\n                <mat-label>Enter a date range</mat-label>\r\n                <mat-date-range-input [rangePicker]=\"picker\" formGroupName='dateRange' [min]='minDate'>\r\n                    <input matStartDate placeholder=\"Start date\" formControlName='start' [(ngModel)]=\"data.start\" >\r\n                    <input matEndDate placeholder=\"End date\" formControlName='end' [(ngModel)]=\"data.end\">\r\n                </mat-date-range-input>\r\n                <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n                <mat-date-range-picker #picker></mat-date-range-picker>\r\n            </mat-form-field>\r\n        </form>\r\n\r\n    </mat-card-content>\r\n    <mat-card-actions mat-dialog-actions>\r\n        <button mat-button (click)='onCancel()'>Cancel</button>\r\n        <button mat-button *ngIf='!isLoading' color='primary' (click)='onSubmit(data)'>Save</button>\r\n        <button mat-button *ngIf='isLoading'><mat-spinner [diameter]='50'></mat-spinner></button>\r\n    </mat-card-actions>\r\n</mat-card>\r\n","import { AbstractControl } from '@angular/forms'\r\nimport { Observable, Observer, of } from 'rxjs'\r\n\r\nexport const mimeType = (\r\n  control: AbstractControl\r\n): Promise<{ [key: string]: any }> | Observable<{ [key: string]: any }> => {\r\n  if (typeof(control.value) === 'string') {\r\n    return of(null)\r\n  }\r\n  const file = control.value as File\r\n  const fileReader = new FileReader()\r\n  const frObs = Observable.create(\r\n    (observer: Observer<{ [key: string]: any }>) => {\r\n      fileReader.addEventListener('loadend', () => {\r\n        const arr = new Uint8Array(fileReader.result as ArrayBuffer).subarray(0, 4)\r\n        let header = ''\r\n        let isValid = false\r\n        for (let i = 0; i < arr.length; i++) {\r\n          header += arr[i].toString(16)\r\n        }\r\n        switch (header) {\r\n          case '89504e47':\r\n            isValid = true\r\n            break\r\n          case 'ffd8ffe0':\r\n          case 'ffd8ffe1':\r\n          case 'ffd8ffe2':\r\n          case 'ffd8ffe3':\r\n          case 'ffd8ffe8':\r\n            isValid = true\r\n            break\r\n          default:\r\n            isValid = false // Or you can use the blob.type as fallback\r\n            break\r\n        }\r\n        if (isValid) {\r\n          observer.next(null)\r\n        } else {\r\n          observer.next({ invalidMimeType: true })\r\n        }\r\n        observer.complete()\r\n      })\r\n      fileReader.readAsArrayBuffer(file)\r\n    }\r\n  )\r\n  return frObs\r\n}\r\n","import { CustomCoordinates } from './../app/models/coordinates'\r\nexport const environment = {\r\n\r\n\r\n  production: true,\r\n  language: 'en',\r\n  // travelnetURL: 'https://travelnet.herokuapp.com',\r\n  travelnetURL: 'localhost:3000',\r\n  travelnetCommentURL: \"localhost:3000/api/comments/\",\r\n\r\n  mapbox: {\r\n    token: 'pk.eyJ1IjoidHJhdmVsbmV0IiwiYSI6ImNrOTk3cHkwaDAzaHkzZHEwMm03ZGN0MG8ifQ.j24u0Q5RbYw7PW4tVpGjmQ',\r\n    geocoding: 'https://api.mapbox.com/geocoding/v5/mapbox.places'\r\n  },\r\n\r\n  foursquare: {\r\n    clientId: 'NYZJ324E5GAY2MSQUNYIYLKIDCMX2ETMQREKQXZLW3S5ZYVG',\r\n    clientSecret: 'K51P2Y1T3TMTCU24LOFHDFOAONPGU44ZBNZCGTWCOJESUW4A',\r\n    v: '',\r\n    venuesSearch: 'https://api.foursquare.com/v2/venues/search',\r\n    venuesExplore: 'https://api.foursquare.com/v2/venues/explore',\r\n    venueDetails: 'https://api.foursquare.com/v2/venues',\r\n    userAuth: 'https://foursquare.com/oauth2/authenticate',\r\n    getCategories: 'https://api.foursquare.com/v2/venues/categories',\r\n\r\n  },\r\n\r\n  nominatim: {\r\n    search: 'https://nominatim.openstreetmap.org/search',\r\n    reverse: 'https://nominatim.openstreetmap.org/reverse'\r\n  },\r\n\r\n  openstreetmap: {\r\n    searchNodes: 'https://master.apis.dev.openstreetmap.org/api/0.6/map',\r\n    searchRealNode: ' https://api.openstreetmap.org/api/0.6/map'\r\n  },\r\n\r\n  travelnet: {\r\n    getUserInfo: 'https://travelnet.herokuapp.com/user',\r\n    getProfile: 'https://travelnet.herokuapp.com/profile',\r\n    searchUsers: 'https://travelnet.herokuapp.com/searchusers',\r\n    travelnetCommentURL: 'https://travelnet.herokuapp.com/comments',\r\n    travelnetPostURL: 'https://travelnet.herokuapp.com/posts',\r\n  },\r\n  montrealCoord: new CustomCoordinates(-73.5633265, 45.5009128)\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core'\r\nimport { Comment } from 'src/app/models/comment.model'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { CommentsService } from 'src/app/services/comments.service'\r\nimport { MatDialog } from '@angular/material/dialog'\r\nimport { EditCommentComponent } from '../edit-comment/edit-comment.component'\r\n\r\n\r\n@Component({\r\n  selector: 'app-comment',\r\n  templateUrl: './comment.component.html',\r\n  styleUrls: ['./comment.component.scss']\r\n})\r\nexport class CommentComponent implements OnInit {\r\n  @Input() comment: Comment\r\n  @Input() postId: string\r\n  displayEdits = false\r\n  replyField = true\r\n  showReplies = false\r\n  form: FormGroup\r\n  constructor(\r\n    private commentsService: CommentsService,\r\n    public dialog: MatDialog\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      content: new FormControl(null, { validators: [Validators.required] }),\r\n      })\r\n  }\r\n\r\n  replyBoolean(){\r\n    this.replyField = !this.replyField\r\n  }\r\n\r\n  onAddReply(){ // add comment reply\r\n    if (this.form.invalid) {\r\n      return\r\n    }\r\n    const newReply = {\r\n      date: new Date().toLocaleString(),\r\n      author: sessionStorage.getItem('username'),\r\n      content: this.form.value.content,\r\n    }\r\n    const replyContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      reply: newReply\r\n    }\r\n    this.commentsService.reply(replyContent)\r\n    this.form.reset()\r\n  }\r\n\r\n  likeTreeComment(){ //like a root tree\r\n    const likeContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      username: sessionStorage.getItem('username'),\r\n      replyId: null\r\n    }\r\n    this.commentsService.likeComment(likeContent)\r\n  }\r\n\r\n  likeLeafComment(replyId){ //like a child comment\r\n    const likeContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      username: sessionStorage.getItem('username'),\r\n      replyId\r\n    }\r\n    this.commentsService.likeComment(likeContent)\r\n  }\r\n\r\n  deleteTreeComment(){ //delete a root comment\r\n    const deleteContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      replyId: null\r\n    }\r\n    this.commentsService.deleteComment(deleteContent)\r\n  }\r\n\r\n  deleteLeafComment(replyId){// delete a child comment\r\n    const deleteContent = {\r\n      postId: this.postId,\r\n      commentId: this.comment._id,\r\n      replyId\r\n    }\r\n    this.commentsService.deleteComment(deleteContent)\r\n  }\r\n\r\n  editTreeComment(){ //edit a root comment\r\n    const commentInfo = {\r\n      postId: this.postId,\r\n      comment: this.comment,\r\n      reply: null\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent, {data: {displayEdits: false, commentData: commentInfo}})\r\n    dialogRef.afterClosed().subscribe()\r\n  }\r\n\r\n  editLeafComment(reply){ //edit a root comment\r\n    const commentInfo = {\r\n      postId: this.postId,\r\n      comment: this.comment,\r\n      reply\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent, {data: {displayEdits: false, commentData: commentInfo}})\r\n    dialogRef.afterClosed().subscribe()\r\n\r\n  }\r\n\r\n  showParentEdits(){ // show previous edit for root comment\r\n    const commentInfo = {\r\n      postId: this.postId,\r\n      comment: this.comment,\r\n      reply: null\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent, {data: {displayEdits: true, commentData: commentInfo}})\r\n    dialogRef.afterClosed().subscribe()\r\n  }\r\n\r\n  showLeafEdits(reply){  // show previous edit for child comment\r\n    const commentInfo = {\r\n      postId: this.postId,\r\n      comment: reply,\r\n      reply: true\r\n    }\r\n    const dialogRef = this.dialog.open(EditCommentComponent, {data: {displayEdits: true, commentData: commentInfo}})\r\n    dialogRef.afterClosed().subscribe()\r\n  }\r\n\r\n  ownContent(content){ //check if content belongs to user\r\n    if (content.author === sessionStorage.getItem('username')){\r\n      return true\r\n    }\r\n  }\r\n}\r\n","\r\n<mat-card>\r\n  {{comment.author}} : {{comment.content}}\r\n  <div>\r\n    <button mat-button (click)=\"likeTreeComment()\">LIKE</button>\r\n    {{comment.likes.length}}\r\n    <button mat-button (click)=\"replyBoolean()\">REPLY</button>\r\n    <button *ngIf=\"ownContent(comment.author)\" mat-button (click)=\"deleteTreeComment()\">DELETE</button>\r\n    <button *ngIf=\"ownContent(comment.author)\" mat-button (click)=\"editTreeComment()\">EDIT</button>\r\n    <button mat-button *ngIf=\"comment.edited && comment.edited.length > 0\" (click)=\"showParentEdits()\">edited</button>\r\n  </div>\r\n\r\n  <div *ngIf=\"replyField\">\r\n    <mat-card *ngFor=\"let reply of comment.replies\">\r\n      <mat-card-header> {{reply.author}} : {{reply.content }}\r\n        <div>\r\n          <button mat-button (click)=\"likeLeafComment(reply._id)\">LIKE</button>\r\n          {{reply.likes.length}}\r\n          <button mat-button >REPLY</button>\r\n          <button mat-button (click)=\"deleteLeafComment(reply._id)\">DELETE</button>\r\n          <button *ngIf=\"ownContent(reply.author)\" mat-button (click)=\"editLeafComment(reply)\">EDIT</button>\r\n          <button  mat-button *ngIf=\"reply.edited && reply.edited.length > 0 && ownContent(reply.author)\" (click)=\"showLeafEdits(reply)\">edited</button>\r\n        </div>\r\n      </mat-card-header>\r\n   </mat-card>\r\n    <div *ngIf=\"replyField\">\r\n        <form [formGroup]=\"form\" (submit)=\"onAddReply()\">\r\n          <mat-form-field>\r\n            <input matInput type=\"text\" formControlName=\"content\" placeholder=\"say something...\">\r\n          </mat-form-field>\r\n        </form>\r\n      </div>\r\n  </div>\r\n\r\n  </mat-card>\r\n","import { Pipe, PipeTransform } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'listObject'\r\n})\r\nexport class ListObjectPipe implements PipeTransform {\r\n\r\n  transform(value: {[key: string]: any}, ...args: unknown[]): unknown {\r\n    return null\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core'\r\nimport { AddPostService } from 'src/app/services/add-post.service'\r\nimport { CommentsService } from 'src/app/services/comments.service'\r\nimport { ActivatedRoute } from '@angular/router'\r\nimport { Comment } from 'src/app/models/comment.model'\r\nimport { Post } from 'src/app/models/post.model'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\n\r\n@Component({\r\n  selector: 'app-comment-section',\r\n  templateUrl: './comment-section.component.html',\r\n  styleUrls: ['./comment-section.component.scss']\r\n})\r\nexport class CommentSectionComponent implements OnInit {\r\n  @Input() post: Post\r\n  public comments: Comment[]\r\n  form: FormGroup\r\n\r\n\r\n  constructor(\r\n    private postsService: AddPostService,\r\n    private route: ActivatedRoute,\r\n    private commentsService: CommentsService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new FormGroup({\r\n      content: new FormControl(null, { validators: [Validators.required] }),\r\n    })\r\n  }\r\n\r\n  onAddComment() {\r\n    if (this.form.invalid) {\r\n      return\r\n    }\r\n    const newComment = {\r\n      date: new Date().toLocaleString(),\r\n      author: sessionStorage.getItem('username'),\r\n      content: this.form.value.content,\r\n    }\r\n    this.commentsService.addComment(newComment, this.post._id)\r\n    this.form.reset()\r\n  }\r\n\r\n}\r\n","<mat-card>\r\n  <form [formGroup]=\"form\" (submit)=\"onAddComment()\">\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"content\" placeholder=\"say something...\">\r\n    </mat-form-field>\r\n  </form>\r\n  <app-comment *ngFor=\"let comment of post.comments\"\r\n  [comment]='comment'\r\n  [postId]='this.post._id'>\r\n\r\n  </app-comment>\r\n</mat-card>\r\n","import { Subscription } from 'rxjs'\r\nimport { MatHorizontalStepper } from '@angular/material/stepper'\r\nimport { SocketService } from '../../../services/chatsystem/socket.service'\r\nimport { Component, OnDestroy, OnInit, Input, ViewChild} from '@angular/core'\r\nimport { SessionService } from '../../../services/session.service'\r\nimport { NgbModalConfig, NgbModal } from '@ng-bootstrap/ng-bootstrap'\r\nimport { Router } from '@angular/router'\r\nimport { FormControl, FormGroup, Validators, Form } from '@angular/forms'\r\nimport * as moment from 'moment'\r\nimport { FoursquareService } from 'src/app/services/map/foursquare.service'\r\n\r\n\r\n@Component({\r\n    selector: 'app-registrationpage',\r\n    templateUrl: './registrationpage.component.html',\r\n    styleUrls: ['./registrationpage.component.scss'],\r\n    providers: [NgbModalConfig, NgbModal, ]\r\n})\r\n\r\nexport class RegistrationComponent implements OnDestroy, OnInit {\r\n\r\n  constructor(private SocketService: SocketService,\r\n              private sessionService: SessionService,\r\n              private modalService: NgbModal,\r\n              private router: Router,\r\n              private FoursquareService: FoursquareService\r\n              ) {}\r\n  private sessionState_sub: Subscription\r\n  sessionState: Boolean\r\n  registrationForm: FormGroup\r\n  hide = true\r\n  hide1 = true\r\n  currentTime: string = new Date().toISOString()\r\n  @Input() stepper: MatHorizontalStepper\r\n\r\n  checkPasswordValidity = false\r\n\r\n  ngOnInit(){\r\n    this.registrationForm = new FormGroup({\r\n      // 'name': new FormGroup({\r\n      //   'firstName': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(50)]),\r\n      //   'lastName': new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(50)]),\r\n      // },),\r\n      passwords: new FormGroup({\r\n        password: new FormControl(null, [Validators.required, Validators.minLength(5), Validators.maxLength(15)]),\r\n        confirmPassword: new FormControl(null, [Validators.required, Validators.minLength(5), Validators.maxLength(15)]),\r\n      }, this.checkPasswordsMatch.bind(this)),\r\n      birthDate: new FormControl(null, [Validators.required]),\r\n      username: new FormControl(null, [ Validators.required, Validators.minLength(2), Validators.maxLength(15)], this.forbiddenUsernames.bind(this)),\r\n      email: new FormControl(null, [Validators.required, Validators.email]),\r\n      checkbox: new FormControl(null, [Validators.required]),\r\n      gender: new FormControl(null, [Validators.required]),\r\n    })\r\n\r\n    this.sessionState_sub = this.sessionService.sessionState.subscribe((state: boolean) => {\r\n      this.sessionState = state\r\n    })\r\n  }\r\n\r\n  checkUsernameUse() {\r\n    if (this.registrationForm.get('username').errors && this.registrationForm.get('username').dirty){\r\n      if (this.registrationForm.get('username').errors.forbiddenUsername){\r\n        return true\r\n      }\r\n    } else {\r\n        return false\r\n      }\r\n  }\r\n\r\n  checkUsernameLength() {\r\n    if (this.registrationForm.get('username').errors && this.registrationForm.get('username').dirty){\r\n      if (this.registrationForm.get('username').errors.maxlength || this.registrationForm.get('username').errors.minlength){\r\n        return true\r\n      }\r\n    } else {\r\n        return false\r\n      }\r\n  }\r\n  checkPasswordsMatch(control: FormControl) {\r\n    if (this.registrationForm) {\r\n      const pass: string = control.get('password').value\r\n      const confirm: string = control.get('confirmPassword').value\r\n      if (pass === confirm) {\r\n        this.checkPasswordValidity = false\r\n        return\r\n      } else {\r\n        if (control.get('confirmPassword').dirty) {\r\n          this.checkPasswordValidity = true\r\n        }\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  checkPasswordLength() {\r\n    if (this.registrationForm.get('passwords.password').errors && this.registrationForm.get('passwords.password').dirty){\r\n      if (this.registrationForm.get('passwords.password').errors.maxlength || this.registrationForm.get('passwords.password').errors.minlength){\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  checkEmailValidity() {\r\n    if (this.registrationForm.get('email').errors && this.registrationForm.get('email').dirty){\r\n      if (this.registrationForm.get('email').errors.email){\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  // check if user is older than 13\r\n  isOld(){\r\n    const birth = this.registrationForm.get('birthDate').value\r\n    const now = moment(this.currentTime)\r\n    const difference = now.diff(birth, 'years')\r\n    if (difference < 13){\r\n      return false\r\n    }\r\n    else{\r\n      return true\r\n    }\r\n  }\r\n\r\n  forbiddenUsernames(control: FormControl): Promise<any> {\r\n    return new Promise<any>((resolve, reject) => {\r\n      this.SocketService.emit('searchUser', [control.value], (res) => {\r\n        if (res.res) {\r\n          resolve({forbiddenUsername: true})\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  onSubmit()  {\r\n    // check age\r\n    if (this.isOld()) {\r\n      // check form validity && if logged in\r\n      if (this.registrationForm.valid && !(sessionStorage.getItem('username'))) {\r\n        const data = {\r\n          // firstName:this.registrationForm.get('name.firstName').value,\r\n          // lastName:this.registrationForm.get('name.lastName').value,\r\n          email: this.registrationForm.get('email').value,\r\n          username: this.registrationForm.get('username').value,\r\n          password: this.registrationForm.get('passwords.password').value,\r\n          gender: this.registrationForm.get('gender').value,\r\n          birthdate: this.registrationForm.get('birthDate').value\r\n        }\r\n        this.SocketService.emit('createUser', data, (res) => {\r\n          // error in backend\r\n          if (res.err) {\r\n            alert(`an error occured ${res.err}`)\r\n          }\r\n          // successfull\r\n          else if (res.user) {\r\n            sessionStorage.setItem('username', res.user.username)\r\n            localStorage.setItem('token', res.token)\r\n            localStorage.setItem('username', res.user.username)\r\n            this.sessionService.session()\r\n            this.modalService.dismissAll()\r\n            this.stepper.next()\r\n            console.log(`user created: ${sessionStorage.getItem('username')}`)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    // not old enough\r\n    else {\r\n      alert('You must be at least 13 years old to register')\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(){\r\n    // this.router.navigate(['/'])\r\n    this.sessionState_sub.unsubscribe()\r\n  }\r\n\r\n}\r\n\r\n","<form\r\n  ngbAutofocus\r\n  class='modal-body'\r\n  id='form'\r\n  (ngSubmit)=\"onSubmit()\"\r\n  #form\r\n  [formGroup]='registrationForm'\r\n  *ngIf='!sessionState'>\r\n    <h1 class='modal-title'>Registration</h1>\r\n    <hr>\r\n    <!-- Name -->\r\n    <!-- <div formGroupName='name' class=\"row\"> -->\r\n      <!-- first Name -->\r\n      <!-- <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='First Name'>First Name</mat-label>\r\n        <input matInput\r\n        placeholder=\"Enter your first name\"\r\n        formControlName='firstName'>\r\n      </mat-form-field> -->\r\n      <!-- Last Name -->\r\n      <!-- <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Last Name</mat-label>\r\n        <input matInput\r\n        placeholder=\"Enter your last name\"\r\n        formControlName='lastName'>\r\n      </mat-form-field>\r\n    </div> -->\r\n    <!-- username -->\r\n    <mat-form-field appearance=\"outline\" class='form-group' id=\"username\">\r\n      <mat-label for='username'>Username</mat-label>\r\n      <input matInput formControlName='username' placeholder=\"Enter a Username\" autocomplete=\"off\">\r\n      <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkUsernameUse()\">This username is already in use.</small>\r\n      <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkUsernameLength()\">Your username must be between 2 and 15 characters long.</small>\r\n    </mat-form-field>\r\n    <!-- password confirmation -->\r\n    <div formGroupName='passwords' class=\"row\">\r\n      <!-- password -->\r\n      <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Password</mat-label>\r\n        <input matInput\r\n        placeholder=\"Enter a password\"\r\n        formControlName='password'\r\n        [type]=\"hide ? 'password' : 'text'\">\r\n        <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkPasswordLength()\">your password should be between 5-15 characters</small>\r\n        <button mat-button\r\n        type='button'\r\n        mat-icon-button matSuffix (click)=\"hide = !hide\" [attr.aria-label]=\"'Hide password'\" [attr.aria-pressed]=\"hide\">\r\n        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <!-- confirm password -->\r\n      <mat-form-field appearance=\"outline\" class='form-group col-6'>\r\n        <mat-label for='password'>Confirm your password</mat-label>\r\n        <input matInput\r\n        placeholder=\"confirm your password\"\r\n        formControlName='confirmPassword'\r\n        [type]=\"hide1 ? 'password' : 'text'\">\r\n        <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkPasswordValidity\">your passwords do not match</small>\r\n        <button\r\n        type=\"button\"\r\n        mat-icon-button matSuffix (click)=\"hide1 = !hide1\" [attr.aria-label]=\"'Hide password'\"\r\n        [attr.aria-pressed]=\"hide1\">\r\n        <mat-icon>{{hide1 ? 'visibility_off' : 'visibility'}}</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n    </div>\r\n    <!-- email -->\r\n    <mat-form-field appearance=\"outline\" class='form-group' id=\"email\">\r\n      <mat-label for='email'>Email Address</mat-label>\r\n      <input matInput\r\n      formControlName='email'\r\n      placeholder='Enter a valid Email'>\r\n      <small id=\"passwordHelpBlock\" class=\"text-danger\" *ngIf=\"checkEmailValidity()\">Please enter a valid email</small>\r\n      <small id='emailHelp' class='form-text text-muted'>We'll never share your email with anyone else.</small>\r\n    </mat-form-field>\r\n    <!-- Birthdate -->\r\n    <div class=\"form-inline\">\r\n      <div class=\"form-group\">\r\n        <div class=\"input-group\">\r\n          <mat-form-field id=\"calendar\" appearance=\"outline\">\r\n            <mat-label>Birthdate</mat-label>\r\n            <input\r\n              matInput\r\n              [matDatepicker]=\"picker\"\r\n              [max]='currentTime'\r\n              formControlName=\"birthDate\"\r\n              class=\"align-self-center\">\r\n            <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n            <mat-datepicker #picker startView=\"multi-year\"></mat-datepicker>\r\n          </mat-form-field>\r\n          <!-- <input\r\n            id=\"calendar\"\r\n            class=\"form-control\"\r\n            [minDate]=\"{year: 1900, month: 1, day: 1}\" [maxDate]=\"{year: 2020, month: 1, day: 1}\"\r\n            placeholder=\"yyyy-mm-dd\"\r\n            formControlName=\"birthDate\"\r\n            name=\"dp\"\r\n            [(ngModel)]=\"model\"\r\n            ngbDatepicker\r\n            #d=\"ngbDatepicker\">\r\n          <button\r\n            id='calendarSelector'\r\n            class=\"btn btn-outline-secondary calendar input-group-append rounded-0\"\r\n            (click)=\"d.toggle()\" type=\"button\">\r\n            <mat-icon>calendar_today</mat-icon>\r\n          </button> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Gender -->\r\n    <mat-label class=\"\">Gender</mat-label>\r\n    <mat-radio-group aria-label=\"Select an option\" class=\"row\"\r\n    formControlName=\"gender\">\r\n      <mat-radio-button value=\"Male\" class='col-4'>Male</mat-radio-button>\r\n      <mat-radio-button value=\"Female\" class='col-4'>Female</mat-radio-button>\r\n      <mat-radio-button value=\"Other\" class='col-4'>Other</mat-radio-button>\r\n    </mat-radio-group>\r\n    <br>\r\n    <!-- checkbox -->\r\n    <div>\r\n      <mat-checkbox class='form-group'\r\n        formControlName='checkbox'>\r\n        <label class='form-check-label' for='terms'>I have read and understand the terms & conditions of this agreement</label>\r\n      </mat-checkbox>\r\n    </div>\r\n    <br>\r\n    <!-- submit -->\r\n    <button mat-raised-button color='primary'>Register</button>\r\n  </form>\r\n  <div class=\"container-fluid\" style=\"height: 100%; padding: 1%; background-color: white;\" *ngIf='sessionState'>\r\n    <h2>You are already registered</h2>\r\n  </div>\r\n","import { foursquareCategory } from './../models/CategoryNode.model'\r\nimport { SearchParams } from './../models/searchParams'\r\nimport { logging } from 'protractor'\r\nimport { CustomCoordinates } from './../models/coordinates'\r\nimport { tab } from 'src/app/models/tab.model'\r\nimport { BehaviorSubject, Observable } from 'rxjs'\r\nimport { environment } from 'src/environments/environment'\r\nimport { FoursquareService } from './map/foursquare.service'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Injectable, OnDestroy } from '@angular/core'\r\nimport { CategoryNode } from '../models/CategoryNode.model'\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchService implements OnDestroy {\r\n  /**if user is already searchign something */\r\n  currentSearch: SearchParams = null\r\n\r\n  private search: tab = {query: null, content : {users: [], venues: []}}\r\n  private _searchTab: BehaviorSubject<tab> = new BehaviorSubject(this.search)\r\n  public searchTab: Observable<tab> = this._searchTab.asObservable()\r\n\r\n  private filter = 0\r\n  private _filterNumber: BehaviorSubject<number> = new BehaviorSubject(this.filter)\r\n  public filterNumber: Observable<number> = this._filterNumber.asObservable()\r\n\r\n  private categories: foursquareCategory[] = null\r\n  private _categoryTree: BehaviorSubject<foursquareCategory[] | CategoryNode[]> = new BehaviorSubject(this.categories)\r\n  public categoryTree: Observable<foursquareCategory[] | CategoryNode[]> = this._categoryTree.asObservable()\r\n\r\n  private categoriesCollection: any\r\n  private _categorySet: BehaviorSubject<Set<any>> = new BehaviorSubject(this.categoriesCollection)\r\n  public categorySet: Observable<Set<any>> = this._categorySet.asObservable()\r\n\r\n  treeValues: {\r\n    [key: string]: any\r\n    tree: [],\r\n    categorySet: Set<any>\r\n  } = {\r\n    tree: [],\r\n    categorySet: new Set()\r\n  }\r\n\r\n  constructor(private HttpClient: HttpClient,\r\n              private foursquareService: FoursquareService) {\r\n    this.updateCategories()\r\n    .then((x: foursquareCategory[]) => {\r\n      this._categoryTree.next(x)\r\n      this._categorySet.next(this.treeValues.categorySet)\r\n    })\r\n\r\n    this.currentSearch = null\r\n  }\r\n\r\n  // looks for venues in the area\r\n  foursquareSearchVenues(query: string, latLng: CustomCoordinates): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.foursquareService.searchVenues(query, latLng.toStringReorder(2))\r\n      .subscribe((result) => {\r\n        resolve(result)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    }\r\n  ) }\r\n\r\n  /**gets user info with username input, connection to database*/\r\n  userSearch(query: string): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      this.HttpClient.get<any>(environment.travelnet.searchUsers,\r\n        {\r\n          headers: {\r\n            authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas',\r\n          },\r\n          params: {\r\n            user: query\r\n          }\r\n        }\r\n      )\r\n      .subscribe((result) => {\r\n        resolve(result)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    }\r\n  ) }\r\n\r\n  /** gets venue data with id in the query */\r\n  formatDetails(query: string){\r\n    return new Promise<any>((resolve, reject) => {\r\n      this.foursquareService.getDetails(query)\r\n      .subscribe(result => {\r\n        resolve(result)\r\n      }, (err) => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**combines both user and venue search*/\r\n  async mainSearch(query: string, coord: CustomCoordinates): Promise<any[]> {\r\n    return await Promise.all([this.foursquareSearchVenues(query, coord), this.userSearch(query)])\r\n  }\r\n\r\n  /**user makes new search in a tab*/\r\n  enterSearch(query: string, searchType: Promise<any>, coord: CustomCoordinates) {\r\n    return new Promise((resolve, reject) => {\r\n      this.resetSearchContent()\r\n      searchType\r\n      .then(result => {\r\n\r\n        if (result[0].response.totalResults != 0) {\r\n          result[0].response.groups[0].items.forEach(venue => {\r\n            this.search.content.venues.push(venue)\r\n          })\r\n        } else {\r\n          this.search.content.venues = []\r\n        }\r\n\r\n        if (sessionStorage.getItem('username')) {\r\n          if (result[1].users) {\r\n            result[1].users.forEach(user => {\r\n              this.search.content.users.push(user)\r\n            })\r\n          }\r\n        } else {\r\n          this.search.content.users.push({username : 'warning', name : 'You must be logged in to see users'})\r\n        }\r\n\r\n        this.search = ({\r\n          query: {\r\n            query,\r\n            lng: coord.lng,\r\n            lat: coord.lat\r\n          },\r\n          content: this.search.content\r\n        })\r\n        this._searchTab.next(this.search)\r\n        resolve()\r\n      })\r\n      .catch(err => {\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**update foursquare categories*/\r\n  updateCategories(): Promise<foursquareCategory[] | CategoryNode[]> {\r\n    return new Promise((resolve, reject) => {\r\n      this.foursquareService.updateCategories()\r\n      .subscribe(x => {\r\n        this.initiateTree(x.response.categories)\r\n        resolve(x.response.categories)\r\n      }, err => {\r\n        console.log(err)\r\n        reject(err)\r\n      })\r\n    })\r\n  }\r\n\r\n  /**makes tree leaves checked and creates array containing category id*/\r\n  initiateTree(data: CategoryNode[]) {\r\n    data.forEach((category: CategoryNode) => {\r\n      if (category.categories.length === 0) {\r\n        category.checked = true\r\n        this.treeValues.categorySet.add(category.id)\r\n      }\r\n      else if (category.categories.length !== 0) {\r\n        this.treeValues.categorySet.add(category.id)\r\n        this.initiateTree(category.categories)\r\n      }\r\n    })\r\n  }\r\n\r\n  updateCategoryTree(newData){\r\n    this._categoryTree.next(newData)\r\n  }\r\n\r\n  updateCategorySet(newData){\r\n    this._categorySet.next(newData)\r\n  }\r\n\r\n  getSearchResult(search){\r\n    if (search.type == 'venue'){\r\n      return ('venue: ' + search.name)\r\n    }\r\n    else{\r\n      return ('User: ' + search.name)\r\n    }\r\n  }\r\n\r\n  resetSearchContent(){\r\n    this.search.content = {venues: [], users: []}\r\n    this._searchTab.next(this.search)\r\n  }\r\n\r\n  changeFilter(filter: number){\r\n    this._filterNumber.next(filter)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._searchTab.unsubscribe()\r\n    this._categoryTree.unsubscribe()\r\n    this._categorySet.unsubscribe()\r\n    this._filterNumber.unsubscribe()\r\n  }\r\n}\r\n","import { environment } from './../../../environments/environment.dev'\r\nimport { OpenstreetmapService } from './../../services/map/openstreetmap.service'\r\nimport { SearchParams } from './../../models/searchParams'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { CustomCoordinates } from './../../models/coordinates'\r\nimport { CitySearchComponent } from './../city-search/city-search.component'\r\nimport { CategoryNode, foursquareCategory } from './../../models/CategoryNode.model'\r\nimport { Component, OnInit, OnDestroy, ViewChild, ElementRef, AfterViewInit, Input, Output, EventEmitter } from '@angular/core'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\nimport { Router, ActivatedRoute } from '@angular/router'\r\nimport { SearchService } from 'src/app/services/search.service'\r\nimport { tab } from 'src/app/models/tab.model'\r\nimport { Subscription } from 'rxjs'\r\nimport { geocodeResponseModel } from 'src/app/models/geocodeResp.model'\r\n\r\n@Component({\r\n  selector: 'app-search-bar',\r\n  templateUrl: './search-bar.component.html',\r\n  styleUrls: ['./search-bar.component.scss']\r\n})\r\nexport class SearchBarComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Output() submission = new EventEmitter<void>()\r\n  @Input() isChild = false\r\n  loading = false\r\n\r\n  foursquareCategory_sub: Subscription\r\n  categories: foursquareCategory[]\r\n  openTab: tab\r\n  fakeCenter: CustomCoordinates = null\r\n  private returnTab_sub: Subscription\r\n  private fakeCenter_sub: Subscription\r\n  @ViewChild('searchResultsContainer') div: ElementRef\r\n\r\n  // forms\r\n  searchBarForm: FormGroup\r\n\r\n  // filters\r\n  @ViewChild(CitySearchComponent) CitySearchComponent: CitySearchComponent\r\n  private clickedOption_sub: Subscription\r\n  clickedOption: geocodeResponseModel = null\r\n  filterOptions: {\r\n    0: string,\r\n    1: string,\r\n    2: string\r\n  } = {\r\n    0: '...',\r\n    1: 'Venues',\r\n    2: 'Users'\r\n  }\r\n  defaultFilter = '0'\r\n  defaultCategory = 'All'\r\n\r\n  constructor(\r\n    private MapService: MapService,\r\n    private router: Router,\r\n    private SearchService: SearchService,\r\n    private ActivatedRoute: ActivatedRoute,\r\n    private OpenstreetmapService: OpenstreetmapService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.searchBarForm = new FormGroup({\r\n      venueName: new FormControl(null, [Validators.required, Validators.minLength(1), Validators.maxLength(25)])\r\n    })\r\n\r\n\r\n    this.returnTab_sub = this.SearchService.searchTab.subscribe((tab) => {\r\n      this.openTab = tab\r\n    })\r\n\r\n    this.fakeCenter_sub = this.MapService.fakeCenter.subscribe((coord: CustomCoordinates) => {\r\n      this.fakeCenter = coord ? coord : environment.montrealCoord\r\n    })\r\n\r\n    this.foursquareCategory_sub = this.SearchService.categoryTree.subscribe((cats: foursquareCategory[]) => {\r\n      this.categories = cats\r\n    })\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // for coordinates of city search\r\n    this.clickedOption_sub = this.CitySearchComponent.clickedOption.subscribe((city: geocodeResponseModel) => {\r\n      if (city) {\r\n        this.clickedOption = city\r\n      } else {\r\n        this.clickedOption = null\r\n      }\r\n    })\r\n\r\n    this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n      // set param to montreal if no location param\r\n      if (!params.lng) {\r\n        // this.CitySearchComponent.myControl.patchValue('Montreal, Canada')\r\n        this.CitySearchComponent._clickedOptionLocal = new geocodeResponseModel(this.CitySearchComponent.myControl.value, [this.fakeCenter.lng, this.fakeCenter.lat])\r\n      } else {\r\n        this.OpenstreetmapService.reverseSearch(params.lng, params.lat).subscribe((response: {[key: string]: any}) => {\r\n          if (response.features[0]) {\r\n            this.CitySearchComponent.myControl.patchValue(response.features[0].properties.address.city + ',' + response.features[0].properties.address.country)\r\n          }\r\n        })\r\n      }\r\n      if (params.query) {\r\n        this.searchBarForm.get('venueName').setValue(params.query)\r\n\r\n        // if url contains query\r\n        if (!this.SearchService.currentSearch) {\r\n          this.loading = true\r\n          const coord: CustomCoordinates = params.lng ? new CustomCoordinates(params.lng, params.lat) : this.MapService.getCenter()\r\n          this.SearchService.enterSearch(params.query, this.SearchService.mainSearch(params.query, coord), coord)\r\n          .finally(() => {\r\n            this.loading = false\r\n          })\r\n        }\r\n      }\r\n    })\r\n\r\n    if (this.SearchService.currentSearch) {\r\n      this.searchBarForm.get('venueName').setValue(this.SearchService.currentSearch.query)\r\n      if (this.SearchService.currentSearch.lat) {\r\n        // get name of searched city\r\n      }\r\n    }\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.searchBarForm.valid && this.CitySearchComponent.myControl.valid) {\r\n      this.submission.emit()\r\n      const coord: CustomCoordinates = this.clickedOption ? new CustomCoordinates(this.clickedOption.content.geometry.coordinates[0], this.clickedOption.content.geometry.coordinates[1]) : this.fakeCenter\r\n      this.SearchService.enterSearch(this.searchBarForm.get('venueName').value, this.SearchService.mainSearch(this.searchBarForm.get('venueName').value, coord), coord)\r\n      .then(() => {\r\n        this.SearchService.currentSearch = {query: this.searchBarForm.get('venueName').value, lng: coord.lng, lat: coord.lat, category: this.defaultCategory}\r\n        this.router.navigate(['search'], {queryParams: {query: this.searchBarForm.get('venueName').value, lng: coord.lng, lat: coord.lat, category: this.defaultCategory}})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n\r\n  /** all|venues|users */\r\n  changeFilter(filter: {response: string, value: string}) {\r\n    this.defaultFilter = filter.value\r\n    this.defaultCategory = this.filterOptions[filter.value]\r\n    this.SearchService.changeFilter(parseInt(filter.value))\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.returnTab_sub.unsubscribe()\r\n    this.fakeCenter_sub.unsubscribe()\r\n    this.clickedOption_sub.unsubscribe()\r\n  }\r\n}\r\n","<!-- search bar -->\r\n<form [formGroup]='searchBarForm' (ngSubmit)='onSubmit()' class='container-fluid row' style=\"min-width: 100%; background-color: rgba(255, 255, 255, 0.9); margin: 0; padding: 0;\">\r\n  <span class=\"col row mr-auto\" style=\"padding-top: 1em; margin: 0; padding-right: 0; padding-left: 0;\">\r\n    <!-- venue name -->\r\n    <mat-form-field class=\"col align-self-center\" style=\"padding-left: 0.5em; padding-right: 0;\" appearance=\"outline\">\r\n      <mat-label>Search for {{defaultCategory === 'All'? '...' : defaultCategory}}</mat-label>\r\n      <input matInput\r\n        type=\"text\"\r\n        placeholder='Ex: restaurant'\r\n        aria-label='Search'\r\n        autocomplete='off'\r\n        formControlName='venueName'>\r\n      <button mat-button *ngIf=\"searchBarForm.get('venueName').value != ''\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"searchBarForm.get('venueName').setValue('')\" type='button'>\r\n        <mat-icon>close</mat-icon>  \r\n      </button>\r\n      <i fas fa-search aria-hidden=\"true\"></i>\r\n    </mat-form-field>\r\n    &nbsp;\r\n    &nbsp;\r\n    <p class=\"align-self-center\">in</p>\r\n    &nbsp;\r\n    &nbsp;\r\n    <!-- venue location -->\r\n    <app-city-search appearance='outline' placeholder='Region' [clearOnSearch]='false' [getFakeCenterCity]='true' class=\"col align-self-center\" style=\"min-width: 200px; padding-right: 0.5em; padding-left: 0;\"></app-city-search>\r\n    <mat-divider vertical=\"true\" style=\"margin-bottom: 1em;\"></mat-divider>\r\n    <!-- filter user|venues -->\r\n    <mat-form-field class=\"col-auto align-self-center\" style=\"max-width: 125px; padding-left: 0.5em;\" *ngIf='!isChild'>\r\n      <mat-label>Filter</mat-label>\r\n      <mat-select [(ngModel)]='defaultFilter' [ngModelOptions]=\"{standalone: true}\" (selectionChange)='changeFilter($event)'>\r\n        <mat-option value='0'>All</mat-option>\r\n        <mat-option value='1'>Venues</mat-option>\r\n        <mat-option value='2'>Users</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <!-- filter categories -->\r\n    <mat-form-field class=\"col-auto align-self-center\" style=\"max-width: 125px; padding-left: 0.5em;\" appearance='outline' *ngIf='isChild'>\r\n      <mat-label>Category</mat-label>\r\n      <mat-select [(value)]='defaultCategory'>\r\n          <mat-option value='All'>All</mat-option>\r\n          <mat-option *ngFor='let category of categories' [value]='category.name'>{{category.name}}</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <!-- submit -->\r\n    <div class=\"col-auto\" style=\"padding-top: 1em;\">\r\n      <button mat-raised-button type='submit' class=\"align-self-center\" color='primary' matTooltip='select a city to search in or drag the area you want to search to the center of the visible map' matTooltipShowDelay='800'>\r\n        <mat-icon>search</mat-icon>\r\n      </button>        \r\n    </div>\r\n  </span> \r\n</form>\r\n\r\n<router-outlet *ngIf='!isChild'></router-outlet>\r\n","import { Subscription } from 'rxjs'\r\nimport { SessionService } from '../../../services/session.service'\r\nimport { SocketService } from 'src/app/services/chatsystem/socket.service'\r\nimport { Component, OnInit, Renderer2, ViewChild, ElementRef, Input, OnDestroy } from '@angular/core'\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service'\r\nimport { RoomWidget } from '../../../models/Room_Widget.model'\r\n\r\n@Component({\r\n  selector: 'app-chatwidget',\r\n  templateUrl: './chatwidget.component.html',\r\n  styleUrls: ['./chatwidget.component.scss']\r\n})\r\n\r\nexport class ChatwidgetComponent implements OnInit, OnDestroy {\r\n  @Input() roomName: string\r\n  @Input() roomId: string\r\n  @ViewChild('textarea') div: ElementRef\r\n  sessionRoomName: string\r\n  typeArea = ''\r\n  sessionState: boolean\r\n  private sessionSub: Subscription\r\n  roomModel: RoomWidget\r\n  private roomSub: Subscription\r\n  username: string = sessionStorage.getItem('username')\r\n\r\n\r\n  constructor(private friendlistService: FriendlistService,\r\n              private renderer: Renderer2,\r\n              private socketService: SocketService,\r\n              public sessionService: SessionService) { }\r\n\r\n  ngOnInit(): void {\r\n    // subscribe to Observables\r\n    this.sessionSub = this.sessionService.sessionState.subscribe((isLoggedIn) => {\r\n      this.sessionState = isLoggedIn\r\n    })\r\n\r\n    this.roomSub = this.friendlistService.roomModel.subscribe((room) => {\r\n      this.roomModel = room\r\n    })\r\n\r\n    this.sessionRoomName = this.sessionService.getRoomName(this.roomName)\r\n\r\n    // pull Chatroom content from backend\r\n    this.socketService.emit('initChatroom', {id: this.roomId, username: this.username}, (data) => {\r\n      if (data.err) {\r\n        console.log(data.err)\r\n      } else {\r\n        data.messages.forEach((message) => {\r\n          const ul: HTMLParagraphElement = this.renderer.createElement('ul')\r\n          ul.innerHTML = `${message.sender === this.username ? 'you' : message.sender}: ${message.content}`\r\n          this.renderer.appendChild(this.div.nativeElement, ul)\r\n        })\r\n      }\r\n    })\r\n\r\n    this.friendlistService.selectChatwidget(this.roomId)\r\n\r\n    // listen for messages & add display them\r\n    this.socketService.listen('message_res').subscribe((data: any) => {\r\n      if (this.roomId == data.res.roomId){\r\n        const ul: HTMLParagraphElement = this.renderer.createElement('ul')\r\n        ul.innerHTML = `${data.res.sender === this.username ? 'you' : data.res.sender}: ${data.res.content}`\r\n        this.renderer.appendChild(this.div.nativeElement, ul)\r\n        this.typeArea = ``\r\n      } else {\r\n      }\r\n    })\r\n\r\n    // listen for notifications\r\n    this.socketService.listen('notification').subscribe((data: any) => {\r\n\r\n    })\r\n  }\r\n\r\n  // look for enter button\r\n  onKey(event: KeyboardEvent) {\r\n    if (event.key == 'Enter') {\r\n      event.preventDefault()\r\n      this.sendMessage(this.typeArea)\r\n      this.typeArea = ''\r\n    }\r\n  }\r\n\r\n  // send message with socket\r\n  sendMessage(data: string): void {\r\n    if (data != '') {\r\n      this.socketService.emit('message', {roomId: this.roomId, sender: this.username, content: data})\r\n    }\r\n  }\r\n\r\n  toggleChatWidget(): void {\r\n    this.friendlistService.getRoomWidget(this.roomId)\r\n    this.friendlistService.toggleChatWidget(this.roomModel)\r\n    this.ngOnDestroy()\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.socketService.remove('message_res')\r\n    this.socketService.remove('notification')\r\n    this.roomSub.unsubscribe()\r\n    this.sessionSub.unsubscribe()\r\n  }\r\n}\r\n","<div  id='main' class=\"col-auto\" *ngIf='sessionState'>\r\n  <!-- top of widget -->\r\n  <div class=\"space rounded-top\" [innerText]='sessionRoomName' aria-readonly=\"true\" (click)='toggleChatWidget()'></div>\r\n\r\n  <!-- messages -->\r\n  <div class=\"text-wrap\" id='chatbody'*ngIf='sessionState'>\r\n    <br>\r\n    <div class=\"text-wrap\" id='textarea' #textarea ></div>\r\n  </div> \r\n\r\n  <!-- text and enter button -->\r\n  <div class='space rounded-bottom' >\r\n    <form (submit)='sendMessage(msg.value)' class=\"container-fluid\" autocomplete=\"off\">\r\n      <div class=\"row\">\r\n        <textarea class=\"col-auto\" name=\"ngModel\" [(ngModel)]='typeArea' #msg='ngModel' type=\"textarea\" (keydown)='onKey($event)'></textarea>\r\n        <input class='btn btn-primary col' id='submit' type=\"submit\" value=\"Send\">\r\n      </div>\r\n    </form>\r\n  </div>\r\n\r\n</div>","import { Router } from '@angular/router'\r\nimport { userModel } from 'src/app/models/user.model'\r\nimport { HttpService } from 'src/app/services/http.service'\r\nimport { Component, OnInit } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  user: userModel\r\n\r\n  constructor(private HttpService: HttpService, private Router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    // get user info\r\n    this.HttpService.get('/user', null).then((res: any) => {\r\n      this.user = res.user[0]\r\n    })\r\n  }\r\n\r\n  getProfile(username: string) {\r\n    this.Router.navigate(['/search/user/' + username])\r\n  }\r\n}\r\n","\r\n<div *ngIf=\"user\">\r\n        <p>Followers : {{user.followers.length}}</p>\r\n        <div *ngFor=\"let username of user.followers\">\r\n            <button mat-raised-button (click)=\"getProfile(username)\">\r\n                {{ username }}\r\n            </button>\r\n        </div>\r\n</div>\r\n<app-add-post></app-add-post>\r\n<app-display-posts></app-display-posts>\r\n","import { Component, OnInit, ViewChild, OnDestroy, AfterViewInit, AfterViewChecked } from '@angular/core'\r\nimport {COMMA, ENTER} from '@angular/cdk/keycodes'\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms'\r\nimport { ActivatedRoute, ParamMap } from '@angular/router'\r\n\r\nimport { AddPostService } from 'src/app/services/add-post.service'\r\nimport { Post } from 'src/app/models/post.model'\r\nimport { mimeType } from './mime-type.validator'\r\nimport { title } from 'process'\r\nimport { Subscription } from 'rxjs'\r\nimport { geocodeResponseModel } from 'src/app/models/geocodeResp.model'\r\nimport { CitySearchComponent } from '../city-search/city-search.component'\r\n\r\n@Component({\r\n  selector: 'app-add-post',\r\n  templateUrl: './add-post.component.html',\r\n  styleUrls: ['./add-post.component.scss']\r\n})\r\nexport class AddPostComponent implements OnInit, OnDestroy, AfterViewChecked {\r\n  enteredTitle = ''\r\n  enteredContent = ''\r\n  post: Post\r\n  isLoading = false\r\n  form: FormGroup\r\n  imagePreview: string\r\n  private mode = 'create'\r\n  private postId: string\r\n  location: string\r\n\r\n  // tags\r\n  visible = true\r\n  selectable = true\r\n  removable = true\r\n  addOnBlur = true\r\n  readonly separatorKeysCodes: number[] = [ENTER, COMMA]\r\n  tags: string[] = []\r\n\r\n  // filters\r\n  private clickedOption_sub: Subscription\r\n  clickedOption: geocodeResponseModel = null\r\n  @ViewChild(CitySearchComponent) CitySearchComponent: CitySearchComponent\r\n  checkedOnce = false\r\n\r\n  constructor(\r\n    public postsService: AddPostService,\r\n    public route: ActivatedRoute\r\n  ) {}\r\n\r\n\r\n  ngOnInit() {\r\n    this.form = new FormGroup({ // form to create social media posts\r\n      title: new FormControl(null, {validators: [Validators.required, Validators.minLength(3)]}),\r\n      location: new FormControl(null, { validators: [Validators.required] }),\r\n      content: new FormControl(null, { validators: [Validators.required] }),\r\n      tags: new FormControl(null, { validators: [Validators.required] }),\r\n      image: new FormControl(null, {\r\n        validators: [Validators.required],\r\n        asyncValidators: [mimeType]\r\n      })\r\n    })\r\n    this.route.paramMap.subscribe((paramMap: ParamMap) => {\r\n      if (paramMap.has('postId')) {\r\n        this.mode = 'edit'\r\n        this.postId = paramMap.get('postId')\r\n        this.isLoading = true\r\n        this.postsService.getPost(this.postId).subscribe(postData => {\r\n          this.isLoading = false\r\n          this.post = {\r\n            _id: postData._id,\r\n            author: postData.author,\r\n            date: postData.date,\r\n            location: postData.location,\r\n            likes: postData.likes,\r\n            title: postData.title,\r\n            content: postData.content,\r\n            imagePath: postData.imagePath,\r\n            tags: postData.tags,\r\n            comments: postData.comments,\r\n          }\r\n          this.form.setValue({\r\n            location: this.post.location,\r\n            title: this.post.title,\r\n            content: this.post.content,\r\n            image: this.post.imagePath,\r\n            tags: this.post.tags,\r\n          })\r\n          this.imagePreview = this.post.imagePath\r\n          this.tags = this.post.tags\r\n          this.location = this.post.location\r\n        })\r\n      } else {\r\n        this.mode = 'create'\r\n        this.postId = null\r\n      }\r\n    })\r\n  }\r\n\r\n  ngAfterViewChecked(){\r\n    if (this.CitySearchComponent && !this.checkedOnce){\r\n      this.clickedOption_sub = this.CitySearchComponent.clickedOption.subscribe((city: geocodeResponseModel) => {\r\n      if (city) {\r\n        this.clickedOption = city\r\n      } else {\r\n        this.clickedOption = null\r\n      }\r\n      })\r\n    }\r\n    else if (!this.CitySearchComponent){\r\n\r\n    }\r\n    else{\r\n      this.checkedOnce = true\r\n    }\r\n  }\r\n\r\n  onImagePicked(event: Event) { // close input form for images\r\n    const file = (event.target as HTMLInputElement).files[0]\r\n    this.form.patchValue({ image: file })\r\n    this.form.get('image').updateValueAndValidity()\r\n    const reader = new FileReader()\r\n    reader.onload = () => {\r\n      this.imagePreview = reader.result as string\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  onSavePost() { //send request to save post\r\n    this.onAddLocation(this.clickedOption.name)\r\n    if (this.form.invalid) {\r\n      return\r\n    }\r\n    this.isLoading = true\r\n    if (this.mode === 'create') {\r\n      const newPost = {\r\n        date: new Date().toLocaleString(),\r\n        location: this.form.value.location,\r\n        author: sessionStorage.getItem('username'),\r\n        title: this.form.value.title,\r\n        content: this.form.value.content,\r\n        image: this.form.value.image,\r\n        tags: this.form.value.tags,\r\n      }\r\n      this.postsService.addPost(newPost)\r\n    } else {\r\n      this.postsService.updatePost({\r\n        _id: this.postId,\r\n        date: this.post.date, // will be changed to earlier date\r\n        location: this.form.value.location,\r\n        author: sessionStorage.getItem('username'),\r\n        likes: this.post.likes,\r\n        title: this.form.value.title,\r\n        content: this.form.value.content,\r\n        image: this.form.value.image,\r\n        tags: this.form.value.tags,\r\n        comments: this.post.comments\r\n      })\r\n    }\r\n    this.form.reset()\r\n    this.isLoading = false;\r\n  }\r\n\r\n\r\n  addTag(event): void {\r\n    const input = event.input\r\n    const value = event.value\r\n\r\n    // Add a tag\r\n    if ((value || '').trim()) {\r\n      this.tags.push(value.trim())\r\n    }\r\n\r\n    // Reset the input value\r\n    if (input) {\r\n      input.value = ''\r\n    }\r\n    this.form.patchValue({ tags: this.tags })\r\n    this.form.get('tags').updateValueAndValidity()\r\n\r\n  }\r\n\r\n  removeTag(tag): void {\r\n    const index = this.tags.indexOf(tag)\r\n    if (index >= 0) {\r\n      this.tags.splice(index, 1)\r\n    }\r\n    this.form.patchValue({ tags: this.tags })\r\n    this.form.get('tags').updateValueAndValidity()\r\n  }\r\n  onAddLocation(location: string){\r\n    this.location = location\r\n    this.form.patchValue({ location })\r\n    this.form.get('location').updateValueAndValidity()\r\n  }\r\n  ngOnDestroy(){\r\n    this.clickedOption_sub.unsubscribe()\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-spinner *ngIf=\"isLoading\"></mat-spinner>\r\n  <form [formGroup]=\"form\" (submit)=\"onSavePost()\" *ngIf=\"!isLoading\">\r\n\r\n    <mat-form-field>\r\n      <input matInput type=\"text\" formControlName=\"title\" placeholder=\"Post Title\">\r\n      <mat-error *ngIf=\"form.get('title').invalid\">Please enter a post title.</mat-error>\r\n    </mat-form-field>\r\n\r\n    <!-- <mat-form-field> -->\r\n      <!-- <input matInput type=\"text\" formControlName=\"location\" placeholder=\"location\"> -->\r\n      <!-- <mat-error *ngIf=\"form.get('location').invalid\">Please enter a location</mat-error> -->\r\n    <!-- </mat-form-field> -->\r\n\r\n    <app-city-search (locationAdded)='onAddLocation($event)' [getFakeCenterCity]='true' [placeholder]='\"Region\" '>\r\n    </app-city-search>\r\n\r\n    <mat-form-field>\r\n      <textarea matInput rows=\"4\" formControlName=\"content\" placeholder=\"Post Content\"></textarea>\r\n      <mat-error *ngIf=\"form.get('content').invalid\">Please enter something</mat-error>\r\n    </mat-form-field>\r\n\r\n    <div>\r\n      <button mat-stroked-button type=\"button\" (click)=\"filePicker.click()\">Pick Image</button>\r\n      <input class='hidden' type=\"file\" #filePicker (change)=\"onImagePicked($event)\">\r\n    </div>\r\n\r\n    <div class=\"image-preview\" *ngIf=\"imagePreview !== '' && imagePreview && form.get('image').valid\">\r\n      <img [src]=\"imagePreview\" [alt]=\"form.value.title\">\r\n    </div>\r\n\r\n    <mat-form-field class=\"example-chip-list\">\r\n      <mat-chip-list #chipList aria-label=\"tag selection\">\r\n        <mat-chip *ngFor=\"let tag of tags\" [selectable]=\"selectable\"\r\n                 [removable]=\"removable\" (removed)=\"removeTag(tag)\">\r\n          {{tag}}\r\n          <mat-icon matChipRemove *ngIf=\"removable\">cancel</mat-icon>\r\n        </mat-chip>\r\n        <input placeholder=\"add a tag...\"\r\n          [matChipInputFor]=\"chipList\"\r\n          [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\r\n          [matChipInputAddOnBlur]=\"addOnBlur\"\r\n          (matChipInputTokenEnd)=\"addTag($event)\">\r\n      </mat-chip-list>\r\n    </mat-form-field>\r\n\r\n\r\n    <hr>\r\n    <button mat-raised-button color=\"accent\" type=\"submit\">Save Post</button>\r\n  </form>\r\n</mat-card>\r\n\r\n","import { SearchParams } from './../../models/searchParams'\r\nimport { ActivatedRoute } from '@angular/router'\r\nimport { geocodeResponseModel } from './../../models/geocodeResp.model'\r\nimport { MapService } from './../../services/map/map.service'\r\nimport { Subscription, BehaviorSubject, Observable } from 'rxjs'\r\nimport { OpenstreetmapService } from './../../services/map/openstreetmap.service'\r\nimport { FormControl, Validators } from '@angular/forms'\r\nimport { Component, OnInit, Input, OnDestroy, Output, ViewChild, AfterViewInit, EventEmitter } from '@angular/core'\r\nimport { MatSelect } from '@angular/material/select'\r\n\r\n@Component({\r\n  selector: 'app-city-search',\r\n  templateUrl: './city-search.component.html',\r\n  styleUrls: ['./city-search.component.scss']\r\n})\r\nexport class CitySearchComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild(MatSelect) MatSelect: MatSelect\r\n  @Input() appearance: string\r\n  @Input() placeholder: string\r\n  // initial location\r\n  @Input() location: string\r\n  @Input() getFakeCenterCity: boolean\r\n  @Input() clearOnSearch: boolean\r\n  // for custom event emiting\r\n  @Output() locationAdded = new EventEmitter<string>()\r\n\r\n  // search input variables\r\n  myControl: FormControl = new FormControl(null)\r\n  timeout\r\n  searched: Subscription\r\n\r\n  isLoading = false\r\n\r\n  openstreetmap_sub: Subscription\r\n\r\n  private fakeCenterCity_sub: Subscription\r\n\r\n  // display suggestions on autosuggest\r\n  private _autoSuggested: BehaviorSubject<Array<{[key: string]: any}>> = new BehaviorSubject([])\r\n  autoSuggested: Observable<Array<{[key: string]: any}>> = this._autoSuggested.asObservable()\r\n\r\n  // return clicked option\r\n  _clickedOptionLocal: geocodeResponseModel = null\r\n  private _clickedOption: BehaviorSubject<geocodeResponseModel> = new BehaviorSubject(this._clickedOptionLocal)\r\n  clickedOption: Observable<geocodeResponseModel> = this._clickedOption.asObservable()\r\n\r\n  constructor(private OpenstreetmapService: OpenstreetmapService,\r\n              private MapService: MapService,\r\n              private ActivatedRoute: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.MapService.citySearchPresent = true\r\n\r\n    this.ActivatedRoute.queryParams.subscribe((params: SearchParams) => {\r\n      if (params.lng) {\r\n        this.OpenstreetmapService.reverseSearch(params.lng, params.lat)\r\n        .subscribe((res) => {\r\n          if (res.features[0]) {\r\n            this.myControl.patchValue(this.removeMiddle(res.features[0].properties.display_name, 0))\r\n            this._clickedOptionLocal = new geocodeResponseModel(this.myControl.value, res.features[0].geometry.coordinates)\r\n            this._clickedOption.next(this._clickedOptionLocal)\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    // search for new cities on input value change\r\n    this.searched = this.myControl.valueChanges.subscribe(x => {\r\n      this._clickedOptionLocal = null\r\n      clearTimeout(this.timeout)\r\n      this.timeout = setTimeout(() => {\r\n        this.isLoading = true\r\n        this._autoSuggested.next([{}])\r\n        this.openstreetmap_sub = this.OpenstreetmapService.citySearch(x.toString()).subscribe(response => {\r\n          this.isLoading = false\r\n          const searchResults: Array<{[key: string]: any}> = []\r\n          response.features.forEach(element => {\r\n            const name = this.removeMiddle(element.properties.display_name, 1)\r\n            searchResults.push({name, content: element})\r\n          })\r\n          this._autoSuggested.next(searchResults)\r\n        }, (err) => {\r\n          this.isLoading = false\r\n          console.log(err)\r\n        })\r\n      }, 400)\r\n    })\r\n\r\n    if (this.getFakeCenterCity) {\r\n      // sub to city name at fake center\r\n      this.fakeCenterCity_sub = this.MapService.fakeCenterCity.subscribe((res: {[key: string]: any, features: Array<{[key: string]: any}>}) => {\r\n        if (res.features) {\r\n          this.placeholder = 'Region'\r\n          this.myControl.patchValue(this.removeMiddle(res.features[0].properties.display_name, 1))\r\n          this._clickedOptionLocal = new geocodeResponseModel(this.myControl.value, res.features[0].geometry.coordinates)\r\n          this._clickedOption.next(this._clickedOptionLocal)\r\n        } else {\r\n          this.myControl.patchValue('')\r\n          this.placeholder = 'No city found'\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  /** check if input contains valid city */\r\n  checkCityValidity(): boolean {\r\n    if (!this._clickedOptionLocal || this.myControl.value == '') {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  /** filters city name string, always keep first and last string */\r\n  removeMiddle(string: string, keep: number): string {\r\n    const arr: string[] = string.split(',')\r\n    let nothing = arr.shift()\r\n    for (let x = 0; x < keep; x++) {\r\n      if (arr[x] != arr.slice(-1)[0]) {\r\n        nothing = nothing.concat(', ', arr[x])\r\n      }\r\n    }\r\n    return nothing.concat(', ', arr[arr.length - 1])\r\n  }\r\n\r\n  /** when option is clicked */\r\n  onOptionClick(country: {[key: string]: any}) {\r\n    this._clickedOptionLocal = new geocodeResponseModel(country.name, country.content.geometry.coordinates, country.content)\r\n    this._clickedOption.next(this._clickedOptionLocal)\r\n    this.clearOnSearch ? this.myControl.patchValue('') : null\r\n    // this.emitCountry(this._clickedOptionLocal.name)\r\n  }\r\n\r\n  emitCountry(city) {\r\n    console.log(city)\r\n    this.locationAdded.emit(city)\r\n    this.clearOnSearch ? this.myControl.patchValue('') : null\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.MapService.citySearchPresent = false\r\n    this.searched.unsubscribe()\r\n    this.fakeCenterCity_sub ? this.fakeCenterCity_sub.unsubscribe() : null\r\n    this.openstreetmap_sub ? this.openstreetmap_sub.unsubscribe() : null\r\n  }\r\n\r\n}\r\n","<mat-form-field class=\"example-full-width\" style=\"width: 100%;\" [appearance]='appearance' matTooltip='{{searchInput.value}}' matTooltipShowDelay='800'>\r\n    <mat-label>{{ placeholder }}</mat-label>\r\n    <input type='text'\r\n    #searchInput=\"matInput\"\r\n    matInput\r\n    placeholder=\"Ex. Berlin\"\r\n    [matAutocomplete]=\"auto\"\r\n    [formControl]=\"myControl\"\r\n    autocomplete=\"off\">\r\n    <button mat-button *ngIf=\"myControl.value\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"myControl.patchValue(''); _clickedOptionLocal = null\" type='button'>\r\n        <mat-icon>close</mat-icon>\r\n    </button>\r\n    <small *ngIf='!checkCityValidity() && myControl.touched' class=\"text-danger\">this is not a valid region</small>\r\n    <mat-autocomplete #auto='matAutocomplete' panelWidth='25%'> \r\n        <mat-spinner *ngIf='isLoading' style=\"margin:0 auto;\"></mat-spinner>\r\n        <mat-option *ngFor='let country of autoSuggested | async' [value]='country.name' (onSelectionChange)='onOptionClick(country)'>\r\n            <span>{{ country.name }}</span>\r\n        </mat-option>\r\n    </mat-autocomplete>\r\n</mat-form-field>","import { Routes, RouterModule } from '@angular/router'\r\n\r\nimport { RegistrationProcessComponent } from './components/registration-process/registration-process.component'\r\nimport { NgModule } from '@angular/core'\r\nimport { loginComponent, LoginComponent } from './components/loginpage/loginpage.component'\r\nimport { ProfileComponent } from './components/profile/profile.component'\r\nimport { HomeComponent } from './components/tabs/home/home.component'\r\nimport { MytripComponent } from './components/tabs/mytrip/mytrip.component'\r\nimport { MyaccountComponent } from './components/myaccount/myaccount.component'\r\nimport { SearchresultsComponent } from './components/tabs/searchresults/searchresults.component'\r\nimport { VenueComponent } from './components/venue/venue.component'\r\nimport { SearchBarComponent } from './components/search-bar/search-bar.component'\r\nimport { UserprofileComponent } from './components/userprofile/userprofile.component'\r\nimport { AddPostComponent } from './components/add-post/add-post.component'\r\nimport { DisplayPostsComponent } from './components/display-posts/display-posts.component'\r\n\r\nconst routes: Routes = [\r\n  { path: 'create', component: AddPostComponent },\r\n  { path: 'edit/:postId', component:  AddPostComponent },\r\n  { path: 'login', component: LoginComponent },\r\n  { path: 'register', component: RegistrationProcessComponent },\r\n  { path: 'profile', component: ProfileComponent },\r\n  // { path: 'home', component: HomeComponent },\r\n  // { path: 'home/:query', component: HomeComponent },\r\n  { path: 'mytrip', component: MytripComponent, children: [\r\n      {path: '**', component: MytripComponent}\r\n  ] },\r\n  { path: 'myaccount', component: MyaccountComponent },\r\n  { path: 'search', component: SearchBarComponent, children: [\r\n    { path: 'venue/:query', component: VenueComponent },\r\n    { path: 'user/:query', component: UserprofileComponent },\r\n    { path: '**', component: SearchresultsComponent },\r\n  ]},\r\n  {path: '', redirectTo: 'mytrip', pathMatch: 'full'}\r\n]\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Injectable } from '@angular/core'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Subject } from 'rxjs'\r\nimport { map } from 'rxjs/operators'\r\nimport { Router } from '@angular/router'\r\nimport { environment } from 'src/environments/environment'\r\n\r\nimport { Post } from 'src/app/models/post.model'\r\nimport { Comment } from 'src/app/models/comment.model'\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AddPostService {\r\n  url = environment.travelnetURL + \"/api/posts/\"\r\n  public posts: Post[] = [];\r\n  private postsUpdated = new Subject<Post[]>();\r\n\r\n  constructor(private http: HttpClient, private router: Router) {}\r\n\r\n  getPosts() {\r\n    this.http\r\n      .get<{ message: string; posts: any }>(this.url)\r\n      .pipe(\r\n        map(postData => {\r\n          let formattedComment\r\n          let formattedReply\r\n          return postData.posts.map(post => {\r\n          return{\r\n              _id: post._id,\r\n              date: post.date,\r\n              location: post.location,\r\n              likes: post.likes,\r\n              author: post.author,\r\n              title: post.title,\r\n              content: post.content,\r\n              imagePath: post.imagePath,\r\n              tags: post.tags,\r\n              comments: post.comments\r\n            }\r\n\r\n          })\r\n        })\r\n      )\r\n      .subscribe(transformedPosts => {\r\n        this.posts = transformedPosts\r\n        this.postsUpdated.next(this.posts)\r\n      })\r\n  }\r\n  getRelevantPosts(UserPref: {author: string, follows: [string], tags: [string], location: [string] }){\r\n    this.http\r\n      .post<{ message: string; posts: any }>(this.url + 'getSpecific/', UserPref).pipe(\r\n        map(postData => {\r\n          return postData.posts.map(post => {\r\n          return{\r\n              _id: post._id,\r\n              date: post.date,\r\n              location: post.location,\r\n              likes: post.likes,\r\n              author: post.author,\r\n              title: post.title,\r\n              content: post.content,\r\n              imagePath: post.imagePath,\r\n              tags: post.tags,\r\n              comments: post.comments\r\n            }\r\n\r\n          })\r\n        })\r\n      ).subscribe(transformedPosts => {\r\n        this.posts = transformedPosts\r\n        this.postsUpdated.next(this.posts)\r\n      })\r\n  }\r\n  searchPosts(input: {input: string}){\r\n    this.http\r\n    .post<{ message: string; posts: any }>(this.url + 'getOne', input).pipe(\r\n      map(postData => {\r\n        return postData.posts.map(post => {\r\n        return{\r\n            _id: post._id,\r\n            date: post.date,\r\n            location: post.location,\r\n            likes: post.likes,\r\n            author: post.author,\r\n            title: post.title,\r\n            content: post.content,\r\n            imagePath: post.imagePath,\r\n            tags: post.tags,\r\n            comments: post.comments\r\n          }\r\n\r\n        })\r\n      })\r\n    ).subscribe(transformedPosts => {\r\n      this.posts = transformedPosts\r\n      console.log(this.posts)\r\n      this.postsUpdated.next(this.posts)\r\n    })\r\n\r\n  }\r\n\r\n\r\n  getPostUpdateListener() {\r\n    return this.postsUpdated.asObservable()\r\n  }\r\n\r\n  getPost(id: string) {\r\n    return this.http.get<{\r\n      _id: string,\r\n      date: string,\r\n      location: string,\r\n      author: string,\r\n      likes: Array<string>,\r\n      title: string,\r\n      content: string,\r\n      imagePath: string,\r\n      tags: Array<string>,\r\n      comments: Array<Comment>}>(\r\n      this.url + id\r\n    )\r\n  }\r\n\r\n  /**is now implemented inside user */\r\n  addPost(newPost) {\r\n    const postData = new FormData()\r\n    postData.append('date', newPost.date)\r\n    postData.append('location', newPost.location)\r\n    postData.append('author', newPost.author)\r\n    postData.append('title', newPost.title)\r\n    postData.append('content', newPost.content)\r\n    postData.append('image', newPost.image, newPost.title)\r\n    postData.append('tags', newPost.tags)\r\n    this.http\r\n      .post<{ message: string; post: Post }>(\r\n        this.url,\r\n        postData, {\r\n          headers: {\r\n            authorization: localStorage.getItem('token') ? localStorage.getItem('token').toString() : 'monkas'\r\n          }\r\n        }\r\n      )\r\n      .subscribe(responseData => {\r\n        const post: Post = {\r\n          _id: responseData.post._id,\r\n          date: responseData.post.date,\r\n          location: responseData.post.location,\r\n          author: responseData.post.author,\r\n          likes: responseData.post.likes,\r\n          title: newPost.Title,\r\n          content: newPost.content,\r\n          imagePath: responseData.post.imagePath,\r\n          tags: responseData.post.tags,\r\n          comments: responseData.post.comments,\r\n        }\r\n        this.posts.push(post)\r\n        this.postsUpdated.next(this.posts)\r\n        this.router.navigate(['/'])\r\n        console.log(this.posts)\r\n      })\r\n  }\r\n\r\n  updatePost(newPost) {\r\n    // id: string, title: string, content: string, image: File | string\r\n    let postData: Post | FormData\r\n    if (typeof newPost.image === 'object') {\r\n      postData = new FormData()\r\n      postData.append('id', newPost._id)\r\n      postData.append('date', newPost.date)\r\n      postData.append('location', newPost.location)\r\n      postData.append('author', newPost.author)\r\n      postData.append('likes', newPost.likes)\r\n      postData.append('title', newPost.title)\r\n      postData.append('content', newPost.content)\r\n      postData.append('image', newPost.image, newPost.title)\r\n      postData.append('tags', newPost.tags)\r\n      postData.append('comments', newPost.comments)\r\n    } else {\r\n      postData = {\r\n        _id: newPost._id,\r\n        date: newPost.date,\r\n        location: newPost.location,\r\n        author: newPost.author,\r\n        likes: newPost.likes,\r\n        title: newPost.title,\r\n        content: newPost.content,\r\n        imagePath: newPost.image,\r\n        tags: newPost.tags,\r\n        comments: newPost.comments\r\n      }\r\n    }\r\n    this.http\r\n      .put(this.url + newPost._id, postData)\r\n      .subscribe(response => {\r\n        const updatedPosts = [...this.posts]\r\n        const oldPostIndex = updatedPosts.findIndex(p => p._id === newPost.id)\r\n        const post: Post = {\r\n          _id: newPost._id,\r\n          date: newPost.date,\r\n          location: newPost.location,\r\n          author: newPost.author,\r\n          likes: newPost.likes,\r\n          title: newPost.title,\r\n          content: newPost.content,\r\n          imagePath: '',\r\n          tags: newPost.tags,\r\n          comments: newPost.comments\r\n        }\r\n        console.log(post)\r\n        updatedPosts[oldPostIndex] = post\r\n        this.posts = updatedPosts\r\n        this.postsUpdated.next(this.posts)\r\n        this.router.navigate(['/'])\r\n      })\r\n  }\r\n\r\n  deletePost(postId: string) {\r\n    this.http\r\n      .delete(this.url + postId)\r\n      .subscribe(() => {\r\n        const updatedPosts = this.posts.filter(post => post._id !== postId)\r\n        this.posts = updatedPosts\r\n        this.postsUpdated.next(this.posts)\r\n      })\r\n  }\r\n  likePost(postId: string, username: string){\r\n    const updatedPostIndex = this.posts.indexOf(this.posts.find(post => post._id == postId))\r\n    this.http\r\n      .put(this.url + 'like/' + postId, {username})\r\n      .subscribe((response: {message: string, likes: string[]}) => {\r\n        (this.posts[updatedPostIndex]).likes = response.likes\r\n        this.postsUpdated.next(this.posts)\r\n      })\r\n  }\r\n  updatePosts(posts){\r\n    this.postsUpdated.next(posts)\r\n  }\r\n}\r\n","import { SessionService } from 'src/app/services/session.service'\r\nimport { Router } from '@angular/router'\r\nimport { tab } from '../../models/tab.model'\r\nimport { ResizeEvent } from 'angular-resizable-element'\r\nimport { Subscription } from 'rxjs'\r\nimport { FriendlistService } from 'src/app/services/chatsystem/friendlist.service'\r\nimport { Component, OnInit, OnDestroy, ViewChild, AfterViewInit } from '@angular/core'\r\nimport { trigger, state, style, animate, transition, } from '@angular/animations'\r\nimport { MapService } from 'src/app/services/map/map.service'\r\n\r\n@Component({\r\n  selector: 'app-sidebar',\r\n  templateUrl: './sidebar.component.html',\r\n  styleUrls: ['./sidebar.component.scss'],\r\n})\r\nexport class SidebarComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  // about sidebar\r\n  private windowSub: Subscription\r\n  window = true\r\n  width = 0.4\r\n  Styles = {\r\n    position: 'fixed',\r\n    'background-color': 'rgba(255,255,255,0.75)',\r\n    'min-width': '710px',\r\n    top: '1%',\r\n    left: '1%',\r\n    height: '95%',\r\n    'max-height': '95%',\r\n    overflow: 'hidden',\r\n    padding: '0',\r\n    width: `${window.innerWidth >= 500 ? window.innerWidth * this.width : window.innerWidth}px`,\r\n  }\r\n  showFiller = true\r\n  @ViewChild('drawer') drawer\r\n\r\n  // about sidebar tabs\r\n  private openTabSub: Subscription\r\n  openTab: tab\r\n\r\n  tabs: any[] = ['home', 'mytrip', 'search']\r\n\r\n  selectedTab(): string {\r\n    if (this.Router.url.substr(0, 7) == '/search') {\r\n      return '/search'\r\n    } else {\r\n      return this.Router.url\r\n    }\r\n  }\r\n\r\n  constructor(private FriendlistService: FriendlistService,\r\n              private Router: Router,\r\n              private MapService: MapService,\r\n              private SessionService: SessionService\r\n              )\r\n  {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() { // setup friendlist\r\n    this.windowSub = this.FriendlistService.windowSize.subscribe((windowWidth) => {\r\n      if (windowWidth <= this.drawer._width) {\r\n        if (windowWidth < 500 || window.innerWidth) {\r\n          this.window = false\r\n        } else {\r\n          this.Styles.width = `${windowWidth * 0.96}px`\r\n        }\r\n      } else {\r\n        this.window = true\r\n      }\r\n    })\r\n  }\r\n\r\n  validate(event: ResizeEvent) {\r\n    const MIN_DIMENSIONS_PX = 500\r\n    const maxWidth: number = window.innerWidth * 0.96\r\n    if (\r\n      event.rectangle.width && // if defined\r\n      event.rectangle.height && // if defined\r\n      (event.rectangle.width < MIN_DIMENSIONS_PX ||\r\n      event.rectangle.width > maxWidth)\r\n    ) {\r\n      return false\r\n    } else {\r\n      return true\r\n    }\r\n  }\r\n\r\n  onResizeEnd(event: {edges: any, rectangle: {bottom: number, height: number, left: number, right: number, scrollLeft: number, scrollTop: number, top: number, width: number}}): void {\r\n    this.Styles.width = `${event.rectangle.width}px`\r\n    this.SessionService.updateSidebarWidth(event.rectangle.width)\r\n    this.MapService.getFakeCenter()\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.windowSub.unsubscribe()\r\n    this.openTabSub.unsubscribe()\r\n  }\r\n}\r\n\r\n","<!-- open sidebar button -->\r\n<div *ngIf='!window' class=\"example-sidenav-content bg-light\" id=\"openToggle\">\r\n    <button type=\"button\" mat-button (click)=\"drawer.toggle(); window = !window\">\r\n    Open Sidebar\r\n    </button>\r\n</div>\r\n\r\n<mat-drawer-container class='container-fluid border' autosize>\r\n    <mat-drawer\r\n        mwlResizable\r\n        [validateResize]='validate'\r\n        [enableGhostResize]=\"true\"\r\n        (resizeEnd)=\"onResizeEnd($event)\"\r\n        [opened]='window'\r\n        #drawer\r\n        mode=\"side\"\r\n        [ngStyle]='Styles'>\r\n\r\n        <!-- resize sidebar icon -->\r\n        <button\r\n            mwlResizeHandle\r\n            [resizeEdges]=\"{ bottom: false, right: true, top: false, left: false }\"\r\n            id=\"resize\"\r\n            class=\"btn border-left\">\r\n            <span>\r\n                <svg class=\"bi bi-grip-horizontal\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\r\n                </svg>\r\n            </span>\r\n        </button>\r\n\r\n        <!-- tabs menu -->\r\n        <div class=\"container row border-bottom\"\r\n            style=\"background-color: rgba(255, 255, 255, 1); padding-right: 1%; margin: 0; margin-right: 1%; min-width: 100%;\">\r\n            \r\n            <!-- <button mat-button *ngIf='selectedTab() != \"/home\"' class=\"nav-link col\" routerLink='home'>Home</button>\r\n            <button mat-raised-button *ngIf='selectedTab() == \"/home\"' class=\"nav-link col\" routerLink='home'>Home</button> -->\r\n\r\n\r\n            <button mat-button *ngIf='selectedTab() != \"/mytrip\"' class=\"nav-link col\" routerLink='mytrip'>My Trip</button>\r\n            <button mat-raised-button *ngIf='selectedTab() == \"/mytrip\"' class=\"nav-link col\" routerLink='mytrip'>My Trip</button>\r\n\r\n            <button mat-button *ngIf='selectedTab() != \"/search\"' class=\"nav-link col\" routerLink=\"search\">Search</button>\r\n            <button mat-raised-button *ngIf='selectedTab() == \"/search\"' class=\"nav-link col\" routerLink=\"search\">Search</button>\r\n\r\n            <!-- new tabs feature -->\r\n            <!-- <app-searchbutton\r\n                *ngFor='let item of openTabs, let i = index'\r\n                [searchTab]='item'>\r\n            </app-searchbutton>\r\n            <button mat-button class=\"nav-item col-1\" data-toggle=\"pill\" (click)='newTab()'>+</button>-->\r\n\r\n\r\n            <!-- hide sidebar -->\r\n            <button mat-button color='warn' id='closeToggle' class=\"close-nav nav-link\" type=\"button\" (click)=\"window = !window\">\r\n                <span>\r\n                    <svg class=\"bi bi-arrow-bar-left\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" d=\"M5.854 4.646a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 0 .708l3 3a.5.5 0 0 0 .708-.708L3.207 8l2.647-2.646a.5.5 0 0 0 0-.708z\"/>\r\n                        <path fill-rule=\"evenodd\" d=\"M10 8a.5.5 0 0 0-.5-.5H3a.5.5 0 0 0 0 1h6.5A.5.5 0 0 0 10 8zm2.5 6a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 1 0v11a.5.5 0 0 1-.5.5z\"/>\r\n                    </svg>\r\n                </span>\r\n            </button>\r\n        </div>\r\n\r\n        <!-- sidebar content -->\r\n        <div #oi class=\"container-fluid\" style=\"width: 98%; max-height: 95%; padding: 0; padding-top: 1%; padding-top: 0; margin-left: 0; margin-right: 0; overflow-y: auto;\">\r\n            <router-outlet style=\"height: 100%;\"></router-outlet>\r\n        </div>\r\n    </mat-drawer>\r\n</mat-drawer-container>\r\n\r\n\r\n","import { enableProdMode } from '@angular/core'\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic'\r\n\r\nimport { AppModule } from './app/app.module'\r\nimport { environment } from './environments/environment'\r\n\r\nif (environment.production) {\r\n  enableProdMode()\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err))\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}